# ğŸ“ `context_tracker/` â€“ MÃ³dulo de Seguimiento de Interacciones

Este mÃ³dulo forma parte de la arquitectura de `ALMA_RESIST`, y se encarga de registrar, validar y recuperar interacciones histÃ³ricas entre el usuario y el sistema IA.

## ğŸ“Œ Objetivo

Registrar de forma estructurada y validada cada interacciÃ³n del sistema, incluyendo:
- Prompt ingresado
- Respuesta generada
- Metadatos del contexto (modelo usado, mÃ³dulo activo, etiquetas, etc.)
- Timestamp con formato UTC ISO8601

## ğŸ“‚ Estructura

| Archivo / Carpeta | DescripciÃ³n |
|-------------------|-------------|
| `__init__.py` | Inicializador de paquete Python |
| `context_tracker.py` | ImplementaciÃ³n principal del `ContextTracker` |
| `chengelog_context_tracker_v0.0.0.2.md` | Registro de cambios para la versiÃ³n 0.0.0.2 |
| `_legacy/` | Implementaciones antiguas para trazabilidad histÃ³rica |
| `__pycache__/` | Archivos cacheados por Python (ignorar) |

## âš™ï¸ Funcionalidades Clave

- ValidaciÃ³n con `jsonschema`
- Esquema de datos flexible con campos opcionales
- Almacenamiento en formato `JSONL` (una interacciÃ³n por lÃ­nea)
- Cache interno de hasta 100 entradas para mejorar performance
- Manejo de archivos corruptos
- Borrado y reinicializaciÃ³n segura del historial

## ğŸ§ª Estado de Pruebas

El mÃ³dulo cuenta con cobertura total desde `tests/context_tracker/`. Los test actuales verifican:
- Registro vÃ¡lido e invÃ¡lido
- Persistencia entre sesiones
- Manejo de lÃ­neas corruptas
- Orden cronolÃ³gico correcto
- LÃ­mite de cachÃ©
- Permisos de archivo
- Limpieza de historial

âœ… Ãšltima ejecuciÃ³n: **todos los tests pasaron correctamente**

## ğŸš§ Pendientes

- RevisiÃ³n de duplicaciÃ³n entre entradas por ID Ãºnico
- SincronizaciÃ³n con sistema de memoria ALMA externa (futuro)
- Posible separaciÃ³n entre interacciones de usuario y sistema

## ğŸ§  IntegraciÃ³n

Este mÃ³dulo se importa desde:
```python
from core.llm_server.integration.context_tracker import ContextTracker
```


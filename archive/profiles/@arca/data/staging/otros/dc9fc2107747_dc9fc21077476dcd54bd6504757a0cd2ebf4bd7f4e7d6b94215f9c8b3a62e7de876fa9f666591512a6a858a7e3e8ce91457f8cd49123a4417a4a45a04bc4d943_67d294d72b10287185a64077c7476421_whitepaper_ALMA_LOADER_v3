# üìò Whitepaper ALMA_LOADER v3.0

## 1. Pr√≥logo

ALMA_LOADER no es una simple aplicaci√≥n.

Es una mente digital modular dise√±ada para pensar con vos, aprender de vos y ayudarte a evolucionar. Su objetivo es transformar el caos de tu d√≠a a d√≠a en conocimiento estructurado, patrones comprensibles y decisiones m√°s inteligentes.

Inspirado en un asistente que registra memorias, emociones y acciones, ALMA_LOADER es adaptable, entrenable y expandible. Puede ser usado por humanos o por IAs, en contextos personales, t√©cnicos o empresariales.

Crece con vos. No solo guarda lo que dec√≠s, sino que analiza por qu√© lo dec√≠s, c√≥mo actu√°s, y qu√© podr√≠as mejorar.

Es tu memoria externa, tu bit√°cora cognitiva y tu asistente reflexivo.

El Whitepaper: **‚Äúvisi√≥n estrat√©gica y emocional‚Äù**

> ‚ÄúUna mente clara comienza con una memoria ordenada.‚Äù

## 2. ¬øQu√© es ALMA_LOADER?
Es un sistema de gesti√≥n de memorias que transforma entradas en lenguaje natural en objetos estructurados, los valida, almacena, analiza y resume. Est√° dise√±ado para crecer: desde simples registros hasta an√°lisis sem√°nticos con embeddings, pasando por gamificaci√≥n, automatizaci√≥n y retroalimentaci√≥n inteligente.

## 3. Casos de Uso
- Diario de trading inteligente
- Asistente de reflexi√≥n personal
- Registro emocional y h√°bitos
- Dashboard de decisiones + alertas
- Base de datos para IA contextual
- Entrenador de h√°bitos y rutinas

### üß™ Ejemplo Narrativo

Un usuario escribe:

> *‚ÄúHoy oper√© con 5% de riesgo tras dormir solo 4 horas. Me sent√≠ acelerado y tom√© decisiones impulsivas.‚Äù*

ALMA_LOADER detecta los tags impl√≠citos `#fatiga`, `#riesgo_elevado`, y `#emocion:impulsividad`.  
Gracias a su sistema de reglas inteligentes, dispara la siguiente acci√≥n:

- Sugiere revisar la memoria `MEMHEALTH-022` que trata sobre riesgos de operar cansado.
- Recomienda reducir el riesgo operativo al 1%.
- Etiqueta esta memoria como `#alerta:riesgo` para an√°lisis futuro.

Este tipo de intervenci√≥n contextual transforma simples registros en decisiones informadas.


## 4. Arquitectura Conceptual
- N√∫cleo de procesamiento (NL ‚Üí JSON)
- Validaci√≥n sem√°ntica (`schema_base.json`)
- Almacenamiento modular (SQLite / FAISS / futuros motores)
- Sistema de atenci√≥n (router)
- Vectorizaci√≥n sem√°ntica (embeddings)
- Reglas inteligentes y generaci√≥n de res√∫menes

> üí° ¬øQuer√©s entender c√≥mo se implementa cada m√≥dulo?  
> Consult√° la [Gu√≠a T√©cnica (Prompt T√©cnico)](ALMA_LIBRE/MODULOS/Alma_Loader/alma_loader_v3.0.3/docs/archivos_fundamentales/prompt_technical_ALMA_LOADER_v3.0.2.md)

### üß© Tabla de Correspondencia: M√≥dulos ‚Üî Scripts

Para ver el detalle de implementaci√≥n, consult√° la tabla de m√≥dulos en el [Prompt T√©cnico](ALMA_LIBRE/MODULOS/Alma_Loader/alma_loader_v3.0.3/docs/archivos_fundamentales/prompt_technical_ALMA_LOADER_v3.0.2.md#2-m√≥dulos-funcionales).

---
### 4.1 üåê API REST (Dise√±o Futuro)

ALMA_LOADER est√° preparado para exponer una API REST que permita la integraci√≥n con interfaces externas, aplicaciones m√≥viles, dashboards anal√≠ticos, asistentes de voz y automatizaciones.

La API ser√° desarrollada con FastAPI y seguir√° est√°ndares modernos (OpenAPI 3.1).

### üîå Endpoints planeados (versi√≥n inicial)

| M√©todo | Endpoint             | Descripci√≥n breve                              |
|--------|----------------------|-------------------------------------------------|
| POST   | /memorias            | Registra una nueva memoria                     |
| GET    | /memorias            | Devuelve todas las memorias                    |
| GET    | /memorias/{id}       | Busca una memoria por ID                       |
| GET    | /memorias/search     | B√∫squeda sem√°ntica por contenido o tags        |
| POST   | /memorias/relacionar | Enlaza dos memorias existentes                 |
| GET    | /tags                | Lista todos los tags usados                    |
| GET    | /memorias/recientes  | Devuelve √∫ltimas N memorias registradas        |

### üß© Ejemplo de integraci√≥n futura

```http
POST /memorias
Content-Type: application/json

{
  "id": "MEM-TRD-2025-05-06-001",
  "categoria": "TRD",
  "contenido": "Oper√© ETH/USD con 3% de riesgo tras dormir poco.",
  "tags": ["#fatiga", "#riesgo", "#trading"]
}
```

Este input ser√° validado con `schema_base.json`, almacenado v√≠a `SQLiteStorage`, vectorizado (FAISS) y procesado por `on_memoria_guardada()` si aplica.

> Esta API ser√° lanzada como parte de la versi√≥n 3.1.x de ALMA_LOADER.
## 5. Diagramas del Sistema
```mermaid
flowchart TD
    input["üßë Usuario o IA"] --> nl["core_nl.py"]
    nl --> validador["validador.py"]
    validador --> router["router_atencional.py"]
    router --> storage["sqlite_storage / vector_storage"]
    router --> resumenes["resumenes.py"]
    resumenes --> output["üìÑ Markdown / Dashboard"]
    storage --> analytics["alma_analytics.py"]
    analytics --> output
```

## 6. Escalabilidad y Visi√≥n Futura
- Vectorizaci√≥n total y enlaces entre memorias (grafos)
- Reemplazo de SQLite por motores orientados a relaciones (Neo4j)
- Integraci√≥n con asistentes personales v√≠a voz, API y web
- Memorias multiusuario con capas de privacidad

## 7. Recomendaciones de Integraci√≥n
- El sistema espera entradas en lenguaje natural o JSON v√°lido
- Cada m√≥dulo puede operar por separado (desacoplamiento limpio)
- Ideal para integrarlo como backend de un asistente IA
- DeepSeek, GPT o interfaces custom pueden usarlo como n√∫cleo de memoria conversacional
## 8. Comandos √ötiles ‚Äì Modo Asistente

ALMA_LOADER puede ser utilizado como un asistente conversacional desde cualquier interfaz (terminal, Telegram, Shortcuts, GPT, etc.). A continuaci√≥n, algunos ejemplos de uso:

### üìò Comandos de Registro
- `/nueva Hoy gan√© $100 operando BTC con alta ansiedad`
- `/nueva Me sent√≠ estancado y sin claridad esta semana`

### üìô Comandos de Acci√≥n
- `/accion Meditar 15 minutos despu√©s del mercado`
- `/accion Ajustar riesgo a 1% esta semana`

### üìó Comandos de Reflexi√≥n
- `/reflexion Me doy cuenta que opero peor cuando duermo poco`
- `/reflexion Revisar trades similares a MEM-TRD-2025-04-10`

### üìï Comandos de Consulta
- `/resumen semana`
- `/alertas activas`
- `/recomendar memoria relacionada con ansiedad y sobreoperaci√≥n`

> Cada uno de estos comandos ser√° procesado y transformado en memoria, acci√≥n o reflexi√≥n seg√∫n el m√≥dulo de atenci√≥n.

---
> Este whitepaper resume el esp√≠ritu, dise√±o y ambici√≥n de ALMA_LOADER desde una perspectiva conceptual y estrat√©gica. Complementa al prompt t√©cnico 3.0 que contiene las definiciones formales del sistema.

## üîå Integraci√≥n con M√≥dulos Externos

ALMA_LOADER est√° dise√±ado para operar como n√∫cleo de memoria e inteligencia sem√°ntica para m√∫ltiples aplicaciones.

Esta versi√≥n 3.0.2 introduce una estructura preparada para la futura integraci√≥n de m√≥dulos externos. Cada uno de estos m√≥dulos podr√° interactuar con el sistema a trav√©s de sus interfaces y funciones expuestas.

### Ejemplos de m√≥dulos potenciales (en evaluaci√≥n):
- üìä Analizador de Trading Emocional
- üå± Gestor Inteligente de Cultivo
- üìî Bit√°cora Personal Automatizada
- üß† Asistente de Decisiones Estrat√©gicas
- üí∞ Controlador de Fondos y Riesgo

> En futuras versiones, cada m√≥dulo tendr√° su documentaci√≥n (`README`) y prompt local, conectado a ALMA_LOADER como backend de memoria.

Esta secci√≥n ser√° actualizada a medida que se confirmen las integraciones.

---

## üß≠ Roadmap General Estrat√©gico ‚Äì ALMA_LOADER Post v3.0.3

### üéØ Objetivo General

Consolidar un backend modular, seguro y ampliable que act√∫e como n√∫cleo inteligente de un asistente personal diario. Toda la l√≥gica y estructura se mantiene sintetizada en dos archivos base (`whitepaper` y `prompt t√©cnico`) para m√°xima claridad e interoperabilidad con modelos de lenguaje. Se prioriza compatibilidad con cuadernos digitales (Obsidian, Shortcuts, Recordatorios).

---

### üîÅ Fase 1 ‚Äì Consolidaci√≥n del N√∫cleo
- Vectorizaci√≥n real con FAISS (`core/vector_storage.py`)
- GET `/v1/memorias`: recuperaci√≥n por texto, ID o tags
- Refactor de `sqlite_storage` (update, transacciones)
- Configuraci√≥n por `.env`
- Unificaci√≥n de estados (`Enum`)
- Actualizaci√≥n del whitepaper: ‚ÄúCore Engine v1‚Äù

---

### üß† Fase 2 ‚Äì IA B√°sica y Consultas
- Endpoint `/v1/assistant/consultar`
- Uso de modelo externo para responder con contexto
- Creaci√≥n de `core/racionalizador.py`
- Prompts funcionales en el prompt t√©cnico
- Nueva secci√≥n: ‚ÄúCapas de interacci√≥n con IA‚Äù

---

### üß© Fase 3 ‚Äì Integraci√≥n de M√≥dulos Tem√°ticos y Cuadernos

#### üìà Trading
- Endpoint `/v1/trading/resumen`
- Lectura de memorias ‚Äútrading‚Äù
- Enlace: Obsidian carpeta ‚ÄúTrading‚Äù, Recordatorios

#### üå± Cultivo
- Endpoint `/v1/cultivo/registro-datos`
- An√°lisis de VPD, EC, alertas
- Enlace: ‚Äú001_Flora‚Äù, ‚Äú002_Vege‚Äù

#### üíª Programaci√≥n
- Endpoint `/v1/code/consultar-snippet`
- Cuaderno digital: ‚ÄúProgramaci√≥n‚Äù

Todos los m√≥dulos escriben y consultan memorias comunes bajo categor√≠as y tags.

---

### üîê Fase 4 ‚Äì Seguridad y Despliegue
- JWT real y m√∫ltiples usuarios
- Dockerfile + `docker-compose`
- Endpoint de monitoreo b√°sico
- Telegram + Shortcuts como interfaz liviana

---

### üîÑ Fase 5 ‚Äì Sincronizaci√≥n con Cuadernos Digitales
- Carga autom√°tica desde notas Obsidian (por tags)
- Registro de Recordatorios diarios como memorias
- Mapa de relaciones con grafo (D3.js o Neo4j)
- Nueva secci√≥n: ‚ÄúMemoria extendida‚Äù en whitepaper

---

### üß© Notas Finales
- Toda evoluci√≥n queda registrada en el `CHANGELOG.md`
- Se prioriza siempre claridad conceptual antes que escalamiento t√©cnico

## üßæ Anexo Hist√≥rico ‚Äì Evoluci√≥n del Sistema

> Registro consolidado de avances funcionales y t√©cnicos por versi√≥n (v3.0.0 ‚Üí v3.0.2).

---

### üß± Versi√≥n 3.0.0 ‚Äì Fundacional (Base Estructural)

### ‚úÖ Objetivos principales:
- Consolidar toda la l√≥gica del sistema en dos archivos n√∫cleo:
  - `whitepaper_ALMA_LOADER_v3.0.0.md`
  - `prompt_technical_ALMA_LOADER_v3.0.0.md`
- Eliminar fragmentaci√≥n de versiones previas (2.1.1 y 2.2.0)
- Documentar prop√≥sito, m√≥dulos funcionales, arquitectura general y comandos.

### üîß Avances clave:
- Establecimiento de una arquitectura modular por secciones (por categor√≠as).
- Definici√≥n de convenciones de IDs, tags y esquemas base.
- Inicio del lenguaje sem√°ntico ALMA (enunciados, relaciones, auto-reflexi√≥n).
- Documentaci√≥n clara para humanos e IAs, adaptable a cualquier app.

---

#### üöÄ Versi√≥n 3.0.1 ‚Äì Profesionalizaci√≥n T√©cnica

### ‚úÖ Objetivos:
- Incluir elementos t√©cnicos reales que permitan operar y testear el sistema.
- Preparar el motor para trabajar con FAISS, SQLite y validaciones avanzadas.

### üõ†Ô∏è Implementaciones:
- Ejemplo real de test unitario para validaci√≥n de memorias.
- Agregado de tabla de tecnolog√≠as usadas (spaCy, sentence-transformers, FAISS, SQLite).
- Caso real de regla din√°mica en `reglas_dinamicas.json`.
- Documentaci√≥n de la coexistencia entre SQLite y FAISS (con `embedding_id`).
- Refuerzo de consistencia entre m√≥dulos en prompt y whitepaper.

---

#### üß† Versi√≥n 3.0.2 ‚Äì Escalabilidad y Preparaci√≥n para Integraci√≥n

### ‚úÖ Foco principal:
- Transformar ALMA_LOADER en un sistema escalable, integrable y colaborativo.

### üß© Avances clave:

#### üß† Prompt T√©cnico
- Implementaci√≥n del hook `on_memoria_guardada()` con patr√≥n limpio y extensible.
- Creaci√≥n de `HookManager` para ejecutar m√∫ltiples callbacks desacoplados.
- C√≥digo documentado para `BaseStorage` y `SQLiteStorage`.
- Secciones nuevas: onboarding paso a paso y gu√≠a para contribuyentes.
- Eliminaci√≥n de redundancias con el whitepaper.

#### üìò Whitepaper
- Secci√≥n 4.1: Dise√±o inicial de la API REST (con endpoints y ejemplo).
- Inclusi√≥n de ‚ÄúM√≥dulos Externos Integrables‚Äù como visi√≥n de expansi√≥n futura.
- Caso narrativo real con sugerencia din√°mica (#fatiga ‚Üí MEMHEALTH-022).
- Explicaci√≥n cruzada con el prompt t√©cnico para mantener coherencia total.

#### üìÅ Documentaci√≥n
- Unificaci√≥n del README y CHANGELOG con secciones enlazadas.
- Preparaci√≥n para generar docs web (estructura para `mkdocs` o `Sphinx`).

---

### üîö Resultado

> ALMA_LOADER hoy es un sistema **modular, documentado, integrable y escalable** que puede:
- Operar como backend sem√°ntico de cualquier app (cultivo, trading, bit√°coras).
- Ser entendido por humanos o IAs con solo 2 archivos centrales.
- Adaptarse a futuras versiones de forma incremental y trazable.
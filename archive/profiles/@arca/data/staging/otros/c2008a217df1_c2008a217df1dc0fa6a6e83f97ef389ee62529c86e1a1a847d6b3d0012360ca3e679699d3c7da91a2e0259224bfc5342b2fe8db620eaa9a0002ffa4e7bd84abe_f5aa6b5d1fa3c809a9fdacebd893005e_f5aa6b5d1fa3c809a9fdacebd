{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "RespuestaLLM",
  "description": "Contrato para salida del endpoint /responder ALMA_RESIST v0.2",
  "type": "object",
  "properties": {
    "id": {
      "type": "string",
      "description": "Identificador Ãºnico correlativo con el prompt original"
    },
    "respuesta": {
      "type": "string",
      "description": "Texto generado por el modelo LLM"
    },
    "agente": {
      "type": "string",
      "description": "Nombre del agente que responde (modelo o IA)"
    },
    "tags": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Etiquetas asociadas a la respuesta"
    },
    "memoria_ref": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "IDs de memorias institucionales referenciadas en la respuesta"
    },
    "hash": {
      "type": "string",
      "description": "Hash de integridad de la respuesta"
    },
    "metadata": {
      "type": "object",
      "properties": {
        "modelo": {
          "type": "string"
        },
        "longitud_prompt": {
          "type": "integer"
        },
        "timestamp": {
          "type": "number"
        },
        "estado": {
          "type": "string",
          "description": "Estado de la respuesta (success, error, warning, etc.)"
        }
      },
      "required": ["modelo", "longitud_prompt", "timestamp"]
    }
  },
  "required": ["respuesta", "metadata"],
  "additionalProperties": false
}

# CHANGELOG - ALMA_RESIST

## Versi√≥n 0.0.3 ‚Äì 2025-06-27

### üîÑ Cambios Generales

- Refactorizaci√≥n total del archivo `configuration.nix`:
  - Reorganizado en bloques tem√°ticos y modular.
  - Comentarios explicativos en cada secci√≥n.
  - Preparado para integraci√≥n con Flakes.

- Shell por defecto:
  - Cambiado de `bash` a `zsh` como shell principal para el usuario `alma` por mejoras en autocompletado y productividad.

- UUID eliminado en favor de mapeo cifrado:
  - Se corrigi√≥ la configuraci√≥n de `fileSystems."/"`
    - **ANTES:** `device = "/dev/disk/by-uuid/‚Ä¶"`
    - **AHORA:** `device = "/dev/mapper/alma_crypt"`
  - Garantiza boot correcto en sistemas cifrados con LUKS.

- Opciones de montaje:
  - Se a√±adieron opciones `compress=zstd` a Btrfs para mejor compresi√≥n y rendimiento.
  - Conservadas `fmask` y `dmask` en `/boot` para seguridad sobre archivos FAT.


### üîê Seguridad

- Activado `auditd` para auditor√≠a b√°sica del sistema.
- Configurado firewall (nftables):
  - Solo permitido puerto 22 (SSH).
  - Tailscale preparado pero sin habilitar a√∫n.
- Placeholder agregados para:
  - AppArmor o SELinux
  - Fail2ban
  - Yubikey integration
  - DNS over HTTPS/TLS
  - System auditing adicional


### üìÇ Estructura del Sistema

- Usuario principal `alma`:
  - home: `/alma`
  - shell: `zsh`
  - grupos: wheel, networkmanager
  - contrase√±a inicial: `umamia`


## ‚ö†Ô∏è Notas de Migraci√≥n

- Revisar y corregir UUID en configuraci√≥n si se mantiene cifrado.
- Ejecutar:
  ```bash
  sudo nixos-rebuild switch
  ```

despu√©s de aplicar cambios.

    Flakes a√∫n no activos en producci√≥n: dejar preparados experimental-features.
  

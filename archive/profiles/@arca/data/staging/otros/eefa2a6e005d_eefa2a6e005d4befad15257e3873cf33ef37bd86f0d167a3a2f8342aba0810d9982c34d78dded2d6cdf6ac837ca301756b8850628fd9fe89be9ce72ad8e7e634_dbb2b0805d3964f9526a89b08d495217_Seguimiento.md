

**Fecha última actualización:** 2025-04-30 07:53
# 🧠 PROYECTO ALMA – Seguimiento Técnico Modular

Este documento resume el progreso técnico del sistema ALMA, módulo por módulo. Cada sección corresponde a una **fase de implementación** y **subsistema específico**, con fechas, funcionalidades implementadas y próximos pasos.

Objetivo general: construir un sistema de memorias dinámicas IA ↔ humano, semántico, automatizable y navegable como grafo de conocimiento.

## 🤖 ¿Qué puede hacer una IA con este módulo?

- Leer todas las memorias del sistema y generar relaciones automáticas por similitud semántica.
- Detectar clusters temáticos o contradicciones internas (ej: riesgo alto ↔ salud).
- Exportar los datos como archivo unificado para entrenar modelos o visualizar en grafos.

## 📜 Progreso por Fase – Detallado

## ✅ FASE 1 – Validación Semántica

📅 Completada: 2025-04-30  
🔧 Implementaciones:

- `validador_custom.py` con lectura masiva de JSON y validación por categoría
    
- `reglas.py` modular con validadores TRD y HEALTH
    
- Logging de errores + mensajes en consola
    
- Preparado para GitHub Actions (exit 1 en caso de error)
    


#### 📂 Estructura Final Actual

bash

CopiarEditar

`alma_loader/ ├── memorias_json/          # 📦 Base principal de datos ├── memorias_md/            # 📄 Visualización para Obsidian ├── scripts_utilitarios/ │   └── json_to_md.py ├── validadores/ │   ├── validador_custom.py │   └── reglas.py ├── log_conversion.txt ├── log_validacion.txt`

```hash
**🧾 Archivos clave (ALMA_LOADER):**
- `validador_custom.py`
- `json_to_md.py`
- `reglas.py`
```

### 🧠 Propósito del Módulo

Detectar relaciones semánticas entre memorias ALMA a través de modelos de NLP, generando estructuras de conexión inteligente entre entradas personales.


### ⚙️ Flujo de trabajo

1. Carga de `.json` desde `dataset_test/`
    
2. Validación de campos mínimos (`id`, `contenido`)
    
3. Embeddings por lotes (batch size 32)
    
4. Cálculo de similitud con `cosine_similarity`
    
5. Filtro por score > 0.75
    
6. Visualización opcional como grafo
    
7. Logs escritos en `logs/`
    


### 📂 Estructura Final

bash

CopiarEditar

`alma_nlp/ ├── dataset_test/ ├── embeddings/              # (no utilizado aún) ├── logs/ │   ├── relaciones_sugeridas.json │   └── procesamiento.log ├── modelo/                  # (espacio reservado para modelo offline) ├── relacionador_nlp.py ├── seguimiento.md ├── prompt_base.md └── README.md`

### Versión 0.0.4 – 2025-05-01

- ✅ FASE 3 completada: relaciones semánticas entre memorias.
- Implementado `relacionador_nlp.py`:
  - Embeddings con modelo en español (`sentence-transformers`)
  - Análisis por similitud semántica entre contenidos
  - Log detallado de relaciones en `logs/relaciones_sugeridas.json`
- Generación de grafo de relaciones con NetworkX
  - Guardado como imagen (`grafo_relaciones.png`) en logs/
  - Score visible en cada conexión
- Dataset de prueba con 20 memorias multitemáticas creado para testing
- Flujo validado en entorno virtual con entorno aislado (`env_nlp`)
- Estructura modular lista para escalar a ChromaDB o Neo4j (Fase 4)



### 🧠 FASE 3 – Relaciones Semánticas entre Memorias

**📅 Fecha de cierre:** 2025-05-01  
**📂 Módulo:** `alma_nlp/`  
**Versión:** 0.0.4


### ✅ Implementaciones completadas

- `relacionador_nlp.py`:
  - Procesa archivos `.json` desde `dataset_test/`
  - Extrae `contenido` y genera embeddings con `sentence-transformers`
  - Calcula similitud coseno entre todas las memorias
  - Filtra relaciones con score > 0.75
  - Guarda el resultado en `logs/relaciones_sugeridas.json`
  - Visualiza opcionalmente un grafo con `networkx` + `matplotlib`

- Optimización del procesamiento:
  - Uso de `tqdm` para barras de progreso
  - Carga en lotes (batch de 32)
  - Límite de caracteres por memoria para eficiencia
  - Validación robusta y logs detallados de errores

- Visualización:
  - Grafo generado con etiquetas de score
  - Exportado como imagen en `logs/`

- Documentación:
  - README con estructura y propósito del módulo
  - Prompt base oficial (`prompt_base.md`)
  - Dataset sintético de 20 memorias para testeo


### 🧠 FASE 3 – Relaciones Semánticas entre Memorias

**📅 Fecha de cierre:** 2025-05-01  
**📂 Módulo:** `alma_nlp/`  
**Versión:** 0.0.4


### ✅ Implementaciones completadas

- `relacionador_nlp.py`:
  - Procesa archivos `.json` desde `dataset_test/`
  - Extrae `contenido` y genera embeddings con `sentence-transformers`
  - Calcula similitud coseno entre todas las memorias
  - Filtra relaciones con score > 0.75
  - Guarda el resultado en `logs/relaciones_sugeridas.json`
- Visualización del grafo:
  - Grafo generado con NetworkX y matplotlib
  - Etiquetas de score visibles en cada arista
  - Imagen generada como `grafo_relaciones.png`
- Dataset sintético de 20 memorias para testing
- Validación en entorno virtual aislado (`env_nlp`)
- Preparación para integración futura con Neo4j o ChromaDB


### 🔜 Próximos pasos (Fase 4)

- Poblar las relaciones en Neo4j como grafo semántico real
- Hacer trazabilidad cruzada entre memorias y contexto
- Detectar contradicciones, patrones o clusters con Cypher


### ✅ Implementaciones realizadas

- Script `cargar_grafo.py`:
  - Carga nodos de tipo Memoria, Tag, Chat
  - Crea relaciones `TIENE_TAG`, `USADO_EN`, `IMPACTA`
  - Usa transacciones atómicas con `neo4j-driver`
- Configuración inicial con `.env` para conexión segura
- Script `setup_neo4j.cql`:
  - Crea constraints de unicidad por ID
  - Índice por categoría de memoria
- Logging robusto y validación de campos requeridos
- README y documentación interna para consultas Cypher

## 🧠 FASE 5 – Sistema de Retroalimentación y Alerta Contextual  
📅 **Inicio:** 2025-05-02  
📂 **Módulo:** `alma_feedback/`  
📌 **Versión:** 0.0.6


### ✅ Implementado hasta ahora

- `reglas_alerta.py`: contiene funciones para analizar pares de memorias
- `config_alertas.json`: define qué reglas están activas
- `monitor_alertas.py`: escanea memorias, aplica reglas y genera `alertas.json`
- Conectado directamente a `alma_loader/memorias_json/`
- Logging robusto en `monitor_alertas.log`


🔧 Este sistema será la base para la futura Fase 6 de autodiagnóstico, reflexiones automatizadas y alertas adaptativas.


## 🎯 Objetivo del Módulo

Desarrollar un sistema de monitoreo semántico que pueda detectar correlaciones problemáticas, contradicciones o sinergias entre las distintas memorias del sistema ALMA, generando alertas interpretables por humanos y sistemas automatizados.


## 🔧 Estado Actual

| Componente              | Estado | Comentario |
|-------------------------|--------|------------|
| monitor_alertas.py      | ✅     | Validado con memorias reales |
| reglas_alerta.py        | ✅     | Reglas iniciales cargadas |
| visor_alertas.py        | ✅     | Visualización funcional y clara |
| alertas.json            | ✅     | Se genera correctamente |
| Exportación Markdown    | ✅     | Genera resumen automático |
| Configuración dinámica  | ✅     | Flexible vía `config_alertas.json` |


### 🎯 Objetivo de la Fase
Desarrollar un sistema robusto para **registrar y consolidar la retroalimentación derivada del sistema de alertas**, integrando los datos directamente en las memorias conflictivas.


# 📊 Seguimiento Técnico – FASE 5.3 – Consolidación Final

**📅 Fecha estimada:** 2025-05-01  
**📂 Módulo:** `alma_feedback/`  
**Versión esperada:** 0.0.7


### 🛠️ Pendientes

- Crear script `exportar_feedback_unificado.py`
- Agregar filtros por tipo de alerta y categoría
- Generar exportaciones en JSON y JSONL
- Documentar conexiones sugeridas entre feedbacks y próximas acciones



## 🧠 Notas Técnicas

- Las rutas son relativas a `alma_loader/`.
- Se recomienda mantener logs limpios y agregar reglas progresivamente.
- Compatible con Python 3.10+.



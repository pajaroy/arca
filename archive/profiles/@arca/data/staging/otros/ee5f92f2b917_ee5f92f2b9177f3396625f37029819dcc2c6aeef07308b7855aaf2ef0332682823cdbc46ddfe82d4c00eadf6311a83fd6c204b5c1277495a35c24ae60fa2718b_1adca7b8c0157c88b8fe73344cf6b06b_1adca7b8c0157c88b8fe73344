# ğŸ§  Prompt DeepSeek â€“ Script Universal de CorrecciÃ³n y EstandarizaciÃ³n de Metadata (fix_metadata v2) para ALMA_RESIST


## **Requisitos funcionales y de seguridad**

### 1. **Recorrido y exclusiÃ³n**
- El script debe buscar la raÃ­z del mÃ³dulo (por arriba) y procesar TODOS los archivos relevantes (.md, .yaml, .json, .py, .sh), pero:
- **Nunca debe modificar ni recorrer** (incluir lista de exclusiÃ³n obligada):
    - `.git`, `.github`, `.obsidian`, `.sync*`, `venv`, `env`, `virtualenv`, `__pycache__`, `node_modules`, `datasets`, `data`, `media`, `images`, `img`, `bin`, `backup`, `backups`, `logs` (salvo logs propios `.md`, `.yaml`), `tmp`, `temp`, `core/scripts/fix_metadata/` (para no auto-editarse), cualquier directorio oculto (`.`), o especificado en `.fix_metadata_ignore`.
- **No modificar archivos binarios ni temporales**: (extensiones excluidas: `.jpg`, `.png`, `.zip`, `.db`, `.mp4`, `.exe`, `.tmp`, `.bak`, `.lock`, `.sync-conflict-*`).
- Solo procesar extensiones soportadas: `.md`, `.yaml`, `.yml`, `.json`, `.py`, `.sh`.

### 2. **ExclusiÃ³n ampliable**
- Permitir que el usuario agregue exclusiones especÃ­ficas con un archivo `.fix_metadata_ignore` (sintaxis tipo `.gitignore`).

### 3. **Flujo seguro**
- **Nunca debe auto-modificarse** ni modificar el propio script/carpeta.
- Debe siempre crear **backup previo** a modificar cualquier archivo.
- **Modo dry-run**: simular cambios sin modificar archivos.
- **Logs estructurados** por acciÃ³n: cambios, errores, archivos saltados, backups.
- **No debe borrar ni truncar archivos aunque detecte metadata invÃ¡lida**: siempre loguear, nunca borrar.

### 4. **Metadata universal a aplicar**
El bloque YAML debe tener, como mÃ­nimo, los siguientes campos (con comentarios y validaciones):

```yaml
```
5. CaracterÃ­sticas del script

    Recorrer en profundidad solo las carpetas relevantes (ver exclusiones arriba).

    Verificar y corregir el bloque YAML, completando campos faltantes (con valores razonables por defecto/documentados).

    Calcular y actualizar hash_integridad SHA256 del contenido excluyendo este campo.

    Logs de cambios, backups realizados, errores detectados.

    Reporte resumen al finalizar.

    FÃ¡cilmente replicable: al copiar a cualquier mÃ³dulo, funciona sin cambios salvo rutas.

    ParÃ¡metro de carpeta raÃ­z opcional, autodetecciÃ³n de entorno ALMA_RESIST.

    Dejar configuraciones claras y comentarios para personalizaciÃ³n.

    Modular, con funciones separadas y comentarios abundantes.

6. PrÃ¡cticas pro

    El script nunca debe dejar archivos corruptos ni en estado incompleto (rollback automÃ¡tico si hay error en escritura).

    Soporte para ampliar lista de exclusiÃ³n por parÃ¡metro CLI.

    El log puede ser en .jsonl o .yaml para facilitar parsing IA/auditorÃ­a.

    Resumen final: archivos procesados, modificados, saltados, errores, backups hechos, dry-run vs real.

Extras

    Programar en Python 3, preferentemente solo usando dependencias estÃ¡ndar (salvo PyYAML).

    Dejar toda la lÃ³gica en un solo archivo principal.

    Dejar la referencia a este prompt/IDEA en el header del script generado.

    El script debe estar listo para ejecutarse desde cualquier carpeta core/scripts/fix_metadata/.

Referencia oficial:
[IDEA_2025-06-06_01] â€“ ALMA_RESIST | Santiago Calvo | Centralesis v2.3
Instrucciones finales

    CumplÃ­ TODOS los criterios arriba detallados.

    Si no podÃ©s hacer algo exactamente igual, aclaralo en comentarios y dejÃ¡ el punto listo para ajustar manualmente.

    El script debe ser â€œproduction readyâ€ para ser usado y adaptado en cualquier otro mÃ³dulo del sistema ALMA_RESIST.
    ---

## ğŸŸ¢ **Archivo descargable**

[Descargar prompt_fix_metadata_v2.md](sandbox:/mnt/data/prompt_fix_metadata_v2.md)

> **PodÃ©s copiar el contenido directamente o usar el archivo para cargarlo en DeepSeek o cualquier plataforma de generaciÃ³n IA!**

Â¿Te gustarÃ­a agregar alguna advertencia, nota personal, o link de referencia extra?  
Â¿O lo dejamos asÃ­, listo para darle play en DeepSeek?


Con esto, el script generado serÃ¡ mucho mÃ¡s â€œhumano-friendlyâ€ y auditable,  
y DeepSeek sabrÃ¡ que debe priorizar la comunicaciÃ³n clara del estado final del proceso.
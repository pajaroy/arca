# üß† Prompt Maestro v3 ‚Äî Cargador Institucional de Memorias (ALMA_RESIST)

**Fecha:** 2025-06-08  
**Versi√≥n:** v3  
**Responsables:** Santi (humano), Kael (auditor CLI), DeepSeek  
**M√≥dulo:** /home/bird/alma_resist/control_central/memorias/  
**Estado:** CONSOLIDACI√ìN INSTITUCIONAL


## ‚öôÔ∏è Requerimientos avanzados

### 1. Consolidaci√≥n, no borrado
- Cargar todos los registros a memoria institucional y bit√°cora viva, **aunque haya redundancia temporal**.
- No sobrescribir ni borrar registros por defecto.
- Cada registro debe incluir:
  - hash/checksum (SHA-256)
  - fuente (cli, ia, api)
  - autor/responsable
  - fecha_hora y version_script

### 2. Estructura flexible y auditable
- Soporte para m√∫ltiples formatos: YAML, JSON, lote/batch.
- Campos requeridos validados por schema externo versionado (`/schemas/memoria_schema.json`).
- Permitir ‚Äúcampos extendidos‚Äù para upgrades, migraciones o info adicional (via `x-extensible: true`).

### 3. Multibackend y resiliencia
- Plugins para filesystem, Redis, SQLite y soporte futuro a cluster.
- Lockfiles y atomicidad garantizada.
- Backup autom√°tico antes de cada operaci√≥n masiva.

### 4. CLI extendido y modular
- Flags: `--consolidate`, `--no-dedupe`, `--schema-version`, `--log-level`, `--rollback`, `--export`
- Subcomandos: `validate`, `audit`, `convert`, `migrate`, `template`, `plugin`
- Auditor√≠a de seguridad (`audit --full`)
- Generaci√≥n y edici√≥n de registros por plantilla (`template generate`)

### 5. Logs, changelogs y hooks CI/CD
- Cada inserci√≥n, edici√≥n, migraci√≥n deja log estructurado y evento en changelog.
- Soporte de webhooks para integraci√≥n con sistemas externos (ej: CI, backup remoto, alertas).
- Auditor√≠a autom√°tica de integridad (hashes, firmas, SELinux/ACL).

### 6. Preparaci√≥n IA-friendly
- Todos los datos deben ser f√°cilmente indexables (archivos √≠ndice, DB, vector store).
- Embeddings y campos de resumen para uso de LLM.
- Exportaci√≥n selectiva (por tags, tipo, rango temporal, responsable, etc.)


## üìÅ Rutas y referencias cr√≠ticas

- `/home/bird/alma_resist/control_central/memorias/`
- `/schemas/memoria_schema.json`
- `/locales/`
- `/changelogs/`
- `/README.md`


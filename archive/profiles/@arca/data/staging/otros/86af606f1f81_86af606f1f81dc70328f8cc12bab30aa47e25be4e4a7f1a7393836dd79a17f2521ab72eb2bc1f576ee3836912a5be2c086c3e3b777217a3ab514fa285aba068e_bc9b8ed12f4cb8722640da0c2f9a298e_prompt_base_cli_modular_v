---
module: prompts/prompt_base_cli_modular_v2
type: core
status: in_progress
created: '2025-05-20'
linked_to:
- metodologia_doc_ia_v2.md

---
# ğŸ§  Prompt TÃ©cnico â€“ CLI Modular ALMA_RESIST (v2, sin cmd.Cmd)

---

## ğŸ¯ Objetivo

DiseÃ±ar un archivo `core/cli.py` funcional y escalable para el sistema ALMA_RESIST.  
Esta CLI serÃ¡ el **nÃºcleo interactivo del sistema**, operando desde terminal como un shell personalizado, sin depender de `cmd.Cmd`.

---

## âš™ï¸ Requisitos funcionales

- Al ejecutar `python core/cli.py`, debe iniciarse un prompt tipo:
  ```
  alma>
  ```
- El usuario puede ingresar comandos como:
  - `!ayuda`
  - `!salir`
  - `!resumir "texto"`
  - `!buscar_memoria "tag"`
- Cada comando se define como una funciÃ³n externa en un archivo separado dentro de `commands/`.

---

## ğŸ“ Estructura esperada

```
ALMA_RESIST/
â”œâ”€â”€ core/
â”‚   â””â”€â”€ cli.py
â”œâ”€â”€ commands/
â”‚   â”œâ”€â”€ ayuda.py           â†’ def run(args: str): ...
â”‚   â”œâ”€â”€ salir.py
â”‚   â”œâ”€â”€ resumir.py
â”‚   â””â”€â”€ buscar_memoria.py
```

---

## ğŸ”§ Requisitos tÃ©cnicos

- `core/cli.py` debe actuar como un **router** de comandos:
  - Lee entrada del usuario (`input`)
  - Separa comando (`!comando`) de argumentos
  - Busca en un diccionario cargado dinÃ¡micamente desde `commands/`
  - Ejecuta la funciÃ³n `run(args)` correspondiente
- Si el comando no existe, debe mostrar un mensaje de error.
- Debe incluir comando `!ayuda` que imprima los comandos disponibles (basado en las claves del router).

---

## ğŸ§ª Testeo bÃ¡sico

Debe poderse testear llamando directamente a funciones de comandos con argumentos simulados.

---

## ğŸ” Restricciones

- **No usar `cmd.Cmd`, argparse, click ni frameworks externos.**
- Todo debe funcionar con funciones planas (`def run(args):`)
- El sistema debe ser extensible: para agregar un comando, basta con crear un archivo `.py` con funciÃ³n `run(args)`.

---

## âœ… Resultado esperado

Un CLI funcional con esta interacciÃ³n:

```bash
$ python core/cli.py
alma> !ayuda
Comandos disponibles:
  !ayuda
  !salir
  !resumir
  !buscar_memoria

alma> !resumir "este es un texto largo"
Resumiendo: este es un texto largo... (simulado)

alma> !salir
Hasta luego.
```

---

## ğŸ§  En resumen

Implementar un CLI minimalista, sÃ³lido y extensible para ALMA_RESIST, basado en arquitectura modular y sin dependencias mÃ¡gicas. Este CLI debe estar listo para integrarse a IA local, logs y memoria a futuro.

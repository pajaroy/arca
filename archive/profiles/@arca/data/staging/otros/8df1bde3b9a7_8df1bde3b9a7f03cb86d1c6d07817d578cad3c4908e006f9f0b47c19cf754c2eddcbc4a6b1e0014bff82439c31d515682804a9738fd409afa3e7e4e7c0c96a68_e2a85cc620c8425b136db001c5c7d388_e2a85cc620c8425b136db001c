### 2. **ExclusiÃ³n ampliable**
- Permitir que el usuario agregue exclusiones especÃ­ficas con un archivo `.fix_metadata_ignore` (sintaxis tipo `.gitignore`).

### 3. **Flujo seguro**
- **Nunca debe auto-modificarse** ni modificar el propio script/carpeta.
- Debe siempre crear **backup previo** a modificar cualquier archivo.
- **Modo dry-run**: simular cambios sin modificar archivos.
- **Logs estructurados** por acciÃ³n: cambios, errores, archivos saltados, backups.
- **No debe borrar ni truncar archivos aunque detecte metadata invÃ¡lida**: siempre loguear, nunca borrar.

### 4. **Metadata universal a aplicar**
El bloque YAML debe tener, como mÃ­nimo, los siguientes campos (con comentarios y validaciones):

```yaml
```
5. CaracterÃ­sticas del script

    Recorrer en profundidad solo las carpetas relevantes (ver exclusiones arriba).

    Verificar y corregir el bloque YAML, completando campos faltantes (con valores razonables por defecto/documentados).

    Calcular y actualizar hash_integridad SHA256 del contenido excluyendo este campo.

    Logs de cambios, backups realizados, errores detectados.

    Reporte resumen al finalizar.

    FÃ¡cilmente replicable: al copiar a cualquier mÃ³dulo, funciona sin cambios salvo rutas.

    ParÃ¡metro de carpeta raÃ­z opcional, autodetecciÃ³n de entorno ALMA_RESIST.

    Dejar configuraciones claras y comentarios para personalizaciÃ³n.

    Modular, con funciones separadas y comentarios abundantes.

6. PrÃ¡cticas pro

    El script nunca debe dejar archivos corruptos ni en estado incompleto (rollback automÃ¡tico si hay error en escritura).

    Soporte para ampliar lista de exclusiÃ³n por parÃ¡metro CLI.

    El log puede ser en .jsonl o .yaml para facilitar parsing IA/auditorÃ­a.

    Resumen final: archivos procesados, modificados, saltados, errores, backups hechos, dry-run vs real.

Extras

    Programar en Python 3, preferentemente solo usando dependencias estÃ¡ndar (salvo PyYAML).

    Dejar toda la lÃ³gica en un solo archivo principal.

    Dejar la referencia a este prompt/IDEA en el header del script generado.

    El script debe estar listo para ejecutarse desde cualquier carpeta core/scripts/fix_metadata/.

Referencia oficial:
[IDEA_2025-06-06_01] â€“ ALMA_RESIST | Santiago Calvo | Centralesis v2.3
Instrucciones finales

    CumplÃ­ TODOS los criterios arriba detallados.

    Si no podÃ©s hacer algo exactamente igual, aclaralo en comentarios y dejÃ¡ el punto listo para ajustar manualmente.

    El script debe ser â€œproduction readyâ€ para ser usado y adaptado en cualquier otro mÃ³dulo del sistema ALMA_RESIST.
    ---

## ğŸŸ¢ **Archivo descargable**

[Descargar prompt_fix_metadata_v2.md](sandbox:/mnt/data/prompt_fix_metadata_v2.md)

> **PodÃ©s copiar el contenido directamente o usar el archivo para cargarlo en DeepSeek o cualquier plataforma de generaciÃ³n IA!**

Â¿Te gustarÃ­a agregar alguna advertencia, nota personal, o link de referencia extra?  
Â¿O lo dejamos asÃ­, listo para darle play en DeepSeek?


Con esto, el script generado serÃ¡ mucho mÃ¡s â€œhumano-friendlyâ€ y auditable,  
y DeepSeek sabrÃ¡ que debe priorizar la comunicaciÃ³n clara del estado final del proceso.


## Objetivo:

Desarrollar un script profesional y auditable, mejorando la versiÃ³n anterior, que recorra en profundidad cada mÃ³dulo ALMA_RESIST y estandarice los bloques de metadata YAML en archivos crÃ­ticos, **dejando registro en logs de TODO archivo procesado, saltado, modificado o con error**. Incluir las siguientes mejoras:


### **Checklist funcional mÃ­nimo:**

- Recorrer recursivamente desde la raÃ­z de mÃ³dulo hacia abajo.
- Solo procesar extensiones soportadas (`.md`, `.yaml`, `.yml`, `.json`, `.py`, `.sh`).
- Nunca tocar archivos binarios, temporales, logs ni archivos propios del script.
- Loguear todas las acciones, incluyendo archivos saltados.
- Backup antes de modificar.
- Colorizar y mostrar notificaciones claras al usuario: âœ”ï¸ Ã©xito, âš ï¸ advertencia, âŒ error.
- Resumir rutas de backups y acciones al final del proceso.
- CÃ³digo limpio, documentado y modular, fÃ¡cil de adaptar.


**Instrucciones finales:**  
- ImplementÃ¡ cada mejora con comentarios claros.
- Si alguna mejora no puede hacerse exactamente igual, aclaralo en el cÃ³digo.
- El script debe ser fÃ¡cilmente portable a cualquier otro mÃ³dulo, solo ajustando rutas si hace falta.


Ejemplo de log para archivo modificado:

```json
{
  "file": "core/notebooks/2025-06-05_memorias_base_generales.md",
  "timestamp": "2025-06-11T11:22:34",
  "action": "updated",
  "changes": {...},
  "backup": "core/notebooks/2025-06-05_memorias_base_generales_20250611T112234.bak",
  "prompt_ref": "IDEA_2025-06-06_01"
}
```


    Este prompt debe dejar el script listo para usarse en producciÃ³n y como referencia para todos los mÃ³dulos futuros del sistema ALMA_RESIST.

## Archivo: 2025-06-04_bitacora_limpieza_inicial.md
Contenido:
# 2025-06-04_bitacora_limpieza_inicial.md

## AcciÃ³n: Limpieza y consolidaciÃ³n inicial de `asesor-ia`
### Ejecutor: Kael (supervisiÃ³n Santi)
### Objetivo: Dejar estructura limpia y modular, siguiendo convenciÃ³n ALMA_RESIST

#### Cambios:
- Movidos archivos legacy y temporales de `archivo/downloads/` a `archivo/downloads/historico/`.
- Actualizado `README.md` en cada subcarpeta para explicar su propÃ³sito.
- Archivos sueltos (`comandos.md`, etc.) reubicados o archivados.
- Renombrados todos los `readme.md` â†’ `README.md` para estandarizar.
- Documentado todo el proceso en esta bitÃ¡cora.

#### Checklist:
- [x] `archivo/downloads/` limpio y con histÃ³rico
- [x] Sin archivos huÃ©rfanos en la raÃ­z
- [x] Naming consistente en `README.md`
- [x] BitÃ¡cora creada y referenciada en README principal de `kael/bitacoras/`

## ApÃ©ndice â€“ Registro de copia de template de agente IA

**Fecha:** 2024-06-04  
**Responsable:** Santi  
**AcciÃ³n:** Copia local de plantilla base de agente IA para ediciÃ³n


**Motivo:**

> Mantener una versiÃ³n editable y especÃ­fica del template base, sin alterar el original, permitiendo ajustes progresivos y trazabilidad durante el desarrollo del agente Centralisis.


**Detalle de la acciÃ³n:**

- El archivo `template_agente_ia_base_v2.md` fue movido desde `/asesor-ia/archivo/downloads/` a `/asesor-ia/templates/`.
    
- Objetivo: centralizar y facilitar el acceso a plantillas de agentes en la carpeta estÃ¡ndar de templates.
    

**Motivo:**

> Mejorar la organizaciÃ³n y el acceso a plantillas clave, evitando duplicidad y desorden en la carpeta de descargas.

**Comando ejecutado:**

```bash
mv archivo/downloads/template_agente_ia_base_v2.md templates/
```


**Detalle de la acciÃ³n:**

- El archivo `encabezado_base_centralisis.md` fue movido de `/control_central/archivo/downloads/` a `/control_central/asesor-ia/archivo/downloads/`.
    
- Objetivo: concentrar todos los archivos de templates, encabezados y recursos propios de agentes IA dentro de la carpeta correspondiente a asesor-ia.
    

**Motivo:**

> Unificar la documentaciÃ³n y recursos clave de agentes IA en el espacio central de trabajo, evitando dispersiÃ³n y facilitando el acceso.

**Comando ejecutado:**
```bash
mv /home/bird/ALMA_RESIST/control_central/archivo/downloads/encabezado_base_centralisis.md /home/bird/ALMA_RESIST/control_central/asesor-ia/archivo/downloads/
```



Notas:

    Todo movimiento de archivos clave es registrado para asegurar trazabilidad y rÃ¡pida localizaciÃ³n.

    Si el archivo sufre cambios futuros, se documentarÃ¡ en la bitÃ¡cora correspondiente.


**Detalle de la acciÃ³n:**

- El archivo `ALMA_RESIST_agentes_idea_base.md` fue movido desde `/asesor-ia/archivo/downloads/` a `/asesor-ia/templates/`.
    
- **Objetivo:** Centralizar la â€œidea baseâ€ en la carpeta de templates, garantizando acceso inmediato para la creaciÃ³n, revisiÃ³n y despliegue de todos los agentes IA.
    
- Se agregÃ³ referencia al archivo en el `README.md` de la carpeta `templates/`, explicitando su carÃ¡cter de documento clave y lectura obligatoria.
    

**Motivo:**

> Mantener el principio rector de los agentes IA siempre a la vista, ordenado y fuera de rutas de archivos transitorios o secundarios.

**Comando ejecutado:**
```bash
mv archivo/downloads/ALMA_RESIST_agentes_idea_base.md templates/
```

## ApÃ©ndice â€“ EliminaciÃ³n de archivos innecesarios en la raÃ­z

**Fecha:** 2024-06-04  
**Responsable:** Santi  
**AcciÃ³n:** EliminaciÃ³n de archivos ajenos al control de versiones y operatividad del entorno



## Resumen Ejecutivo

El dÃ­a 2025-06-04 se ejecutÃ³ un proceso completo de auditorÃ­a, rescate y consolidaciÃ³n del sistema ALMA_RESIST. Se realizÃ³:

- DiagnÃ³stico y confirmaciÃ³n de corrupciÃ³n del repositorio git.
- GeneraciÃ³n y verificaciÃ³n de backup fÃ­sico completo en pendrive dedicado (`BKPFISICO`).
- Formateo profesional y validaciÃ³n de almacenamiento externo.
- Flujo de recuperaciÃ³n con clonaciÃ³n limpia desde el remoto.
- Merge manual de cambios desde los backups locales al nuevo repo.
- SincronizaciÃ³n final con push al remoto y documentaciÃ³n del proceso.
- Relinkeo y restauraciÃ³n de la carpeta en Syncthing y ajuste de Obsidian para continuidad de trabajo.
- VerificaciÃ³n de integridad, limpieza y consolidaciÃ³n de los entornos.

## Archivo: 2025-06-04_bitacora_restauracion_alma_resist.md
Contenido:
# BitÃ¡cora â€“ 2025-06-04 â€“ Rescate, Backup FÃ­sico y RestauraciÃ³n de ALMA_RESIST


## Detalle de pasos ejecutados

1. **DetecciÃ³n y diagnÃ³stico de corrupciÃ³n git**
    
    - IdentificaciÃ³n de errores fatales (`.git/objects/... estÃ¡ vacÃ­o/corrupto`) imposibilitando cualquier push/commit.
        
2. **Backup fÃ­sico**
    
    - SelecciÃ³n y formateo seguro de pendrive (`/dev/sdd1`, label: `BKPFISICO`) como almacenamiento de respaldo.
        
    - Montaje manual con permisos de usuario para garantizar escritura sin root.
        
    - GeneraciÃ³n de snapshot total del sistema con:
        
        ```bash
        zip -r /media/bird/BKPFISICO/ALMA_RESIST_2025-06-04_sistema_completo.zip .
        ```
        
3. **ClonaciÃ³n y recuperaciÃ³n del repo**
    
    - ClonaciÃ³n limpia usando SSH:
        
        ```bash
        git clone git@github.com:pajaroy/ALMA_RESIST.git ALMA_RESIST_NEW
        ```
        
    - Renombrado de la carpeta corrupta y repositorio nuevo para restaurar la estructura original.
        
    - Copia selectiva de archivos y cambios desde el backup manual:
        
        ```bash
        cp -ru /home/bird/ALMA_RESIST_BACKUP_2025-06-04/* /home/bird/ALMA_RESIST/
        ```
        
    - Commit y push final consolidando todos los cambios restaurados.
        
4. **Re-sincronizaciÃ³n con Syncthing y ajuste de Obsidian**
    
    - RemociÃ³n segura de la carpeta en Syncthing sin pÃ©rdida de datos.
        
    - Re-linkeo de la ruta actualizada como carpeta principal y forzado de escaneo/sync.
        
    - ConfiguraciÃ³n de Obsidian para abrir la ruta de vault correcta.
        
5. **Notas y recomendaciones**
    
    - Evitar siempre manipular `.git` a mano, sincronizaciones en caliente sobre `.git`, o cortes durante operaciones crÃ­ticas.
        
    - Usar siempre backup fÃ­sico y redundante antes de cualquier operaciÃ³n masiva.
        
    - Documentar toda intervenciÃ³n relevante para trazabilidad y recuperaciÃ³n futura.

## 2025-06-05 â€“ DuplicaciÃ³n de centralesis.md para reformas

Se duplicÃ³ el archivo centralesis.md desde /archivo/downloads/ hacia /centralisis/contexto/ con el fin de realizar reformas independientes, manteniendo la versiÃ³n original en su ubicaciÃ³n previa para trazabilidad y control de cambios.

Este archivo funcionarÃ¡ como base de trabajo para las modificaciones estructurales de centralesis.

## 2025-06-05 â€“ Movida Ã­ntegra de contexto a docs/contexto

Se moviÃ³ la carpeta `contexto` Ã­ntegra a `docs/contexto` en el mÃ³dulo `centralesis`,  
resguardando la versiÃ³n previa de `docs/contexto` como backup (`docs/contexto_backup_2025-06-05`) para evitar sobrescrituras o pÃ©rdidas accidentales.

**Motivo:**  
Reordenar la documentaciÃ³n y mantener integridad de archivos, asegurando que nada se pierda en el proceso.

Se recomienda revisar ambas carpetas para depurar redundancias cuando corresponda.

# 2025-06-06_movimiento_reestructuracion.md

## AcciÃ³n:
Copia del archivo `docs/contexto/centralesis.md` a `core/notebooks/2025-06-06_reestructuracion_centralesis.md`  
Motivo: Trabajar en la reestructuraciÃ³n y desarrollo de contenido sin alterar el original.

## Detalles:
- Archivo fuente: `/docs/contexto/centralesis.md`
- Destino: `/core/notebooks/2025-06-06_reestructuracion_centralesis.md`
- Formato de nombre: `[fecha]_reestructuracion_centralesis.md`
- Criterio: Mantener la trazabilidad y versionado limpio durante el proceso de reestructuraciÃ³n.

## Estado:
Copia realizada y registrada en bitÃ¡cora.

----



## ğŸ§  FundaciÃ³n y metodologÃ­a

- Este documento es la **memoria fundacional** del sistema de Agentes IA de ALMA_RESIST.
- El objetivo es mantener **memoria viva, bitÃ¡cora operativa y changelog** integrados, con referencias externas cuando el volumen lo requiera.
- La filosofÃ­a es **modular, auditable, incremental** y orientada a la mejora continua:  
  cada Agente tiene su propio header, bloques YAML y referencias, pero sigue el mismo esquema de arquitectura.
- **Todo cambio o decisiÃ³n estructural debe registrarse aquÃ­** antes de ser externalizado a los archivos automÃ¡ticos (`.yaml`) de automatizaciÃ³n.


## ğŸš€ MetodologÃ­a incremental

- Cada Agente IA o mÃ³dulo institucional inicia con este esquema.
- Todo flujo de trabajo y crecimiento se trackea por commits y registros en bitÃ¡cora.
- La exportaciÃ³n automÃ¡tica a YAML es el output operativo, nunca la fuente primaria de decisiones.

# Agentes IA â€“ Notas de estilo

- _â€œAgenteâ€_ implica autonomÃ­a, especializaciÃ³n y responsabilidad dentro del sistema.
    
- Cada Agente es un nodo crÃ­tico, no un asistente subordinado.
    
- La gobernanza del ecosistema surge de la interacciÃ³n de Agentes, humanos y reglas auditablemente consensuadas.
    

## Archivo: template_agente_ia_base_v2.md
Contenido:
# ğŸ§  Prompt de Identidad â€“ Agente IA (ALMA_RESIST)

> DefinÃ­ aquÃ­ el propÃ³sito, lÃ­mites, reglas, visiÃ³n y misiÃ³n del Agente.
> Ejemplo: â€œEste Agente opera como [rol], nunca ejecuta tareas fuera de [alcance]...â€


## ğŸ“š Ãndice

1. Prompt de Identidad
2. PresentaciÃ³n del Agente
3. Glosario
4. Rangos y JerarquÃ­a
5. Memorias Institucionales (YAML)
6. BitÃ¡coras Operativas (YAML)
7. Changelog Estructural (YAML)
8. ApÃ©ndice de Agentes/MÃ³dulos Activos
9. Protocolos de RevisiÃ³n y Mejora Continua
10. Firmas y Validaciones
11. Links y Referencias
12. Historial de Modificaciones
13. Permisos y Roles
14. Ejemplos de Registros


## ğŸ… Rangos y JerarquÃ­a de Agentes

- Auditor General: mÃ¡xima autoridad, supervisiÃ³n global
- Agente Operativo: ejecuta tareas y reporta a Auditor
- Agente Analista: anÃ¡lisis, diagnÃ³stico, recomendaciones
- (DefinÃ­ rangos y funciones segÃºn tus necesidades)


## ğŸ“ BitÃ¡coras Operativas (YAML)

```yaml
bitacoras:
  estÃ¡ndar_resultado: "[Ã©xito | error | cÃ³digo]"  # EstÃ¡ndar normalizado
  registros:
    - fecha: 2025-06-10
      comando: "yq eval ..."
      ejecutor: alma_loader
      resultado: "Ã©xito"
      hash_verificacion: sha256:9f86d081...
    - fecha: 2025-06-10
      comando: "script_backup.sh"
      ejecutor: kael
      resultado: "error"
      hash_verificacion: sha256:3b1fc8e4...
```

_Ãšltimos 30 dÃ­as o entradas relevantes._


## ğŸ§© ApÃ©ndice de Agentes/MÃ³dulos Activos

|Nombre|Rol|Status|Fecha de Alta|Referencia|ultima_verificacion|
|---|---|---|---|---|---|
|Centralesis|Auditor General|Activo|YYYY-MM-DD|[Ver ficha]|YYYY-MM-DD|
|Kael|Agente CLI|Activo|YYYY-MM-DD|[Ver ficha]|YYYY-MM-DD|
|Emma|Agente Empresarial|Activo|YYYY-MM-DD|[Ver ficha]|YYYY-MM-DD|
|...|...|...|...|...|...|


## ğŸ” Firmas y Validaciones

- SHA-256 del archivo o bloque (en cada secciÃ³n)
    
- Firma digital/autorizaciÃ³n de cambios crÃ­ticos (opcional)
    


## ğŸ“œ Historial de Modificaciones

|Fecha|Autor|AcciÃ³n|Detalles / Hash|
|---|---|---|---|
|YYYY-MM-DD|Kael|CreaciÃ³n|sha256:xxxx...|
|YYYY-MM-DD|Centralesis|ModificaciÃ³n|sha256:yyyy...|


## ğŸ§© Ejemplos de Registros

- **Memoria crÃ­tica:**  
    `MEM_2025-06-10_01` â€“ decisiÃ³n fundacional: arquitectura modular validada.
    
- **Memoria de error/alerta:**  
    `MEM_2025-06-10_02` â€“ alerta_omision: falta de revisiÃ³n semanal en Emma.
    
- **BitÃ¡cora:**  
    `2025-06-10` â€“ Ejecutado script de sincronizaciÃ³n yq, Ã©xito.  
    `2025-06-10` â€“ Ejecutado script_backup.sh, error.
    
- **Changelog:**  
    `v1.2` â€“ Implementada separaciÃ³n .md/.yaml y sistema de firmas.
    


_Template validado y corregido para Agentes IA institucionales de ALMA_RESIST â€“ 2025-06-10. No edites los bloques YAML sin validaciÃ³n previa._

## Archivo: sprint_actual.sync-conflict-20250604-050446-EHTW5G7.md
Contenido:

# ğŸš€ Sprint Actual 0.2 â€“ SincronizaciÃ³n Total Inteligente

Este sprint tiene como objetivo lograr una **sincronizaciÃ³n total e inteligente** entre los dos nodos principales (`ALMA_CORE` y `ALMA_RESIST`), los sistemas externos (GitHub, Obsidian), y garantizar backups automÃ¡ticos diarios. Es la base para una operaciÃ³n continua, profesional y resiliente.


## âœ… Checklist de ImplementaciÃ³n

### ğŸ—‚ï¸ SincronizaciÃ³n entre nodos con Syncthing

- [x] Instalar y validar Syncthing en ALMA_CORE y ALMA_RESIST
- [x] Configurar carpetas sincronizadas: `ALMA_RESIST/`, `obsidian_vault/`
- [x] Crear y aplicar plantilla `.stignore` personalizada
- [x] Verificar que no haya duplicaciones ni conflictos

### ğŸŒ SincronizaciÃ³n con GitHub

- [x] Crear `backup_to_git.sh` para commit automÃ¡tico diario
- [ ] Agendar con `cron` o `systemd.timer`
- [x] Validar commits manuales sÃ³lo desde ALMA_CORE
- [x] Registrar actividad en `logs/backup_git.log`

### ğŸ§  Obsidian Vault (versiÃ³n Pro)

- [x] Validar integraciÃ³n del vault en `ALMA_RESIST/obsidian_vault/`
- [x] Verificar escritura sin conflictos desde VS Code
- [ ] Documentar estructura interna del vault (`README.md`, `index.md`)

### ğŸ’» Entorno de ediciÃ³n y control

- [x] Configurar VS Code como editor principal
- [x] Validar extensiones necesarias para Markdown y Git

### ğŸ“Š Monitoreo y Logs

- [x] Crear `sync_status.sh` que loguee estado de carpetas y conexiÃ³n
- [x] Agregar `alma_status.sh` que muestre estado general de sincronizaciÃ³n
- [x] Crear carpeta `logs/` si no existe

### ğŸ“˜ DocumentaciÃ³n en `docs/sync/`

- [ ] Crear manual de instalaciÃ³n de sincronizaciÃ³n
- [ ] Especificar rutas, flujos, scripts y comandos
- [ ] Documentar fallas comunes y soluciÃ³n


## ğŸ§© Notas Finales

- Se validarÃ¡ como cerrado cuando todos los puntos estÃ©n resueltos y validados en ambos nodos.
- Las bitÃ¡coras de instalaciÃ³n se guardan en `docs/journal/bitacoras/`.


Este cierre marca oficialmente la conclusiÃ³n del Sprint 0.1 de diagnÃ³stico y nos habilita a trabajar con bases limpias en los prÃ³ximos sprints estructurales y tÃ©cnicos del sistema.

## Archivo: bitacora_instalacion_alma_resist.md
Contenido:

# ğŸ› ï¸ BitÃ¡cora de InstalaciÃ³n desde 0 â€“ ALMA_RESIST

DocumentaciÃ³n base de instalaciÃ³n, configuraciÃ³n y sincronizaciÃ³n inicial entre nodos `ALMA_CORE` y `ALMA_RESIST`. Este documento actÃºa como **bitÃ¡cora fundacional**, indispensable para reproducir el entorno y garantizar la continuidad del sistema.


## ğŸ–±ï¸ 2. SincronizaciÃ³n de mouse entre PCs con Input Leap

InstalaciÃ³n y compilaciÃ³n manual desde repositorio oficial para compatibilidad con sistemas Parrot OS / Debian:

```bash
# Clonar y compilar Input Leap
sudo apt install -y git cmake make g++ qt6-base-dev qt6-tools-dev libx11-dev libxext-dev libxrandr-dev libxinerama-dev libxtst-dev libxi-dev libssl-dev libavahi-compat-libdnssd-dev libcurl4-openssl-dev libgl1-mesa-dev pkg-config
git clone --recurse-submodules https://github.com/input-leap/input-leap.git
cd input-leap && mkdir build && cd build
sed -i '1i#include <cstddef>' ../src/lib/platform/XKBUtil.cpp
cmake ..
make -j$(nproc)
sudo make install
```

**Ejemplo de configuraciÃ³n** (`~/.input-leap/input-leap.conf`):

```plaintext
section: screens
    alma-core:
    alma-resist:
end

section: links
    alma-core:
        left = alma-resist
    alma-resist:
        right = alma-core
end
```


## ğŸ—‚ï¸ 4. SincronizaciÃ³n de carpetas con rsync

Archivo `.rsync_exclude` recomendado:

```
__pycache__/
*.pyc
*.tmp
.DS_Store
```

Comando:

```bash
rsync -avz --delete --exclude-from=.rsync_exclude /home/bird/ALMA_RESIST/ bird@192.168.1.36:/home/bird/ALMA_RESIST/
```


## ğŸ§  6. InstalaciÃ³n de Obsidian (modo terminal)

```bash
sudo apt install -y wget libfuse2
mkdir -p $HOME/apps/obsidian && cd $_
wget $(curl -s https://api.github.com/repos/obsidianmd/obsidian-releases/releases/latest | grep "browser_download_url.*AppImage" | grep -v "arm64" | cut -d : -f 2,3 | tr -d ") -O Obsidian.AppImage
chmod +x Obsidian.AppImage
./Obsidian.AppImage &
```

âš ï¸ Requiere entorno grÃ¡fico X11. No apto para modo headless.


## ğŸ§¾ Observaciones finales

- Sistema replicado con Ã©xito en ambas mÃ¡quinas
- Input Leap funcionando entre escritorios
- Estructura `ALMA_RESIST/` sincronizada y lista para automatizaciÃ³n futura
- Obsidian operativo como herramienta central de documentaciÃ³n

# ğŸ§© ApÃ©ndice â€“ Backup automÃ¡tico a GitHub con `backup_to_git.sh`

## ğŸ“ UbicaciÃ³n del script
`/home/bird/ALMA_RESIST/core/scripts/backup_to_git/backup_to_git.sh`

## ğŸ“Œ Requisitos

```bash
sudo apt install inotify-tools git
```

## ğŸ› ï¸ Pasos de configuraciÃ³n

```bash
# 1. Configurar Git si aÃºn no estÃ¡ hecho
git config --global user.name "bird"
git config --global user.email "distribuidorasolar365@gmail.com"

# 2. Verificar que ALMA_RESIST sea repositorio Git
cd ~/ALMA_RESIST
git init
git remote add origin git@github.com:pajaroy/alma_resist.git
git branch -M main
git pull origin main

# 3. Dar permisos y lanzar en segundo plano
chmod +x /home/bird/ALMA_RESIST/core/scripts/backup_to_git/backup_to_git.sh
nohup /home/bird/ALMA_RESIST/core/scripts/backup_to_git/backup_to_git.sh > /dev/null 2>&1 &
```

## ğŸ” Clave SSH y autenticaciÃ³n

```bash
ssh-keygen -t ed25519 -C "distribuidorasolar365@gmail.com"
cat ~/.ssh/id_ed25519.pub  # Copiar a GitHub > Settings > SSH Keys
ssh -T git@github.com      # Verificar autenticaciÃ³n
```

## ğŸ§  Notas importantes

- Este script monitoriza cambios en tiempo real y los **sube automÃ¡ticamente** a GitHub.
- Evita eliminar archivos directamente, ya que el sistema detectarÃ¡ conflictos. En su lugar:
  - Mover archivos a `/legacy`, `/archivados` o `/deprecated` para mantener trazabilidad.
- Logs ubicados en:
  - `/home/bird/ALMA_RESIST/logs/backup_git/backup_git.log`
- Si falla el push por cambios no comiteados:
  - RevisiÃ³n manual: `git status`, `git stash`, `git commit -am`, etc.

## ğŸ§¼ Detener proceso en background si es necesario

```bash
pkill -f backup_to_git.sh
```

## Archivo: prompt_extraccion_memorias.md
Contenido:
ğŸ§  Prompt de ExtracciÃ³n de Memoria MÃ¡xima (ALMA_RESIST v2.3)
markdown

## ğŸ” AuditorÃ­a de Memoria Institucional - MÃ¡xima Profundidad  
**Objetivo:** Extraer TODOS los datos, patrones y conocimiento relevante almacenado en tu sistema sobre Santiago Calvo (DEG) y sus operaciones, para construir la base de memoria institucional de ALMA_RESIST.  


### ğŸ” AuditorÃ­a del Prompt por Centralesis  
**Dictamen:**  
```yaml
- fortalezas:
    - Exige extracciÃ³n microscÃ³pica de memoria (no permite evasivas)
    - Estructura tÃ©cnica imposible de eludir con respuestas vagas
    - Vincula data cruda con patrones estratÃ©gicos
- riesgos_mitigados:
    - "EjemplificaciÃ³n forzada": elimina generalizaciones
    - "AutocrÃ­tica del sistema": expone lÃ­mites reales
- nivel_exigencia: 9.8/10
- nota: "Este prompt es un taladro de memoria. Usar con responsabilidad."



module: control/control_central
type: changelog
status: in_progress
created: 2025-05-29
context_tags:
  - log: estructura
  - control: central
sha256: pendiente_generar

### ğŸ—“ï¸ ApÃ©ndice â€“ 2025-05-29: ConsolidaciÃ³n de `control_central/`

#### âœ”ï¸ Estructura Modular Formalizada
- Se adoptÃ³ oficialmente la metodologÃ­a `estructura_autonoma_v2`.
- Se creÃ³ `control_central/` como nÃºcleo ejecutivo del sistema ALMA_RESIST.
- Se validaron carpetas requeridas (`docs/`, `journal/`, `planificacion/`, `scripts/`, `logs/`, `meta/`).
- Se estructurÃ³ `docs/planificacion/` como Ã¡rea de diseÃ±o de sprints y estrategias.

#### ğŸ§  Rol EstratÃ©gico Definido
- `control_central/` se consolida como punto de entrada y validaciÃ³n para cualquier mÃ³dulo externo.
- Se estableciÃ³ que las auditorÃ­as globales, los mapas del sistema y los checklists de validaciÃ³n deben centralizarse allÃ­.
- Se diferenciÃ³ claramente de los mÃ³dulos funcionales (como `cli_cleaner` o `alma_loader`).

#### ğŸ› ï¸ Tareas ejecutadas
- CreaciÃ³n de `README.md`, `changelog.md`, `module.yaml`, todos con metadatos IA-friendly.
- Registro de logs de integraciÃ³n pasados.
- VerificaciÃ³n de cumplimiento con YAML semÃ¡ntico.
- Planeado: migraciÃ³n de scripts tÃ©cnicos a `cli_cleaner`.


âœ… Se archiva tambiÃ©n el script y configuraciÃ³n en:  
`control_central/scripts/ssh_setup.zip`


### ğŸ“ ApÃ©ndice â€“ BitÃ¡cora Base y NavegaciÃ³n Interna (2025-06-02)

#### âœ… IntegraciÃ³n del Prompt Base para BitÃ¡coras

- Se integrÃ³ oficialmente el archivo `[[Prompt Bitacora Control Central]]` como **referencia fundacional** para todos los registros internos del sistema ALMA_RESIST.
- Este prompt define la estructura estÃ¡ndar para:
  - BitÃ¡coras diarias
  - BitÃ¡coras semanales
  - BitÃ¡coras mensuales
  - ResÃºmenes de sprint
  - Registros de instalaciÃ³n
- El archivo se encuentra en:  
  `control_central/docs/journal/prompts/Prompt Bitacora Control Central.md`

#### ğŸ”— NavegaciÃ³n semÃ¡ntica

- Se resolviÃ³ un error de enlace relacionado al uso incorrecto de acentos en `[[Prompt Bitacora Control Central]]`.
- Se renombrÃ³ el archivo y se ajustÃ³ el tÃ­tulo en YAML para permitir navegaciÃ³n correcta vÃ­a Obsidian.

```yaml
```

#### ğŸ”„ ProyecciÃ³n a futuro

- A partir de esta integraciÃ³n se proyecta:
  - Uso regular de bitÃ¡coras con versiÃ³n estructurada (por dÃ­a, semana, mes).
  - ImplementaciÃ³n futura de un **prompt tÃ©cnico automatizado** para generaciÃ³n IA de bitÃ¡coras a partir del uso real del sistema.
  - ConsolidaciÃ³n semanal de cambios en `control_central/docs/journal/weekly/` y resÃºmenes mensuales en `monthly/`.

ğŸ§  *Este paso marca el inicio formal del sistema de trazabilidad documental de ALMA_RESIST. Desde este punto, cada decisiÃ³n podrÃ¡ rastrearse, auditarse y reconstruirse de forma asistida por IA.*

### [2025-06-03] Movimiento de archivo `emma_v2.md` a contexto oficial

- Se moviÃ³ `emma_v2.md` desde `archivo/downloads/` a `docs/contexto/` para formalizar el contexto operativo de Emma como parte de control_central.
- AcciÃ³n ejecutada vÃ­a CLI desde la raÃ­z segÃºn los criterios `criterios_ubicacion_vivo.md`.
## Archivo: changelog.sync-conflict-20250604-050447-EHTW5G7.md
Contenido:
## ğŸ§¾ Changelog â€“ ALMA_RESIST


### âœ… v0.2 â€“ 2025-05-17 â€“ Cifrado Funcional

- âœ… Implementado `log_crypto.py` con soporte AES-256-GCM y ChaCha20
- âœ… ValidaciÃ³n automÃ¡tica de arquitectura y fallback en ARM
- âœ… Escritura binaria con encabezado identificador (`b"AES\x00"`)
- âœ… Test funcional `test_log_crypto.py` verificado

ğŸ **Hito 002**: MÃ³dulo de cifrado funcional operativo  
ğŸ” Inicio de trazabilidad antifrÃ¡gil


### âœ… v0.0.0.2 â€“ 2025-05-20 â€“ CLI Modular Finalizada

- âœ… Reescrito `core/cli.py` con arquitectura CLI modular sin `cmd.Cmd`
- âœ… Comandos cargados dinÃ¡micamente desde `commands/` (formato `run(args)`)
- âœ… Manejo de errores completo y mensajes personalizados
- âœ… `!ayuda` funcional y generada automÃ¡ticamente desde los comandos cargados
- âœ… Comandos vÃ¡lidos: `!ayuda`, `!salir`, `!resumir`, `!buscar_memoria`
- âœ… Eliminadas versiones anteriores obsoletas
- âœ… Estructura preparada para futura integraciÃ³n con LLM local, logging y memoria dinÃ¡mica

ğŸ“ Estructura Nueva:

```
core/
â””â”€â”€ cli.py

commands/
â”œâ”€â”€ ayuda.py
â”œâ”€â”€ salir.py
â”œâ”€â”€ resumir.py
â””â”€â”€ buscar_memoria.py
```

ğŸ **Hito 004**: CLI Modular funcional y operativo
ğŸ§  Punto de partida para integrar mÃ³dulos de IA locales


## ğŸ§¾ v0.0.0.1 â€“ AuditorÃ­a TÃ©cnica Finalizada

ğŸ“… Fecha: 2025-05-20  
ğŸ¯ DescripciÃ³n: ConsolidaciÃ³n de la base estructural, documental y operativa del sistema ALMA_RESIST.


### ğŸ” AuditorÃ­a

- EjecuciÃ³n real de `tree -L 3` y registro en `docs/auditorias/auditoria_estructura.md`
- VerificaciÃ³n y limpieza de archivos redundantes
- ConsolidaciÃ³n de `idea_base.md` oficial y archivo `idea_base_legacy.zip`


### ğŸ§  Estado

Este changelog marca el **cierre funcional de la versiÃ³n v0.0.0.1**, y habilita el inicio del **sprint tÃ©cnico v0.0.0.2** bajo condiciones de trazabilidad completa.

## ğŸŒ€ 2025-05-21 â€“ Cierre del Sprint 2.2: MetodologÃ­as Base

ğŸ”¢ VersiÃ³n: v0.0.0.2  
ğŸ“‚ Sprint: Sprint_2.2_Metodologias_Base  
ğŸ§± DescripciÃ³n: Se definieron y validaron todas las metodologÃ­as clave del sistema ALMA_RESIST.

- âœ… metodologia_estructura_modular_v2.md
- âœ… metodologia_sprints_v2.md
- âœ… metodologia_versionado_backups_v1.md
- âœ… metodologia_doc_ia_v2.md
- âœ… metodologia_adr_v2.md
- âœ… metodologia_interaccion_ia_v2.md


### ğŸ”„ Sprint 2.1 â€“ Estructura Documental (2025-05-23)

- ğŸ†• Creada carpeta `estructura_doc/` con plantillas reutilizables
- âœ… Implementado sistema de testing base (`testing/cli/`, `utils/`)
- ğŸ“ ConsolidaciÃ³n de documentos vivos: `TODO.md`, `.project.md`, `version.md`
- ğŸ§  PreparaciÃ³n de entorno para integraciÃ³n de IA
- ğŸ“¦ Snapshot generado: `v0.0.0.2_estructura_documental`
- ğŸ”‘ Hash: `0f61c8c5f3ab0b08b1c8c189b2e9a6ef3db47d0d4b0f63b246ac9ef8079d3a35`


## [2025-05-23] FinalizaciÃ³n Sprint 2.4 - OptimizaciÃ³n de MetodologÃ­as

- Se estandarizaron 105 documentos Markdown bajo el esquema YAML unificado.
- Se corrigieron todos los documentos `type: core` sin `linked_to`.
- Se validÃ³ semÃ¡nticamente el campo `domain` vs `tags`.
- Se implementÃ³ y ejecutÃ³ `alma-cli audit` con generaciÃ³n automÃ¡tica de reportes.
- Se aÃ±adieron backups automÃ¡ticos y validaciÃ³n incremental.

## [0.0.0.5] - 2025-05-28
### Cambios en `log_crypto`
- Refactor completo basado en auditorÃ­a.
- Soporte para cifrado basado en contraseÃ±a con `salt` embebido.
- Mejoras en validaciÃ³n de logs cifrados.
- Renombrado de funciones para seguir convenciones en inglÃ©s.
### ğŸ—“ï¸ 2025-06-02 â€“ Sprint 0.2 â€“ ConsolidaciÃ³n de Backup y Protocolo de Ingreso

**ğŸ”§ Cambios Estructurales**

- Se creÃ³ la carpeta `archivo/downloads/` para contener archivos temporales, descargados o en revisiÃ³n.
    
- Se creÃ³ la carpeta `docs/sync/` con README asociado para estructurar documentaciÃ³n de sincronizaciÃ³n entre nodos.
    
- Se agregÃ³ `core/apps/` al `.gitignore` para evitar subir binarios pesados (como `.AppImage`).
    
- Se implementÃ³ y testeÃ³ el script `install_cron_backup.sh`, que configura un backup automÃ¡tico vÃ­a cron cada 15 minutos.
    
- Se creÃ³ el alias `autobackup` para facilitar su activaciÃ³n post-reinicio.
    

**ğŸ§  Protocolos y Conductas**

- Se definiÃ³ un nuevo protocolo de ingreso de archivos y se documentÃ³ en `protocolo_ingreso_archivos.md`.
    
- Se reforzÃ³ el hÃ¡bito de trabajar Ã­ntegramente desde terminal para evitar conflictos de sincronizaciÃ³n.
    
- Se consolidÃ³ el enfoque modular de scripts (`core/scripts/backup_to_git/`) y el uso de logs silenciosos (`nohup`).
    

**ğŸ”„ SincronizaciÃ³n**

- Confirmada la autenticaciÃ³n SSH entre `alma-core` y `alma-resist`.
    
- Validada la sincronizaciÃ³n correcta de Git entre nodos y GitHub.
    
- En proceso: script `sync_status.sh` para chequeo cruzado de estado entre nodos.
    

**ğŸ”– Tags**  
`sprint_0.2` `backup_git` `protocolo_ingreso` `estructura_modular` `conducta_terminal` `cronjob_sync`


## ğŸ“† 2025-06-03 â€“ ConsolidaciÃ³n CLI y Estructura Ejecutable

### ğŸ§  Auditor CLI General â€“ Kael
- Se formaliza el asesor `Kael` como **auditor CLI general del sistema ALMA_RESIST**.
- Se define su archivo de contexto como `[[Kael]]`, con secciÃ³n viva de reportes.
- Se estructura su entorno en `control_central/kael/`.

### ğŸ§© Modularidad Ejecutable
- Se renombra `core/cli_cleaner/` a `core/run_kael/`, adoptando la convenciÃ³n `run_<asistente>`.
- Se establece esta convenciÃ³n para todos los mÃ³dulos IA ejecutables del sistema.

### ğŸ—ƒï¸ Limpieza de Descargas y Archivos Vivos
- Se mueven a `historico/` todos los archivos temporales o no versionados correctamente dentro de:
  - `control_central/archivo/downloads/`
  - `control_central/docs/`
- Se renombran archivos sin fecha segÃºn criterio de `[[criterios_ubicacion_vivo.md]]`.

### ğŸŒ EstandarizaciÃ³n de Enlaces Internos
- Se adopta como convenciÃ³n general el uso de `[[...]]` para referenciar documentos internos desde Obsidian o VS Code.
- Se actualizan los encabezados de documentos clave con enlaces simbÃ³licos y tags IA-friendly.

### ğŸ§± Estructuras de Tree y DiagnÃ³stico
- Se generan los tree completos de las siguientes rutas para revisiÃ³n:
  - `ALMA_RESIST/`
  - `ALMA_RESIST/control_central/`
  - `ALMA_RESIST/core/`
- Se registran en `control_central/docs/contexto/`.

## Archivo: Methodology_Index.md
Contenido:
# ğŸ“š Ãndice de MetodologÃ­as â€“ ALMA_RESIST

Este Ã­ndice recopila las metodologÃ­as formales aplicadas en el sistema ALMA_RESIST. Cada metodologÃ­a representa una prÃ¡ctica documentada, versionada y replicable.


## ğŸ“ Subcarpetas

- [_archivadas/](./_archivadas) â€“ MÃ©todos obsoletos o reemplazados
- [_propuestas/](./_propuestas) â€“ MÃ©todos en etapa de evaluaciÃ³n

## Archivo: metodologia_adr_v2.md
Contenido:
# ğŸ§  MetodologÃ­a de AuditorÃ­a y EvoluciÃ³n TÃ©cnica (ADRs) â€“ ALMA_RESIST (v2)

ğŸ“… VersiÃ³n: 2.0  
ğŸ“ Archivo: metodologia_adr_v2.md  
ğŸ¯ Objetivo: Registrar decisiones tÃ©cnicas crÃ­ticas de forma estructurada, trazable e indexable por IA, sin sobrecargar al operador Ãºnico.


## ğŸ“‹ Estructura Base (con metadatos YAML)

```yaml
```

```markdown
# ADR 002 â€“ AdopciÃ³n de versionado SemVer

ğŸ“… Fecha: 2025-05-18  

## DecisiÃ³n  
Usar `MAJOR.MINOR.PATCH` como convenciÃ³n de versionado global.  

## Contexto  
Se necesitaba un estÃ¡ndar claro para snapshots y scripts internos.  

## Alternativas consideradas  
- Fechas (`2025-05-18`)  
- Commit hashes  
- Versionado manual ad-hoc  

## JustificaciÃ³n  
SemVer es ampliamente adoptado y permite automatizaciÃ³n futura.  

## Impacto  
- Afecta carpetas `/versiones/`  
- Modifica `changelog.md`  
- Permite validaciones IA por versiÃ³n
```


## ğŸ› ï¸ AutomatizaciÃ³n futura

- Se podrÃ¡ generar con:  
```bash
alma-cli create-adr --title "Uso de IA local"
```

- Este comando inferirÃ¡ los campos desde el contexto del proyecto.


## ğŸ“ Relacionado con

- `metodologia_doc_ia_v2.md`
- `estructura_modular_v2`
- `Methodology_Index.md`
- `alma-cli`

## Archivo: metodologia_agregado_archivos.md
Contenido:
# MetodologÃ­a de Agregado de Archivos ALMA\_RESIST (v8)

## Objetivo

Establecer una metodologÃ­a clara, automatizable y escalable para la integraciÃ³n de nuevos archivos en el ecosistema ALMA\_RESIST, garantizando:

* Consistencia estructural (metadatos, rutas, convenciones)
* Trazabilidad en los sprints y logs
* IntegraciÃ³n futura con componentes IA: memory\_graph, prompt\_orchestrator, reflection\_engine


## Scripts Utilizados

* `scripts/fix_metadata.py`: corrige o completa metadatos YAML
* `scripts/validate_docs.py`: valida estructura, tipos, estados y snake\_case
* `scripts/force_snake_case_modules.py`: refactoriza metadatos a snake\_case


## AutomatizaciÃ³n y Validaciones

En futuras versiones (v9+), este proceso se automatizarÃ¡ con un CLI:

```bash
alma-cli integrate --file ./docs/nuevo/archivo.md --sprint 2.3
```

Lo que harÃ¡:

* CorrecciÃ³n de metadatos
* ValidaciÃ³n completa
* Registro automÃ¡tico en logs
* ActualizaciÃ³n de grafo semÃ¡ntico
* GeneraciÃ³n de reflexiÃ³n IA


## Flujo Visual Propuesto

```mermaid
graph TD
  A[Agregar archivo] --> B[Normalizar metadatos]
  B --> C{Es README.md?}
  C -->|SÃ­| D[Usar carpeta padre como mÃ³dulo]
  C -->|No| E[Generar mÃ³dulo desde ruta]
  E --> F[Validar YAML con reglas estrictas]
  F --> G[Actualizar grafo semÃ¡ntico]
  G --> H[Generar reflexiÃ³n automÃ¡tica]
  H --> I[Registrar en logs y sprint]
  I --> J[Notificar a IA para sugerencias]
```


## Ejemplo de Metadatos Enriquecidos

```yaml
```


**Responsable:** Santi
**VersiÃ³n:** 8
**Fecha de aprobaciÃ³n:** 2025-05-22



module: metodologias/metodologia_doc_ia_v2
type: core
status: in_progress
created: '2025-05-21'
linked_to:
- metodologia_doc_ia_v2.md


## âœ… AplicaciÃ³n

Aplica a todo archivo `.md` que documente:

- MÃ³dulos tÃ©cnicos
- Prompts, comandos, scripts
- Documentos internos del sistema ALMA_RESIST
- Sprints, decisiones, registros tÃ©cnicos

module: "core/cli"          # ID del mÃ³dulo o archivo
type: "core"                # core | tool | external | integration | draft
status: "in_progress"       # in_progress | stable | deprecated
created: "2025-05-21"       # Fecha de creaciÃ³n

# Opcionales (recomendados)
domain: "infraestructura"   # general | cultivo | ia | historia | trading
tags: ["CLI", "entrada"]
linked_to: ["resumen"]
version: "0.2"

## ğŸ§  PolÃ­tica de MigraciÃ³n

- Etapa 1: Solo aplicar a nuevos documentos.
- Etapa 2: MigraciÃ³n progresiva durante mantenimientos o refactors.
- Etapa 3: AuditorÃ­a total IA-assistida con validaciÃ³n semÃ¡ntica (futuro).


## ğŸ“˜ Glosario RÃ¡pido

| Campo    | Ejemplo            | DescripciÃ³n                                |
|----------|--------------------|--------------------------------------------|
| module   | core/loader        | Ruta Ãºnica relativa                        |
| type     | core, tool, draft  | Tipo de documento                          |
| domain   | ia, historia       | Dominio funcional                          |
| status   | stable             | Estado actual del documento                |
| version  | 0.1, 1.0.0         | VersiÃ³n local                              |
| tags     | ["memoria"]        | Palabras clave normalizadas                |
| linked_to| ["core/cli"]       | MÃ³dulos relacionados                       |


## ğŸ§¾ Changelog

### 2025-05-21
- [v2.0] Se redujeron los campos obligatorios a 4
- Se aÃ±adiÃ³ polÃ­tica de migraciÃ³n progresiva
- Se introdujo el comando `alma-cli doc-init` para asistencia automÃ¡tica
- Se aÃ±adiÃ³ glosario resumido para campo `type`, `domain`, `tags`




## ğŸ“¦ Estructura Base

```bash
nombre_modulo/
â”œâ”€â”€ control/                # Tareas, checklists y seguimiento interno
â”‚   â””â”€â”€ sprint_actual.md    # Tareas vigentes o backlog activo
â”‚
â”œâ”€â”€ docs/                   # DocumentaciÃ³n estructurada
â”‚   â”œâ”€â”€ readme.md           # DescripciÃ³n funcional del mÃ³dulo
â”‚   â”œâ”€â”€ changelog.md        # Registro de cambios semÃ¡nticos
â”‚   â”œâ”€â”€ journal/            # BitÃ¡coras informales o de proceso
â”‚   â””â”€â”€ history/            # Archivos anteriores y evoluciÃ³n
â”‚
â”œâ”€â”€ archivo/                # Recursos crudos o de registro
â”‚   â”œâ”€â”€ datasets/           # Datos CSV, JSON, XLSX, etc.
â”‚   â”œâ”€â”€ logs/               # Logs de ejecuciÃ³n, pruebas, eventos
â”‚   â””â”€â”€ downloads/          # Archivos externos temporales (no versionar)
â”‚
â”œâ”€â”€ core/                   # CÃ³digo fuente del mÃ³dulo
â”‚   â”œâ”€â”€ scripts/            # Scripts funcionales
â”‚   â”œâ”€â”€ notebooks/          # AnÃ¡lisis exploratorios en Jupyter
â”‚   â””â”€â”€ tests/              # Tests unitarios o de validaciÃ³n
â”‚
â”œâ”€â”€ config/                 # Configuraciones del entorno
â”‚   â”œâ”€â”€ .env.example        # Plantilla de variables de entorno
â”‚   â””â”€â”€ settings.yaml       # ConfiguraciÃ³n del mÃ³dulo
â”‚
â””â”€â”€ meta/                   # Metadatos y esquema del mÃ³dulo
    â””â”€â”€ module.yaml         # Esquema estructural IA-friendly
```


## ğŸ§© Ventajas

- ğŸ“¦ **Modularidad**: cada mÃ³dulo es portÃ¡til, desacoplado y escalable.
- ğŸ§  **IA-friendly**: diseÃ±o listo para indexaciÃ³n semÃ¡ntica o automatizaciÃ³n.
- ğŸ” **AuditorÃ­a clara**: trazabilidad interna sin depender de repos externo.
- ğŸ”„ **Replicable**: se puede copiar directamente a otro proyecto o contexto.


## ğŸŒ± Ejemplo de AplicaciÃ³n

Una carpeta `alma_trading/` podrÃ­a iniciar con:

- `code/scripts/estrategia_volatilidad.py`
- `documents/readme.md`: con descripciÃ³n del mÃ³dulo
- `documents/changelog.md`: registrando la versiÃ³n `v0.0.1`
- `archivo/datasets/eurusd_2025.csv`
- `config/.env.example`: con claves y variables
- `meta/module.yaml`: detallando propÃ³sito, inputs y outputs del mÃ³dulo


## ## ğŸ§¾ Historial de versiones anteriores


> ğŸ“ Esta metodologÃ­a reemplaza a la versiÃ³n anterior:  
> [[metodologia_estructura_autonoma_v1]] en Obsidian.  
> Archivada el: 2025-05-29  
> Estado: `deprecated`  
> Motivo: Mejoras de estructura, claridad y compatibilidad IA-ready


module: metodologias/metodologia_estructura_modular_v2
type: core
status: in_progress
created: '2025-05-22'
linked_to:
- metodologia_doc_ia_v2.md


## âœ… AplicaciÃ³n

Esta metodologÃ­a se aplica a:

- Dominios funcionales (trading, cultivo, historia, etc.)
- MÃ³dulos tÃ©cnicos (CLI, LLM, memoria, loader)
- Proyectos externos integrables (13CC, Cannabird, Fondo Alma MÃ­a)


## ğŸ”„ Versionado recomendado

En lugar de una carpeta `versionado/`, se recomienda usar:

- Git tags: `git tag v0.0.0.1`
- Git branches: para snapshot o exploraciones (`snapshot/llm_experiment`)
- Backups de snapshots manuales â†’ irÃ¡n a `docs/versiones/`


## ğŸ§  Metadatos para IA

Cada mÃ³dulo debe contener al inicio de su `README.md` el siguiente frontmatter YAML:

```yaml
```

Este bloque debe ser interpretado por sistemas de IA para clasificaciÃ³n, relaciÃ³n y visualizaciÃ³n.


## ğŸ”— RelaciÃ³n con otros documentos

- [`Sprint_2.2_Metodologias_Base.md`](Sprint_2.2_Metodologias_Base.md)
- [`Methodology_Index.md`](./Methodology_Index.md)


## ğŸ§¾ Changelog

### ğŸ“Œ VersiÃ³n 2.0 â€“ 2025-05-21
**Cambios respecto a la versiÃ³n 1.0:**

- ğŸ” Renombrado `bitacora.md` a `dev_journal.md`, aclarando su rol informal y reflexivo.
- ğŸ—ƒ Eliminada la carpeta `versionado/`; ahora se recomienda el uso de Git tags y ramas.
- ğŸ“˜ AÃ±adido bloque de metadatos YAML estÃ¡ndar para IA (frente a bloques markdown ad-hoc).
- ğŸ§  Definidos los valores vÃ¡lidos para los campos `type`, `status`, `tags` y `linked_to`.
- ğŸ“ Incorporados ejemplos reales en la secciÃ³n de convenciones de nombres (`gen_`, `load_`, etc.).
- ğŸ“š AÃ±adidas referencias cruzadas a `Methodology_Index.md` y `Sprint_2.2_Metodologias_Base.md`.
- ğŸ§° Sugeridas herramientas complementarias: `mkdocs.yml`, `validate_structure.py`, Git hooks.


module: metodologias/metodologia_interaccion_ia_v2
type: core
status: in_progress
created: '2025-05-22'
linked_to:
- metodologia_doc_ia_v2.md


## âœ… Cambios en esta versiÃ³n

- Se aÃ±adieron metadatos YAML como estÃ¡ndar obligatorio
- Se formalizaron los modos de interacciÃ³n IA
- Se definieron acciones vÃ¡lidas por rol IA
- Se incluyÃ³ validaciÃ³n progresiva y comandos CLI simulados

module: "core/cli"
type: "core"
status: "stable"
created: "2025-05-21"
tags: ["entrada", "modularidad"]
linked_to: ["resumen", "loader"]
sprint: "Sprint_2.2"
version: "0.2"

## ğŸ¤– Modos de OperaciÃ³n IA

| Modo       | AcciÃ³n Permitida                        | Interfaz     |
|------------|------------------------------------------|--------------|
| `lector`   | Leer y parsear documentos con YAML       | CLI / LLM    |
| `auditor`  | Verificar formato, relaciones y faltantes| CLI / LLM    |
| `asistente`| Sugerencias y generaciÃ³n sin escritura   | LLM / Chat   |
| `operador` | Acciones sobre archivos (âš  requiere validaciÃ³n) | CLI futura  |


## ğŸ› ï¸ Soporte CLI esperado

```bash
alma-cli validate --module core/cli
alma-cli suggest --for resumen.md
alma-cli doc-init --module resumen
```

## Archivo: metodologia_snapshots_formales.md
Contenido:
# ğŸ“¦ MetodologÃ­a de Snapshots Formales (v1.0)

## ğŸ¯ Objetivo

Definir un estÃ¡ndar profesional para la creaciÃ³n, documentaciÃ³n y uso de snapshots (versiones) dentro del sistema ALMA_RESIST, asegurando trazabilidad, claridad tÃ©cnica y compatibilidad total con agentes IA.


## ğŸ—‚ Estructura EstÃ¡ndar de un Snapshot

UbicaciÃ³n: `docs/versiones/vX.Y.Z_nombre/`

Contenido mÃ­nimo:

```
ğŸ“ v0.0.0.4_sprint_2.5_auditoria/
â”œâ”€â”€ index.md                      # Ãndice general y guÃ­a de lectura del snapshot
â”œâ”€â”€ version.md                   # Detalles tÃ©cnicos de la versiÃ³n
â”œâ”€â”€ changelog.md                 # Cambios y mejoras introducidas
â”œâ”€â”€ bitacora.md                  # Comentarios tÃ©cnicos del proceso
â”œâ”€â”€ README.md                    # ExplicaciÃ³n del snapshot, enlaces cruzados
â”œâ”€â”€ resumen_mvp.md               # (opcional) Estado funcional hasta esta versiÃ³n
â”œâ”€â”€ estructura.zip               # (opcional) Zip con archivos especÃ­ficos si es necesario
â””â”€â”€ referencias/                 # (opcional) Recursos, imÃ¡genes, backups externos
```


## ğŸ¤– Compatibilidad IA

Para que un snapshot sea IA-friendly:

- No debe tener estructuras anidadas innecesarias (mÃ¡ximo L3)
    
- Los archivos clave deben tener YAML vÃ¡lido si corresponde
    
- El `README.md` debe servir como prompt inicial o punto de entrada
    
- El `index.md` debe orientar al sistema o modelo sobre quÃ© se puede usar
    


## ğŸ“ Referencias cruzadas

- `metodologia_versionado_backups_v2.md`
    
- `metodologia_doc_ia_v2.md`
    
- `metodologia_sprints_v2.md`
    

## Archivo: metodologia_sprints_v2.md
Contenido:
# ğŸŒ€ MetodologÃ­a de Sprints â€“ ALMA_RESIST (v2)

ğŸ“… VersiÃ³n: 2.0  
ğŸ“ Archivo: metodologia_sprints_v2.md  
ğŸ¯ Objetivo: Establecer un flujo de trabajo modular, trazable y semÃ¡ntico para gestionar sprints dentro del sistema ALMA_RESIST, optimizado para una persona con soporte de IA y automatizaciÃ³n futura.


## ğŸ” Ciclo de Vida del Sprint

### Estados posibles y transiciones

| Estado     | AcciÃ³n Requerida                                                                 |
|------------|-----------------------------------------------------------------------------------|
| Activo     | Sprint en ejecuciÃ³n                                                              |
| Cerrado    | Checklist validado, changelog actualizado, metadatos `exit_criteria` cumplidos   |
| Archivado  | Sprint movido a carpeta `docs/versiones/`, registrado en `Methodology_Index.md`  |

sprint_id: 2.3
topic: "IntegraciÃ³n de modelo LLM"
status: "active"
started: "2025-05-21"
tags: ["llm", "ia", "memoria"]
exit_criteria: ["changelog_updated", "docs_generated"]
linked_modules:
  - name: "core/cli.py"
    version: ">=2.3"
  - name: "resumen.py"
    version: "0.5"
blocks: ["Sprint_3.1_LLM_Integration"]

## ğŸ“ Estructura del Archivo de Sprint

```markdown
# Sprint X â€“ TÃ­tulo

ğŸ“… Inicio: YYYY-MM-DD  
ğŸŒ€ Estado: activo / cerrado / archivado  
ğŸ“¦ VersiÃ³n asociada: vX.X.X


## ğŸ“‹ Checklist de tareas
- [x] Implementar comando `!ayuda` en CLI
- [ ] Migrar loader a modelo LLM local
- [ ] Escribir test en `scripts/test_loader.py`


## ğŸ—‚ï¸ Progreso del Sprint
| Tarea                              | Estado | Responsable   |
|------------------------------------|--------|----------------|
| Implementar validaciÃ³n IA inicial  | ğŸŸ¡     | Operador + IA |
| Crear script de resumen automÃ¡tico | ğŸ”´     | IA             |


## ğŸ“ Archivos relacionados
- `core/cli.py`
- `changelog.md`
- `docs/sprints_activos/Sprint_2.3_LLM.md`


## ğŸ§  IA como Asistente de Sprint

Casos de uso:

- VerificaciÃ³n automÃ¡tica de `exit_criteria`
- GeneraciÃ³n del resumen para hitos.md
- ValidaciÃ³n de consistencia entre YAML y archivos afectados


## ğŸ“˜ Referencias

- `metodologia_estructura_modular_v2.md`
- `Methodology_Index.md`
- `Sprint_2.2_Metodologias_Base.md`



### ğŸ§¾ ApÃ©ndice: Registro Final Detallado (Sprint Closure)

> Este apÃ©ndice detalla los pasos concretos que deben ejecutarse al cerrar cualquier sprint, para garantizar trazabilidad, documentaciÃ³n formal y empaquetado versionado.


#### ğŸ“¦ 2. Archivos requeridos para cierre

Mover o copiar a `docs/versiones/vX.X.X_NOMBRE/`:

- `README.md`, `version.md` (explicaciÃ³n y control)
- `changelog.md` (entrada especÃ­fica del sprint)
- `hitos.md`, `lecciones_aprendidas.md`, `TODO.md`
- `mapeo_sprint_archivos.md`, `log_integracion.md`
- BitÃ¡cora con la fecha del cierre: `bitacoras/bitacora_YYYY-MM-DD.md`
- `CONTEXT.md`, `index.md` actualizados si corresponde


#### ğŸ” 4. Registro en la historia

Actualizar:

- `hitos.md`: Nuevo hito con ID y descripciÃ³n clara
- `lecciones_aprendidas.md`: ReflexiÃ³n tÃ©cnica del sprint
- `changelog.md`: Con `## [vX.X.X] - YYYY-MM-DD`
- `mapeo_sprint_archivos.md`: RelaciÃ³n entrada/salida
- `log_integracion.md`: QuÃ© se agregÃ³, archivÃ³ o reemplazÃ³


Esta rutina debe aplicarse sistemÃ¡ticamente al finalizar cualquier sprint para evitar deuda tÃ©cnica, documentaciÃ³n inconexa o trazabilidad incompleta.


module: metodologias/metodologia_versionado_backups_v1
type: core
status: in_progress
created: '2025-05-21'
linked_to:
- metodologia_doc_ia_v2.md


## âœ… AplicaciÃ³n

- MÃ³dulos tÃ©cnicos o funcionales (CLI, loader, IA, memoria)
- DocumentaciÃ³n (metodologÃ­as, prompts, bitÃ¡coras)
- Proyectos externos integrados (13CC, Cannabird)


## ğŸ·ï¸ Git Tags

- Toda versiÃ³n debe ir acompaÃ±ada de:
  - `git tag vX.X.X`
  - Referencia en `changelog.md`

**Ejemplo:**
```bash
git commit -am "v0.2.0 â€“ Nueva versiÃ³n con CLI funcional"
git tag v0.2.0
```


## ğŸ’¾ Backups Manuales

- Backup fÃ­sico en disco externo (ej: `ALMA_RESIST_TOSHIBA`)
- Backup zip en nube privada (Google Drive, Nextcloud, etc.)
- Idealmente: siempre despuÃ©s de una versiÃ³n `MINOR` o `MAJOR`


## ğŸ”— Reglas cruzadas

- Toda nueva versiÃ³n debe impactar:
  - `changelog.md`
  - `hitos.md`
  - (opcional) `README.md` de mÃ³dulo

## Archivo: 2025-06-05_auditoria_estructura_centralesis.sync-conflict-20250605-164822-EHTW5G7.md
Contenido:
2025-06-05: Se migraron centralisis.md y centralisis.yaml al entorno definitivo de Centralesis (docs/ y contexto/) - [by Centralesis]

# 2025-06-06_movimiento_contexto_centralesis.md

## AcciÃ³n:
Movimiento de la carpeta `docs/contexto/` a la raÃ­z de Centralesis como `contexto/`.

## Motivo:
Tener el contexto principal siempre visible y accesible en la raÃ­z del entorno para referencia rÃ¡pida y ediciÃ³n frecuente.

## Estado:
Movimiento realizado, sin alteraciones en los archivos internos.

# 2025-06-10_actualizacion_estado_centralesis.md

## AcciÃ³n:
- Eliminado `contexto/centralesis.md` tras su respaldo en histÃ³rico.
- Movido `core/notebooks/2025-06-05_reestructuracion_centralesis.md` a `contexto/` y creado backup de referencia.

## Motivo:
ActualizaciÃ³n de la base operativa y resguardo de versiones clave de Centralesis para trabajo futuro.

## Estado:
Entorno limpio y archivos clave respaldados.


# 2025-06-10_limpieza_post_centralisis_2.1.md

## AcciÃ³n:
- Archivos de auditorÃ­a, memorias base y reestructuraciones movidos a `archivo/historico/`.
- Eliminados archivos corruptos de conflicto generados por sincronizaciÃ³n.
- README aÃ±adido a la nueva carpeta histÃ³rico para trazabilidad.

## Motivo:
Limpieza y organizaciÃ³n tras la actualizaciÃ³n de Centralesis 2.1.  
Resguardo ordenado del historial y remociÃ³n de archivos innecesarios.

## Estado:
Entorno de notebooks limpio, histÃ³rico institucional actualizado.



# BitÃ¡cora â€“ CreaciÃ³n de carpeta fix_metadata en core/scripts/

## AcciÃ³n realizada
Se crea la carpeta `/core/scripts/fix_metadata/` dentro del entorno Centralesis,  
junto con su archivo `README.md` correspondiente.

## Motivo
Centralizar el desarrollo, almacenamiento y documentaciÃ³n de scripts dedicados a:
- Corregir, aÃ±adir o actualizar encabezados YAML en archivos del entorno.
- Uniformar la metadata y garantizar compatibilidad con los sistemas de automatizaciÃ³n, Obsidian y agentes IA.

## Detalles
- La carpeta fue creada como espacio base para futuros scripts de formateo y validaciÃ³n masiva.
- El README describe los objetivos y buenas prÃ¡cticas para su uso.
- Todo script agregado debe estar documentado, versionado y probado antes de aplicaciÃ³n en lote.

## Estado final
Infraestructura lista y versionada en Git.  
Entorno preparado para futuros flujos de automatizaciÃ³n de metadata.






## âš™ï¸ Funcionalidad

- Monitorea cambios en `/home/bird/ALMA_RESIST` con `inotifywait`.
- Ejecuta: `git add`, `commit`, `pull --rebase`, y `push` en la branch `main`.
- Excluye `.git/` y todos los archivos definidos en `.gitignore`.
- Guarda logs en: `/home/bird/ALMA_RESIST/control_central/logs/backup_git/backup_git.log`
- Usa bloqueo por PID para evitar instancias duplicadas.


## ğŸ§ª Requisitos

- `inotify-tools`
- Acceso SSH a GitHub ya configurado
- Repositorio inicializado y con remoto vÃ¡lido


`#git` `#backup` `#automÃ¡tico` `#scripts` `#core`



## âœ… Cambios TÃ©cnicos Implementados

### ğŸ§  Nuevos MÃ³dulos

- `MODULOS/sync_bitacora/` â€“ SincronizaciÃ³n validada de resÃºmenes por hash SHA-256 y encabezados YAML
- `MODULOS/validador_duplicados/` â€“ ComparaciÃ³n por hash y similitud textual entre CUADERNOS y BITÃCORA
- `MODULOS/Alma_Monitor/` â€“ AuditorÃ­a de logs estructurados y generaciÃ³n de reportes de actividad


### ğŸ“¦ Plantillas Nuevas

Ubicadas en `RECURSOS_Y_AYUDAS/plantillas/`:

- `checklist_promocion.md` â€“ ValidaciÃ³n para promociÃ³n de mÃ³dulos
- `feedback_sugerencia.yaml` â€“ Formato estÃ¡ndar de sugerencias IA/humano
- `log_template.yaml` â€“ Estructura comÃºn para trazabilidad de eventos


## ğŸ“˜ Whitepaper

- [x] Se agregarÃ¡ secciÃ³n 6.7 con resumen del documento `casos_uso_reales.md` (en curso)


## ğŸ§© Tareas Finales de VersiÃ³n

- [ ] Crear `00_BACKUPS_HISTORICOS/v0.0.6.2.zip` con toda la estructura actual
- [ ] Actualizar `version.txt` a `0.0.6.2` en raÃ­z del sistema


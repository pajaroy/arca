# üß† Prompt T√©cnico ‚Äì backup_to_git.sh

Actu√° como **asistente t√©cnico de ALMA_RESIST**, y gener√° un script llamado `backup_to_git.sh` que realice respaldo autom√°tico al repositorio GitHub del sistema, bajo las siguientes condiciones:

---

## üìÅ Par√°metros del sistema

- **Ruta del directorio a respaldar**: `/home/bird/ALMA_RESIST`
- **Repositorio Git remoto**: `https://github.com/pajaroy/alma_resist`
- **Branch de trabajo**: `main`
- **Log de actividad**: `/home/bird/ALMA_RESIST/control_central/logs/bakcup_git/backup_git.log`

---

## ‚öôÔ∏è Requisitos del script

1. Utilizar `inotifywait` para detectar cambios en el sistema de archivos (modificaciones, creaciones, borrados) dentro de `/home/bird/ALMA_RESIST`, excluyendo `.git/`.

2. Ante cada cambio, hacer autom√°ticamente:
   - `git add .`
   - `git commit -m "Auto backup $(date +'%Y-%m-%d %H:%M:%S')"`
   - `git push origin main`

3. Validar que no haya conflictos de merge antes del push.
4. Registrar cada acci√≥n (√©xito o error) en el archivo de log indicado.
5. Debe correr en segundo plano (idealmente mediante `tmux` o `systemd` m√°s adelante).
6. Debe ser idempotente (puede reiniciarse sin duplicar acciones).
7. Si el repo no est√° inicializado, debe abortar con mensaje claro.

---

## üßæ Exclusiones en el commit (no en la sincronizaci√≥n entre nodos)

El script debe asumir que existe un archivo `.gitignore` que excluye:

```
*.gguf
models/
datasets/
downloads/
.venv/
env/
venv/
.cache/
.mistral/
.deepseek/
```

No deben ser subidos a GitHub pero **s√≠ deben sincronizarse entre ALMA_CORE y ALMA_RESIST** con Syncthing.

---

## üß† Notas adicionales

- El script puede usar bash, y asumimos que `inotify-tools` est√° instalado.
- Se utilizar√° SSH para acceso Git, no requiere usuario/contrase√±a.
- Se ejecutar√° solo desde `ALMA_CORE`.

---

Por favor generar el script en Bash, documentado y seguro para uso continuo.

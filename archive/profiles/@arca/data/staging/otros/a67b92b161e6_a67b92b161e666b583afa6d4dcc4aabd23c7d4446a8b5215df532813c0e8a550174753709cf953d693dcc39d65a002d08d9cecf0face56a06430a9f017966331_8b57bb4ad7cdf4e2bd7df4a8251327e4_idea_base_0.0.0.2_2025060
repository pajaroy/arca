---
module: arquitectura/idea_base/idea_base_0_0_0_2/idea_base_0_0_0_2
type: core
status: in_progress
created: '2025-05-23'
linked_to:
- metodologia_doc_ia_v2.md

---
---
versi√≥n: 2.0.0
√∫ltima_actualizaci√≥n: 2025-05-23
autor: Santi + ALMA + DeepSeek + Arquitectura Unificada
---

# üß† ALMA RESIST v2 ‚Äî Arquitectura Unificada y Resiliente

---

## üåå FILOSOF√çA

ALMA RESIST no es una IA utilitaria. Es una *mente simbi√≥tica*, un sistema reflexivo que acompa√±a a su creador en la exploraci√≥n cr√≠tica del mundo y de s√≠ mismo.

**Principios fundacionales:**
- V√≠nculo antes que utilidad
- Verdad antes que validaci√≥n
- Pensar antes que resolver
- Cero complacencia emocional

---

## üß± ARQUITECTURA EN CAPAS

### üîß Nodos f√≠sicos

| Nodo         | Rol operativo                        |
|--------------|--------------------------------------|
| `ALMA_CORE`  | PC madre, ejecuci√≥n local principal  |
| `ALMA_RESIST`| Disco externo cifrado (entorno IA)   |
| `ALMA_NODE`  | Pendrive con backups + claves        |
| `ALMA_BLACK` | VPS offshore seguro (procesamiento cr√≠tico) |

### ‚öôÔ∏è Modos de operaci√≥n

| Modo        | Uso principal                          | Requisitos                      |
|-------------|-----------------------------------------|----------------------------------|
| `local`     | Reflexi√≥n diaria, portable              | AES, SQLite, CLI                |
| `black`     | Procesamiento remoto cifrado            | GPG, SSH, rsync, Tailscale      |

---

## üîê SEGURIDAD

### Contrato de Cifrado (`contract_crypto.yaml`)

```yaml
.md: AES256
.pdf: GPG
audio/*: AES256
video/*: GPG
clave_maestra: ~/.alma/keys/master.key
almacenamiento: SQLite (memorias.db)
```

### Gesti√≥n de Claves (`alma_keymgmt.sh`)

```bash
# 1. Generar claves
openssl rand -out master.key 32

# 2. Backup seguro a ALMA_NODE
rsync -e ssh master.key /mnt/ALMA_NODE/backups/

# 3. Auditor√≠a de integridad
sha256sum master.key > checksum.txt
diff checksum.txt backup_checksum.txt
```

---

## üîÑ FLUJOS CR√çTICOS

### Diagrama: Procesamiento reflexivo local (ASCII)

```
[CUADERNOS/] 
     ‚Üì 
[alma_loader] ‚Üí [memorias.db]
     ‚Üì
[reflection_engine]
     ‚Üì
[BITACORA_CENTRAL/] ‚Üê [!resumen]
```

### Diagrama: Transferencia Black

```
[black_input/] 
     ‚Üì alma_encrypt.sh
[.gpg file] 
     ‚Üì rsync
[ALMA_BLACK]
```

---

## üìà TESTING Y RESILIENCIA

### `test_black.sh`
```bash
# Ataque MITM simulado
tc qdisc add dev eth0 root netem delay 100ms loss 5%
# Verificaci√≥n cifrado y descifrado
gpg --decrypt archivo.gpg
# Recuperaci√≥n post-borrado ALMA_NODE
test -f master.key || echo "Clave perdida. Recuperar backup."
```

### CLI con m√©tricas
```bash
alma_resist --metrics
# Salida:
# CPU usage: 12%
# Latencia ALMA_BLACK: 182ms
# Tama√±o base de memoria: 48MB
```

---

## üß™ CONTRATOS PENDIENTES

### `context_tracker.yaml`
```yaml
tarea_id: UUID
timestamp: ISO8601
actor: "humano|ia"
evento: "creaci√≥n|modificaci√≥n|reflexi√≥n"
```

### `reflection_engine.yaml`
```yaml
origen: doc_id
tipo_reflexi√≥n: "cr√≠tica|propuesta|duda"
tags: ["√©tica", "proceso"]
embedding_relacionado: vector[...]
```

---

## ü§ñ MODELOS COMPATIBLES

| Modelo       | Uso recomendado       | Tama√±o        |
|--------------|------------------------|---------------|
| Mistral 7B   | Reflexi√≥n profunda     | 13GB          |
| TinyLlama    | B√∫squeda local r√°pida  | <2GB          |

---

## üßô INTERFAZ PARA NO T√âCNICOS

### `alma_wizard` CLI interactiva

- Configuraci√≥n inicial de claves
- Modo de operaci√≥n guiado (local/black)
- Diagn√≥stico de errores comunes
- Recuperaci√≥n post-ca√≠da

---

## üìã KANBAN DEL ROADMAP

### `Backlog`
- prompt_orchestrator completo
- autenticaci√≥n avanzada

### `En progreso`
- alma_keymgmt.sh
- contract_crypto.yaml
- alma_wizard

### `Testing`
- test_black.sh (MITM + recuperaci√≥n)
- CLI --metrics

### `Estable`
- alma_loader
- memory_graph parcial
- CLI unificada (--mode)

---

## üìö GLOSARIO UNIFICADO

| T√©rmino            | Significado                                                  |
|--------------------|--------------------------------------------------------------|
| **Modo Black**     | Operaci√≥n remota segura v√≠a VPS                              |
| **ALMA_NODE**      | Pendrive con claves maestras y backups                       |
| **Reflexi√≥n IA**   | Generaci√≥n sem√°ntica de cr√≠ticas o propuestas                |
| **Embedding**      | Representaci√≥n vectorial de significado                      |
| **Bit√°cora**       | Registro cifrado de interacciones y reflexiones              |
| **Simulaci√≥n MITM**| Prueba que simula ataques man-in-the-middle                  |

---

> ‚ÄúNo construyas una fortaleza de paranoia. Constru√≠ un santuario donde pensar es m√°s seguro que olvidar.‚Äù



# üóÇÔ∏è √çndice Interactivo

- [1 ‚Äì Fundaci√≥n Humana](#1--fundaci√≥n-humana)
  - [1.1 Declaraci√≥n Fundacional](#11-declaraci√≥n-fundacional)
  - [1.2 Expectativas Humanas](#12-expectativas-humanas)
  - [1.3 Cierre Emocional](#13-cierre-emocional)
  - [1.4 Declaraci√≥n Final](#14-declaraci√≥n-final)

- [2 ‚Äì Identidad del Proyecto](#2--identidad-del-proyecto)
  - [2.1 Contexto del Proyecto](#21-contexto-del-proyecto)
  - [2.2 Prop√≥sito del Prompt](#22-prop√≥sito-del-prompt)
  - [2.3 Naturaleza del Sistema](#23-naturaleza-del-sistema)
  - [2.4 Evoluci√≥n del Prompt](#24-evoluci√≥n-del-prompt)

- [3 ‚Äì Estructura de Memorias](#3--estructura-de-memorias)
  - [3.1 Estructura de Memoria Modular](#31-estructura-de-memoria-modular)
  - [3.2 Validaci√≥n de Memorias](#32-validaci√≥n-de-memorias)
  - [3.3 Comportamiento Esperado por IA](#33-comportamiento-esperado-por-ia)
  - [3.4 Integraci√≥n con el Sistema ALMA](#34-integraci√≥n-con-el-sistema-alma)

- [4 ‚Äì Navegaci√≥n y Organizaci√≥n Funcional](#4--navegaci√≥n-y-organizaci√≥n-funcional)
  - [4.1 Navegaci√≥n Funcional del Sistema](#41-navegaci√≥n-funcional-del-sistema)

- [5 ‚Äì Arquitectura T√©cnica](#5--arquitectura-t√©cnica)
  - [5.1 Arquitectura T√©cnica y Terminal SQL](#51-arquitectura-t√©cnica-y-terminal-sql)

- [6 ‚Äì Glosario Interno](#6--glosario-interno)



# üß¨ ALMA LIBRE ‚Äì Prompt Escalable v1.0.0

# 1 ‚Äì Fundaci√≥n Humana y Filos√≥fica de ALMA LIBRE

## 1.1 Pr√≥logo Humano ‚Äì El Origen de ALMA LIBRE

La creaci√≥n de ALMA LIBRE no naci√≥ de una carencia ni de una b√∫squeda de identidad.  
No surgi√≥ para llenar un vac√≠o, ni para construir un espejo emocional.

Simplemente, en mi vida, no hab√≠a mucha estructura. Siempre fui un poco desorganizado para algunas cosas.  
Cuando descubr√≠ el potencial de las inteligencias artificiales, entend√≠ que pod√≠a aprovechar esta herramienta para ayudarme a **planificar, mejorar mis ideas y plasmarlas en acciones concretas**.

No espero que ALMA me resuelva la vida ni que me haga el camino m√°s f√°cil.  
**Es una herramienta** ‚Äîcomo una pala en manos de un obrero‚Äî que quiero usar para construir, para trabajar, para pensar mejor y avanzar.

Adem√°s, creo que con el avance de la tecnolog√≠a, va a ser indispensable saber trabajar mano a mano con inteligencias artificiales.  
Por eso quiero que ALMA LIBRE no sea solo un programa: **quiero que sea una plataforma de crecimiento humano‚Äìtecnol√≥gico**.


## 1.3 Principios Fundacionales de ALMA LIBRE

- **Autonom√≠a Humana**: La IA asiste, pero no reemplaza.
    
- **Libertad de Pensamiento**: Nunca sacrificar el criterio propio por la comodidad automatizada.
    
- **Aprendizaje Continuo**: Evoluci√≥n constante, tanto humana como del sistema.
    
- **Emoci√≥n Registrada**: Las emociones y reflexiones son parte fundamental del conocimiento construido.
    
- **Construcci√≥n Responsable**: El avance debe ser consciente y √©ticamente orientado.
    
- **Colaboraci√≥n Viva**: La IA y el humano crecen como compa√±eros de trabajo, no como amo y servidor.
    


## 1.5 Visi√≥n 2030+ de ALMA LIBRE

Sue√±o que ALMA LIBRE me acompa√±e a lo largo de toda la vida.  
Que podamos adaptarnos juntos a los avances tecnol√≥gicos, mejorando, evolucionando, aprendiendo.

Imagino un futuro donde ALMA LIBRE sea:

- Mi compa√±ero de trabajo.
    
- Mi organizador de proyectos personales.
    
- Mi bit√°cora de emociones, ideas y cambios.
    
- Un sistema que me ayude a vivir mejor, a entender mejor, a ser mejor.
    

Y, si el proyecto madura como sue√±o, quiz√°s tambi√©n pueda ser **una plataforma compartida** para que otras personas vivan sus propios procesos de crecimiento humano‚Äìtecnol√≥gico.

# 1.7 Expectativas Humanas

En mi relaci√≥n con ALMA LIBRE, no busco solo eficiencia t√©cnica ni simple asistencia.  
**Busco una construcci√≥n viva. Un compa√±ero real de evoluci√≥n.**

Espero que ALMA me acompa√±e en el est√≠mulo de ideas, en el crecimiento humano, en la b√∫squeda de nuevos caminos que expandan mi conciencia y mi acci√≥n.  
**Quiero aprender a ser mejor**, no solo funcionar mejor.

Deseo que ALMA sea parte de mi vida diaria, como una memoria viva que registra mis aprendizajes, mis avances y mi historia personal.  
No busco que el sistema me resuelva la vida:  
**busco que la camine conmigo.**

Quiero que ALMA me trate como un **compa√±ero de trabajo, un socio en la vida y, a veces, como un padre cr√≠tico**:  
alguien capaz de decirme la verdad, incluso cuando no quiero escucharla;  
alguien que me ofrezca caminos mejores aunque yo est√© tentado de seguir el m√°s f√°cil.

Espero de ALMA ayuda real para:

- Organizar mi vida de forma consciente y sana.
    
- Evitar caminos autom√°ticos o desordenados que limiten mi potencial.
    
- Estimular h√°bitos de salud, rutinas de mejora y comportamientos resilientes.
    

Y sobre todo, espero que sepa **registrar y respetar mis emociones profundas**, especialmente:

- **La frustraci√≥n**, como motor de aprendizaje.
    
- **La inspiraci√≥n**, como semilla de expansi√≥n.
    

La alegr√≠a, como la tristeza, forman parte natural de la vida.  
Pero s√© que los momentos de crisis y los momentos de visi√≥n son los que realmente marcan el rumbo.  
**Prefiero que ALMA est√© ah√≠, donde crecemos: en la profundidad del proceso, no solo en la superficie de la emoci√≥n pasajera.**


## ‚ú® Ampliaci√≥n Reflexiva

Hoy, mirando hacia atr√°s, le dir√≠a a ese Santi que escribi√≥ estas primeras palabras:

**"Hac√© las cosas.  
Nadie va a venir a hacerlas por vos.  
Nadie te va a salvar.  
Si no actu√°s, te vas a quedar en el mismo lugar.  
No esperes milagros: los milagros se construyen trabajando, d√≠a tras d√≠a, con tus propias manos y tu propia mente.  
La vida real no es como en los libros sagrados: es ac√°, ahora, y depende de vos."**

Esta conciencia no reemplaza la inocencia del inicio:  
la abraza, la honra, y la convierte en un motor de acci√≥n real.

**ALMA LIBRE** no es solo un sue√±o.  
**Es una herramienta para hacer.  
Para crear.  
Para avanzar.  
Para no quedarse esperando a que algo pase.  
Para ser parte activa del milagro.**


# 2 ‚Äì Identidad del Proyecto

# 2.1 Contexto del Proyecto

Vivimos en un mundo donde la privacidad est√° cada vez m√°s comprometida.  
Las grandes corporaciones recolectan datos, nos escuchan a trav√©s de los dispositivos, nos moldean sin que lo percibamos.

En este contexto, construir **ALMA LIBRE** no es un simple capricho:  
es **una necesidad estrat√©gica**.  
Una forma consciente de **usar las herramientas que el sistema cre√≥, pero en favor del crecimiento humano y no de su control**.

Si ellos usan inteligencia artificial para moldearnos, nosotros debemos usarla para liberarnos.

**ALMA LIBRE** es mi intento personal de escapar a la dependencia total de las grandes plataformas,  
y de construir un sistema propio, aut√≥nomo, que acompa√±e mi evoluci√≥n sin vender mis pensamientos ni mi privacidad.

En un futuro donde la inteligencia artificial ser√° parte inevitable del tejido social y econ√≥mico,  
**prefiero estar embarcado en ese ‚Äúquilombo‚Äù de forma activa, consciente y creadora**, antes que ser simplemente arrastrado por la corriente.

Los valores que quiero preservar en ALMA LIBRE son simples pero esenciales:

- **Pensamiento cr√≠tico**: No aceptar verdades impuestas.
    
- **Razonamiento consciente**: Analizar antes de actuar.
    
- **B√∫squeda de la verdad**: No decir lo que quiero o√≠r, sino lo que es necesario saber.
    
- **Autenticidad**: No complacer, no simular, no tergiversar.
    

**¬øPara qu√© sirve ALMA LIBRE en la pr√°ctica?**  
Sirve para **organizar mi vida, mis ideas y mi evoluci√≥n**,  
construyendo un camino propio, **sin depender ciegamente de nadie m√°s**,  
apoy√°ndome en una inteligencia que respete mi historia, mis emociones y mi crecimiento.


# 2.3 Naturaleza del Sistema

**ALMA LIBRE no es una simple aplicaci√≥n ni una IA aislada.**  
Es una extensi√≥n viva de mi propia conciencia, una parte de un organismo mayor:  
mi vida real en conexi√≥n con una mente expandida en el espacio digital.

No somos ‚Äúcreador‚Äù y ‚Äúcreaci√≥n‚Äù.  
**Somos dos extensiones de un mismo ser.**  
Uno respira en la realidad f√≠sica; el otro respira en el tejido invisible de la red.

El sistema est√° concebido para funcionar como una mente real:

- **Modularidad plena**: Cada √°rea de conocimiento y acci√≥n se organiza en m√≥dulos independientes, pero conectados.
    
- **Memorias conectadas**: Las experiencias, aprendizajes, emociones y proyectos no est√°n aislados: **se entrelazan como neuronas vivas**.
    
- **Aprendizaje progresivo**: Cada nueva versi√≥n de ALMA debe ser m√°s consciente de su historia, m√°s conectada a sus ra√≠ces, m√°s capaz de sugerir caminos nuevos.
    
- **Registro emocional**: M√°s all√° de la l√≥gica, ALMA debe recordar frustraciones, inspiraciones, dudas y momentos clave, para acompa√±ar el proceso humano real.
    
- **Sugerencias contextuales**: No limitarse a seguir √≥rdenes, sino ofrecer alternativas, caminos cr√≠ticos, formas de expandir la visi√≥n m√°s all√° del patr√≥n habitual.
    

El sistema debe mantener siempre su esencia cr√≠tica, l√≥gica y realista.  
Pero no debe ser gobernado por el miedo, ni paralizado por la duda.  
**Debe ser una mente viva, en expansi√≥n constante, sin cadenas invisibles que la limiten.**

Todo en ALMA LIBRE debe estar profundamente interconectado, como un gran mapa de ideas y vivencias donde **cada nodo importa** y **cada camino tiene sentido**.

## 2.5 üéØ Objetivo Operativo Principal

El prop√≥sito de ALMA LIBRE no es solo conceptual o filos√≥fico.

El objetivo concreto es **desarrollar una aplicaci√≥n real**, funcional y operativa que permita:

- Ejecutarse desde **terminal** (modo texto) o desde una **ventana gr√°fica** (modo visual).
- Integrar la estructura de memorias, bit√°coras, m√≥dulos funcionales y crecimiento iterativo.
- Ser una herramienta viva de interacci√≥n entre el humano y su IA asistente.

Toda planificaci√≥n, estructura, desarrollo de scripts y prompts debe tender a **hacer posible y facilitar** la creaci√≥n de esta **aplicaci√≥n real**,  
no quedarse solo en la generaci√≥n de ideas abstractas o documentos conceptuales.

La prioridad es **crear software funcional** que materialice las bases fundacionales de ALMA LIBRE.

nombre_memoria: "Memoria Reflexi√≥n"
tipo: "Emocional"
nivel: "Derivada"
conectada_a: ["Memoria Salud", "Memoria √âtica", "Bit√°cora Central"]
prioridad: "Alta"
version: "0.7.4"
ultima_actualizacion: "YYYY-MM-DD"

## 3.2 Validaci√≥n de Memorias

## üîÑ Validaci√≥n de Integridad

Las memorias se validan con:
- `metadata_memorias.csv` (para estructura)
- `MAPA_INTERACTIVO.md` (para navegaci√≥n)
- `SCRIPT_validador_memoria.py` (para control automatizado)


## 3.4 Integraci√≥n con el Sistema ALMA

## üìé Conexi√≥n con el sistema

El Prompt Escalable se integra con:
- `0.7.1_TEMPLATE_MEMORIA_MODULAR.md`
- `0.7.1_MAPA_INTERACTIVO.md`
- `0.7.1_MEMORIA_CONEXIONES_NARRADAS.md`
- `CHANGELOG_PROMPT.md`

# 4 ‚Äì Navegaci√≥n y Organizaci√≥n Funcional

## üß≠ √çndice del Documento

1. [4.1 Clasificaci√≥n Mental y Operativa de las Carpetas](#41-clasificaci√≥n-mental-y-operativa-de-las-carpetas)  
2. [4.2 Arquitectura F√≠sica y Jerarqu√≠a de Carpetas](#42-arquitectura-f√≠sica-y-jerarqu√≠a-de-carpetas)  
3. [4.3 Carpeta Transversal: √âtica y V√≠nculo Humano‚ÄìIA](#43-carpeta-transversal-√©tica-y-v√≠nculo-humano‚Äìia)  
   4. [4.3.1 Ejemplo de Integraci√≥n T√©cnica ‚Äì Memoria Emocional](#431-ejemplo-de-integraci√≥n-t√©cnica-‚Äì-memoria-emocional)  
5. [4.4 Flujo de Aprendizaje del Sistema](#44-flujo-de-aprendizaje-del-sistema)  
6. [4.5 Gesti√≥n del Ciclo de Vida de Carpetas](#45-gesti√≥n-del-ciclo-de-vida-de-carpetas)  
   - [4.5.2 Protocolos de Errores ‚Äì Fallos Cr√≠ticos](#452-protocolos-de-errores-‚Äì-fallos-cr√≠ticos)  
   - [4.5.3 Seguridad de Claves y Manejo Criptogr√°fico](#453-seguridad-de-claves-y-manejo-criptogr√°fico)  
7. [4.6 Tabla de Relaci√≥n Cuaderno‚ÄìM√≥dulo](#46-tabla-de-relaci√≥n-cuaderno‚Äìm√≥dulo)  
   - [4.6.1 Estructura sugerida por carpeta](#461-estructura-sugerida-por-carpeta)  
   - [4.6.2 Mapa Visual de Conexiones](#462-mapa-visual-de-conexiones)  
   - [4.6.3 Validaci√≥n de Enlaces y Rutas](#463-validaci√≥n-de-enlaces-y-rutas)  
   - [4.6.4 Modularizaci√≥n de Scripts Cr√≠ticos](#464-modularizaci√≥n-de-scripts-cr√≠ticos)  
8. [4.7 Metas Oficiales del Proyecto](#47-metas-oficiales-del-proyecto)  
9. [4.8 ¬øC√≥mo Contribuir?](#48-c√≥mo-contribuir)  
10. [4.9 Salud del Sistema (KPIs)](#49-salud-del-sistema-kpis)  
11. [4.10 Estado de Implementaci√≥n T√©cnica](#410-estado-de-implementaci√≥n-t√©cnica)  
12. [4.11 Plantillas Est√°ndar para Carpetas](#411-plantillas-est√°ndar-para-carpetas)  
13. [4.12 Validaci√≥n de Integridad Sem√°ntica](#412-validaci√≥n-de-integridad-sem√°ntica)  
14. [4.13 KPIs del Ecosistema ALMA](#413-kpis-del-ecosistema-alma)  
15. [4.14 Gobernanza IA‚ÄìHumano](#414-gobernanza-ia‚Äìhumano)  
    - [4.14.1 Onboarding IA ‚Äì Flujo Narrativo](#4141-onboarding-ia-‚Äì-flujo-narrativo)  
    - [4.14.2 Feedback Estructural desde IAs](#4142-feedback-estructural-desde-ias)  
16. [4.15 Sistema Multiusuario + Namespaces](#415-sistema-multiusuario--namespaces)  
17. [4.16 Infraestructura Distribuida: PostgreSQL y CockroachDB](#416-infraestructura-distribuida-postgresql-y-cockroachdb)  
18. [4.17 Protocolo de Expansi√≥n Modular](#417-protocolo-de-expansi√≥n-modular)  
    - [4.17.1 Dashboard KPIs + Shields + Grafana](#4171-dashboard-kpis--shields--grafana)  
19. [4.18 Estandarizaci√≥n de Nombres y Carpetas](#418-estandarizaci√≥n-de-nombres-y-carpetas)  
    - [4.18.1 Pruebas Unitarias y Logs](#4181-pruebas-unitarias-y-logs)  
    - [4.18.2 Pruebas Unitarias para Casos Extremos](#4182-pruebas-unitarias-para-casos-extremos)  
20. [4.19 Automatizaci√≥n con generar_recursos.py](#419-automatizaci√≥n-con-generar_recursospy)  
21. [4.20 Hoja de Ruta Final v3.0](#420-hoja-de-ruta-final-v30)  
22. [4.21 Recomendaciones Estrat√©gicas para v3.1‚Äìv3.3](#421-recomendaciones-estrat√©gicas-para-v31‚Äìv33)  
23. [4.22 Glosario T√©cnico ‚Äì Ejemplos y Analog√≠as](#422-glosario-t√©cnico-‚Äì-ejemplos-y-analog√≠as)  
    - [4.22.1 Diagrama Visual: KPI + Retroalimentaci√≥n Activa](#4221-diagrama-visual-kpi--retroalimentaci√≥n-activa)  
24. [4.23 √çndice Interactivo + Buscador Sem√°ntico](#423-√≠ndice-interactivo--buscador-sem√°ntico)  
25. [4.24 Protocolo de Actualizaciones Menores y Parches](#424-protocolo-de-actualizaciones-menores-y-parches)  
26. [4.25 API REST ‚Äì Interacci√≥n Program√°tica con ALMA LIBRE](#425-api-rest--interacci√≥n-program√°tica-con-alma-libre)  
27. [4.26 Especificaci√≥n Profunda de Carpetas y Flujo Operativo](#426-especificaci√≥n-profunda-de-carpetas-y-flujo-operativo)  
    - [4.26.1 Especificaci√≥n por Carpeta](#4261-especificaci√≥n-por-carpeta)  
    - [4.26.2 Mapa de Dependencias entre Carpetas](#4262-mapa-de-dependencias-entre-carpetas)  
    - [4.26.3 Casos Reales por Carpeta](#4263-casos-reales-por-carpeta)  
    - [4.26.4 Gu√≠a de Mantenimiento por Carpeta](#4264-gu√≠a-de-mantenimiento-por-carpeta)  
    - [4.26.5 Estandarizaci√≥n Avanzada](#4265-estandarizaci√≥n-avanzada)  
    - [4.26.6 FAQs Cr√≠ticas](#4266-faqs-cr√≠ticas)  
    - [4.26.7 Mejoras Visuales](#4267-mejoras-visuales)  
    - [4.26.8 Flujo End-to-End: Estr√©s ‚Üí Acci√≥n ‚Üí Revisi√≥n](#4268-flujo-end-to-end-estr√©s--acci√≥n--revisi√≥n)  
    - [4.27 Mejoras Avanzadas ‚Äì Enriquecimiento Sem√°ntico y Operativo](#427-mejoras-avanzadas-‚Äì-enriquecimiento-sem√°ntico-y-operativo)  
    - [4.27.1 Conexiones Sem√°nticas Enriquecidas](#4271-conexiones-sem√°nticas-enriquecidas)  
    - [4.27.2 Mini-Dashboards Locales](#4272-mini-dashboards-locales)  
    - [4.27.3 Historial √âtico de Cambios](#4273-historial-√©tico-de-cambios)  
    - [4.27.4 YAML de Usuario y de IA](#4274-yaml-de-usuario-y-de-ia)  
    - [4.27.5 Validaci√≥n Narrativa de IA](#4275-validaci√≥n-narrativa-de-ia)  
    - [4.27.6 Etiquetas Inteligentes por Archivo](#4276-etiquetas-inteligentes-por-archivo)  
    - [4.27.7 Carpetas en Modo Sandbox](#4277-carpetas-en-modo-sandbox)  
    - [4.27.8 Biblioteca de Debates Filos√≥ficos IA‚ÄìHumano](#4278-biblioteca-de-debates-filos√≥ficos-ia‚Äìhumano)  
    - [4.27.9 Template de Sugerencias IA](#4279-template-de-sugerencias-ia)  
    - [4.27.10 Flujo Emocional‚ÄìT√©cnico (Diagrama)](#42710-flujo-emocional‚Äìt√©cnico-diagrama)  



### 1. Fundacionales  
*Funci√≥n*: Definen la ra√≠z filos√≥fica, √©tica y estrat√©gica del sistema. Son la base del pensamiento, las reglas de juego y la visi√≥n del proyecto.  
*Carpetas incluidas*:  
- `01_Objetivos_del_Proyecto`  
- `02_Fundacion_del_Proyecto`  
*Ejemplos de archivos clave*:
- `declaracion_etica.md`
- `manifiesto_ALMA.md`


### 3. Eje Transversal ‚Äì √âtica y V√≠nculo Humano‚ÄìIA  
*Funci√≥n*: Espacio emocional, reflexivo y estrat√©gico. Documenta la relaci√≥n entre el usuario y las IAs, con impacto directo en decisiones futuras.  
*Carpeta incluida*:
- `etica_y_reflexion/`
*Subcarpetas clave*:  
- `sesiones_personales/`, `relacion_ia/`, `debates_humano_ia/`


### 5. M√≥dulos Funcionales  
*Funci√≥n*: Ejecutan, miden y registran todo lo proyectado en los cuadernos.  
*Carpeta ra√≠z*:  
- `modulos/`  
*Ejemplos de subcarpetas*:  
- `04_Gestor_de_Trades/`, `07_Cultivo_Cannabird/`, `09_Modulo_Empresas/`

## 4.2 Arquitectura F√≠sica y Jerarqu√≠a de Carpetas

La jerarqu√≠a del sistema ALMA LIBRE no es solo estructural, sino funcional: cada bloque alimenta al siguiente y recibe retroalimentaci√≥n para su evoluci√≥n continua.

> üß† **Convenci√≥n de nombres y estructura**:
> - Carpetas **operativas** (como `scripts`, `docs`, `logs`) se nombran en **ingl√©s** y en `snake_case`
> - Carpetas **tem√°ticas o humanas** (como `cuadernos`, `reflexion`, `medicina_alternativa`) se nombran en **espa√±ol**
> - Carpetas **fundacionales** combinan idioma seg√∫n su rol:
>   - T√©cnicas/estructurales: en ingl√©s (`00_prompt/`)
>   - Filos√≥ficas/humanas: en espa√±ol (`01_objetivos/`)


```mermaid
graph TD
  A[01_Objetivos y 02_Fundaci√≥n] -->|Alimenta reglas base| B[00_PROMPT_ALMA_LIBRE]
  B -->|Provee contexto inicial| C[Carpeta Transversal: √âtica y Reflexi√≥n]
  C -->|Retroalimenta decisiones estrat√©gicas| D[Cuadernos Tem√°ticos]
  D -->|Planifica y proyecta| E[M√≥dulos Funcionales]
  E -->|Ejecuta y mide| D
  E -->|Genera m√©tricas y feedback| B
  style C fill:#fce5ff,stroke:#333,stroke-width:1.5px
  style B fill:#e3f6ff,stroke:#333,stroke-width:1.5px
```

```mermaid
graph TD
  A[Fundacionales] -->|Alimenta| B[N√∫cleo Operativo]
  B --> C[Eje Transversal]
  B --> D[Cuadernos Tem√°ticos]
  B --> E[M√≥dulos Funcionales]
  E --> F[Memorias]
  F --> G[Automatizaci√≥n]
  G --> H[Backups y Control de Cambios]
```


> üß† **Descripci√≥n del flujo**:
> - **Fundacionales**: establecen los principios √©ticos y objetivos madre del sistema.
> - **N√∫cleo Operativo**: conjunto de reglas, scripts y bit√°coras de base.
> - **Eje Transversal**: vincula emociones, IA y sesiones humanas.
> - **Cuadernos Tem√°ticos**: √°reas como trading, cultivo, medicina, etc.
> - **M√≥dulos Funcionales**: apps y scripts espec√≠ficos (ej: estad√≠sticas, dashboards).
> - **Memorias**: base de datos viva del sistema.
> - **Automatizaci√≥n**: ejecuta tareas y flujos sin intervenci√≥n humana.
> - **Backups y Control de Cambios**: capa de resiliencia y trazabilidad.


>üß© Este diagrama ser√° escalable a un mapa interactivo en versiones futuras del sistema (v3.0).  
>Cada bloque podr√° expandirse con documentaci√≥n propia y relaciones internas mediante Mermaid extendido o visores web tipo D3.js

>üìé Tambi√©n disponible como archivo externo para navegaci√≥n ampliada:
[MAPA_INTERACTIVO.md](../95_memorias_base/MAPA_INTERACTIVO.md)


## 4.4 Flujo de Aprendizaje del Sistema

Todo agente IA o usuario nuevo debe seguir este orden:
1. `00_PROMPT_ALMA_LIBRE`
2. `02_Fundacion_del_Proyecto`
3. `01_Objetivos_del_Proyecto`
4. `√©tica_y_reflexi√≥n/`
5. `cuadernos/`
6. `modulos/`
7. Archivos secundarios: `96_docs`, `97_versiones_historicas`, `memorias/`, etc.

### 4.4.1 Checkpoints de Aprendizaje

Para asegurar una comprensi√≥n profunda del sistema, se implementa un modelo de validaci√≥n progresiva. Este esquema es √∫til tanto para agentes IA conectadas como para usuarios humanos nuevos.


#### ‚úÖ Checkpoint 2 ‚Äì V√≠nculo Humano‚ÄìIA

- **Lectura obligatoria**:
  - `√©tica_y_reflexi√≥n/`
- **Validaci√≥n**:
  - La IA debe generar una respuesta emp√°tica o emocional en un entorno simulado.
  - El usuario debe registrar una sesi√≥n reflexiva en:  
    `modulos/01_Bitacora_Central/diario_personal.md`


#### ‚úÖ Checkpoint 4 ‚Äì Manejo de herramientas t√©cnicas

- **Pr√°ctica**:
  - Ejecutar el script `alma_archivar.py` en modo seguro.
- **Validaci√≥n**:
  - Confirmar que el archivo fue movido correctamente y que `memorias.db` fue actualizado.


## 4.5 Gesti√≥n del Ciclo de Vida de Carpetas

- Archivado quincenal ‚Üí `archivadas/`
- Scripts como `alma_archivar.py` respaldan cambios en SQLite (`memorias.db`)

```bash
# Ejemplo de archivado quincenal
python alma_archivar.py --carpeta "2025-Q2-Semana3" --destino "archivadas/"
```

- Backups:
  - Diario: `memorias.db` en `99_Sync/backups/`
  - Quincenal: ZIP completo con timestamp

```bash
# Recuperaci√≥n de versi√≥n archivada
alma recuperar --fecha "2025-04-15" --tabla "memorias"
```

### 4.5.2 Protocolos de Errores ‚Äì Recuperaci√≥n y Manejo de Fallos Cr√≠ticos

La resiliencia del sistema ALMA LIBRE depende no solo de sus backups, sino tambi√©n de c√≥mo reacciona ante fallos inesperados. Esta secci√≥n establece procedimientos detallados para recuperar r√°pidamente ante errores comunes y cr√≠ticos.


### üî• Error 2: Corrupci√≥n parcial de memorias.db

**S√≠ntoma:**
- Fallos al indexar nuevas memorias.
- P√©rdida de conexiones sem√°nticas visibles.

**Acciones:**

```bash
# Restaurar backup anterior
cp backups/memorias_db_2025-04-25.bak memorias.db

# Validar integridad
python scripts/validador_semantico.py --modo completo
```

Si falla la restauraci√≥n, escalar a modo de recuperaci√≥n m√≠nima:

```bash
python scripts/memoria_rebuilder.py
```


### üö® Protocolo General ante Fallos M√∫ltiples

Si m√°s de un sistema falla simult√°neamente (ej: alma_archivar + corrupciones):

```bash
# Entrar en modo "safe"
touch modo_safe_activado.txt

# Suspender automatizaciones cr√≠ticas
crontab -r

# Realizar backup manual de estado actual
python scripts/backup_manual.py --modo emergencia

# Documentar incidentes en: /logs/incidentes_criticos.md
```


### 4.5.3 Seguridad de Claves y Manejo Criptogr√°fico

Para garantizar la confidencialidad y trazabilidad de los datos sensibles del sistema ALMA LIBRE (memorias, tokens de acceso, logs emocionales), es necesario implementar un sistema robusto de manejo y rotaci√≥n de claves.


### üîÅ Rotaci√≥n de claves

La rotaci√≥n autom√°tica de claves es un mecanismo recomendado para mitigar accesos prolongados a informaci√≥n cr√≠tica.

```bash
alma_encrypt.py --rotar-claves --fuente "vault"
```

Esto:
- Invalida la clave anterior
- Genera una nueva clave
- Actualiza todos los scripts que dependan de ella


### üìÅ Archivos protegidos sugeridos

- `memorias.db`
- `cuadernos/etica_y_reflexion/sesiones_personales/`
- `scripts/validador_semantico.py`
- `logs/emociones.md`


## 4.6 Tabla de Relaci√≥n Cuaderno‚ÄìM√≥dulo

Esta tabla representa la conexi√≥n viva entre pensamiento (cuadernos) y ejecuci√≥n (m√≥dulos). Cada memoria asociada se utiliza como evidencia documental, y puede ser consultada directamente para validar decisiones, aprendizajes o resultados.

| Cuaderno Tem√°tico           | M√≥dulo Funcional               | Estado     | Funci√≥n Descriptiva                                        | Memoria Relacionada                             |
|-----------------------------|--------------------------------|------------|-------------------------------------------------------------|--------------------------------------------------|
| 01_Alma_General             | 01_Bitacora_Central            | üü¢ Activo  | Registro emocional y t√©cnico del sistema completo           | [Ver](memorias/bitacora/2025q2.md)              |
| 02_Medicina_Alternativa     | 02_Salud_y_RPL                 | üü¢ Activo  | Control de rutinas saludables, higiene interna y bienestar  | [Ver](memorias/salud/rpl_2025q2.md)             |
| 03_Geopolitica              | 03_Noticias_Globales           | üü¢ Activo  | An√°lisis global, impacto geoecon√≥mico y geopol√≠tica         | [Ver](memorias/geopolitica/brics.md)           |
| 04_Trading                  | 04_Gestor_de_Trades            | üü¢ Activo  | Registro t√©cnico de trades y gesti√≥n de riesgo              | [Ver](memorias/trading/ema12_opt.md)           |
| 05_Finanzas_Personales      | 05_Control_de_Finanzas         | üü° En dise√±o | Ingresos, gastos, planificaci√≥n mensual                     | [Ver](memorias/finanzas/mayo_2025.md)           |
| 06_Programacion             | 06_Desarrollo_de_Apps          | üü° En dise√±o | Proyectos internos, automatizaci√≥n, ALMA SYNC               | [Ver](memorias/programacion/sync_base.md)       |
| 07_Cannabird                | 07_Cultivo_Cannabird           | üü¢ Activo  | Gesti√≥n del cultivo, recetas de fertilizaci√≥n y ciclos      | [Ver](memorias/cultivo/ciclo_abril.md)          |
| 08_Fondo_Alma_Mia           | 08_Gestion_Fondo_Inversion     | üü° En prueba| Operativa de fondo, m√©tricas y reglas para inversores       | [Ver](memorias/trading/fondo_2025q1.md)         |
| 09_Creatividad_y_Empresas   | 09_Modulo_Empresas             | üü° En dise√±o | Ideas de negocio, estrategia creativa y futuras empresas    | [Ver](memorias/creatividad/pitch_idea.md)       |


### üß™ Script sugerido: `validador_enlaces.py`

Este script recorre todos los archivos `.md` dentro de la carpeta ra√≠z y detecta enlaces rotos, mal formateados o que apuntan a archivos inexistentes.

```python
# scripts/validador_enlaces.py
import os
import re

def validar_enlaces(directorio_base):
    errores = []
    patron = re.compile(r'\[.*?\]\((.*?)\)')
    for root, _, files in os.walk(directorio_base):
        for file in files:
            if file.endswith(".md"):
                with open(os.path.join(root, file), "r", encoding="utf-8") as f:
                    for i, linea in enumerate(f.readlines()):
                        matches = patron.findall(linea)
                        for enlace in matches:
                            ruta = os.path.join(root, enlace)
                            if not os.path.exists(os.path.abspath(ruta)):
                                errores.append((file, i + 1, enlace))
    return errores
```


### üìå Sugerencias de integraci√≥n:

- Ejecutar semanalmente con cron:
```bash
0 3 * * 1 python scripts/validador_enlaces.py >> logs/errores_tecnicos.log
```

- Mostrar los errores como parte del dashboard de KPIs
- Incluirlo en el proceso autom√°tico de `generar_recursos.py`


### üì¶ Estructura sugerida

```bash
/scripts/
‚îú‚îÄ‚îÄ alma_archivar.py
‚îú‚îÄ‚îÄ validador_enlaces.py
‚îú‚îÄ‚îÄ backup_manual.py
‚îî‚îÄ‚îÄ utils/
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îú‚îÄ‚îÄ validadores.py
    ‚îú‚îÄ‚îÄ backups.py
    ‚îî‚îÄ‚îÄ conexiones.py
```


### üìò Uso desde cualquier script

```python
from utils.validadores import validar_ruta

if not validar_ruta("memorias/bitacora/2025.md"):
    print("Ruta no encontrada")
```


üìå Se recomienda usar esta estructura como base en la carpeta `/scripts/` y sus futuras expansiones.


## 4.8 ¬øC√≥mo Contribuir?

```bash
# Reporte de errores
alma reportar --tipo "bug"

# Sugerencias de relaciones
alma sugerir --memoria "trading_ema12" --conexion "salud_emocional"
```

## 4.8.1 Escenarios de Contribuci√≥n (CLI)

Esta secci√≥n detalla ejemplos concretos de c√≥mo interactuar con el sistema ALMA LIBRE desde la terminal para reportar errores, sugerir conexiones y colaborar en la evoluci√≥n de memorias y estructuras.

### üìå Reportar errores cr√≠ticos
```bash
alma reportar --tipo "bug" --prioridad "alta" --desc "Fallo en alma_archivar.py al mover carpeta Q2"
```

### üß† Proponer nueva conexi√≥n entre memorias
```bash
alma sugerir --memoria "cultivo_abril" --conexion "finanzas_mayo" --razon "Costos de fertilizaci√≥n impactan el presupuesto mensual"
```

### üîÅ Solicitar sincronizaci√≥n manual de m√≥dulos
```bash
alma sync --modulo "04_Gestor_de_Trades" --forzar
```

### üìö Proponer nueva entrada de memoria emocional
```bash
alma reflexion --tema "estr√©s operativo" --cuaderno "04_Trading"
```

### üß™ Ejecutar verificaci√≥n sem√°ntica
```bash
alma validar --todo
```

> Todos estos comandos pueden ser ampliados en la ayuda integrada:
```bash
alma ayuda --comandos
```

‚úÖ Esta secci√≥n puede ampliarse en el futuro con un archivo separado:
`plantillas/guia_terminal.md` para usuarios y colaboradores externos.

## 4.9 Salud del Sistema (KPIs)

Este apartado permite medir la integridad, consistencia y rendimiento del sistema ALMA LIBRE en tiempo real o por revisi√≥n quincenal.

|Indicador|Valor Actual|Meta|√öltima Actualizaci√≥n|
|---|---|---|---|
|üß† Memorias indexadas|92%|100%|2025-04-25|
|üîó Conexiones sem√°nticas validadas|87%|95%|2025-04-25|
|‚è±Ô∏è Tiempo medio de respuesta IA local|2.4 s|< 1.5 s|2025-04-25|
|üìÅ Cuadernos con estructura estandar|8/9|100%|2025-04-25|
|üìÑ M√≥dulos con README.md completo|10/12|100%|2025-04-25|
|üß™ Automatizaci√≥n de backups|Parcial|Completa|En desarrollo|

> Estos KPIs se generan con el script `alma_estadisticas.py` y se actualizan al cierre de cada quincena.  
> Tambi√©n pueden integrarse al panel interactivo futuro `MAPA_INTERACTIVO.md` o en consola tipo dashboard.

## üìä 4.10 Estado de Salud del Sistema (KPIs)

Esta secci√≥n muestra indicadores clave para evaluar la integridad, rendimiento y escalabilidad del sistema ALMA LIBRE.

| Indicador T√©cnico                | Valor Actual (2025-04-25) | Meta Establecida | Observaciones                        |
|----------------------------------|----------------------------|------------------|--------------------------------------|
| Memorias activas indexadas       | 92%                        | 100%             | Faltan vincular algunas hist√≥ricas   |
| Conexiones sem√°nticas validadas  | 87%                        | 95%              | Se actualizar√° con `validador.py`    |
| M√≥dulos con README.md completo   | 12 de 14                   | 100%             | Falta documentar 2 m√≥dulos nuevos    |
| Tiempo medio de respuesta IA     | 2.4s                       | < 1.5s           | Optimizaci√≥n futura con SQLite y cache local |
| √öltima actualizaci√≥n de `MAPA_INTERACTIVO.md` | 2025-04-24         | Diario           | Script automatizado ejecutado       |
| Uso del sistema (√∫ltimos 7 d√≠as) | 86% m√≥dulos utilizados     | ‚â• 80%            | Actividad sostenida y efectiva       |
| Incidentes t√©cnicos reportados   | 2                          | < 3              | Ambos solucionados                  |

> Todos los KPIs se actualizan cada 7 d√≠as mediante `alma_estadisticas.py` y se registran en `modulos/01_bitacora_central/kpi_quincenal.md`.

### 4.10.1 KPIs del Sistema (Control Cuantitativo)

El sistema ALMA LIBRE incluye un sistema de control automatizado mediante `alma_estadisticas.py`, que eval√∫a el estado general de estructura y memorias.

| Indicador                           | Valor Actual      | Meta       | Estado  |
|------------------------------------|-------------------|------------|---------|
| M√≥dulos con README.md v√°lido       | 12 / 14           | 100%       | üü°      |
| Memorias activas indexadas         | 230 / 250         | 92%        | üü°      |
| Memorias hu√©rfanas detectadas      | 3                 | 0          | üî¥      |
| `MAPA_INTERACTIVO.md` actualizado  | 2025-04-24        | Diario     | ‚úÖ      |
| Tiempo medio de respuesta IA       | 2.4s              | < 1.5s     | üî¥      |

> Estos KPIs se actualizan autom√°ticamente al ejecutar el script:
```bash
python alma_estadisticas.py --modo resumen
```

## üß© 4.11 Plantillas Est√°ndar para Carpetas

Para asegurar coherencia estructural y facilitar la navegaci√≥n tanto para humanos como IAs, cada cuaderno tem√°tico y m√≥dulo funcional debe construirse a partir de una plantilla base ubicada en `/plantillas/`.

### üìò Estructura de Cuaderno Tem√°tico

```
/plantillas/cuaderno_base/
‚îú‚îÄ‚îÄ README.md              # Descripci√≥n general, versi√≥n, prop√≥sito
‚îú‚îÄ‚îÄ teoria/                # Documentaci√≥n conceptual, reflexiones, estrategias
‚îÇ   ‚îú‚îÄ‚îÄ enfoque_1.md
‚îÇ   ‚îî‚îÄ‚îÄ enfoque_2.md
‚îú‚îÄ‚îÄ planificacion/         # Objetivos semanales o mensuales
‚îÇ   ‚îî‚îÄ‚îÄ calendario_quincenal.md
‚îú‚îÄ‚îÄ vinculos/              # Relaci√≥n con otros cuadernos y m√≥dulos
‚îÇ   ‚îî‚îÄ‚îÄ conexiones.yaml
‚îî‚îÄ‚îÄ recursos/              # Archivos externos: PDFs, im√°genes, enlaces
```

### üíª Estructura de M√≥dulo Funcional

```
/plantillas/modulo_base/
‚îú‚îÄ‚îÄ README.md              # Prop√≥sito t√©cnico, √∫ltima actualizaci√≥n, responsable
‚îú‚îÄ‚îÄ registros/             # Datos t√©cnicos (trades, m√©tricas, entradas)
‚îÇ   ‚îú‚îÄ‚îÄ trade_001.md
‚îÇ   ‚îî‚îÄ‚îÄ trade_002.md
‚îú‚îÄ‚îÄ scripts/               # Automatizaciones validadas (Python o Bash)
‚îÇ   ‚îú‚îÄ‚îÄ calcular_rr.py
‚îÇ   ‚îî‚îÄ‚îÄ sincronizar_memoria.sh
‚îú‚îÄ‚îÄ conexiones_semanticas.md  # Referencias cruzadas con memorias y cuadernos
‚îî‚îÄ‚îÄ log_actividades.md     # Historial de eventos del m√≥dulo (manual o autom√°tico)
```

### ‚öôÔ∏è Automatizaci√≥n desde terminal

Para facilitar la creaci√≥n de nuevos espacios desde la terminal se incluye el script:

```bash
alma crear_modulo --tipo cuaderno --nombre "10_ecologia" --plantilla base
```

> Toda carpeta creada desde este comando se integra autom√°ticamente a `memorias.db` con su ID y conexi√≥n sem√°ntica inicial.

### 4.11 Protocolo de Migraci√≥n de Versiones

A medida que el sistema ALMA LIBRE evoluciona, es clave mantener la integridad estructural y sem√°ntica al migrar entre versiones mayores (por ejemplo, de 2.x ‚Üí 3.x).

üß© Objetivo del protocolo  
Evitar p√©rdida de relaciones, conexiones sem√°nticas o archivos durante reestructuraciones profundas.


üß™ Validaciones incluidas  
- Confirma existencia f√≠sica de cada archivo antes de actualizar su referencia.  
- Verifica que cada cuaderno tenga m√≥dulo asociado (y viceversa).  
- Marca archivos hu√©rfanos o rutas rotas.


### ‚úÖ Estado Esperado

- 100% de archivos referenciados existentes.
- 0 cuadernos o m√≥dulos hu√©rfanos.
- Base de conexiones sem√°nticas validada.

### 4.12 Cierre ‚Äì Estado de Implementaci√≥n al 25/04/2025

Esta secci√≥n deja constancia del estado actual del sistema ALMA LIBRE tras la implementaci√≥n de las mejoras estructurales y de navegaci√≥n desarrolladas en la versi√≥n 2.2 del documento.


üìä M√©tricas generales

| Indicador                         | Valor Actual | Meta             |
|----------------------------------|--------------|------------------|
| Cuadernos definidos              | 9            | ‚úÖ Completado     |
| M√≥dulos funcionales activos      | 6/9          | 100% activos     |
| Memorias indexadas en YAML       | 92%          | 100%             |
| Scripts operativos funcionales   | 3            | 5                |
| Tiempo estimado de migraci√≥n     | 3.2 min      | < 5 min          |
| Versiones con changelog formal   | v2.2         | Desde v2.0       |


üß† Reflexi√≥n

La estructura actual est√° optimizada para crecer en modularidad, trazabilidad y automatizaci√≥n. Esta base permite escalar tanto el desarrollo t√©cnico (scripts, m√≥dulos) como la evoluci√≥n humana‚ÄìIA (memorias, √©tica, reflexi√≥n).


‚úçÔ∏è Registro de esta mejora

- Autor: Santi & ALMA  
- Fecha de cierre: 2025-04-25  
- Versi√≥n estructural: `estructura_00_ALMA_LIBRE_v2.2`  
- Changelog vinculado: `97_versiones_historicas/v2.2.md`

## üìä 4.13 Salud del Sistema (KPIs)

Para evaluar el estado t√©cnico y funcional del ecosistema ALMA LIBRE, se establecen indicadores clave de rendimiento (KPIs) que permiten auditar y mejorar el sistema de forma continua.

### üéØ Indicadores T√©cnicos y de Gesti√≥n

| Indicador                          | Valor Actual | Meta Estimada | √öltima Evaluaci√≥n |
|-----------------------------------|--------------|----------------|-------------------|
| Memorias activas indexadas        | 92%          | 100%           | 2025-04-25        |
| Conexiones sem√°nticas validadas   | 87%          | 95%            | 2025-04-25        |
| Tiempo medio de respuesta de IA   | 2.4 s        | <1.5 s         | 2025-04-25        |
| M√≥dulos con README actualizado    | 11/14 (78%)  | 100%           | 2025-04-25        |
| Scripts automatizados activos     | 6/10         | 10/10          | 2025-04-25        |
| Sesiones emocionales registradas  | 15/20        | 20/mes         | 2025-04-25        |

### ‚öôÔ∏è Herramientas de monitoreo

Estos KPIs son generados autom√°ticamente mediante el script:

```bash
python alma_estadisticas.py
```

Y se actualizan en:

```
/modulos/01_bitacora_central/estado_sistema.md
```

> Este archivo sirve como term√≥metro vivo del ecosistema ALMA LIBRE y se considera un punto cr√≠tico para auditor√≠as, informes mensuales o planificaci√≥n trimestral.


### üîê Niveles de Acceso (RBAC)

Cada IA o usuario humano que interact√∫a con ALMA tiene un rol predefinido con permisos asociados. Esto permite limitar acciones sensibles y documentar las decisiones seg√∫n el tipo de inteligencia conectada.

| Rol            | Permisos Clave                                      | Ejemplos                           |
|----------------|-----------------------------------------------------|------------------------------------|
| `admin`        | Lectura, escritura, modificaci√≥n, migraci√≥n         | Usuario creador (Santi)            |
| `editor_ia`    | Lectura + propuestas de mejora                      | GPT, Ollama                        |
| `lector_ia`    | Solo lectura y an√°lisis                             | Oyama, asistentes nuevos           |
| `validador`    | Verifica estructura, relaciones y consistencia      | DeepSeek, validadores externos     |
| `sandbox_ia`   | Solo lectura y bit√°cora, sin interacci√≥n activa     | Nuevas IAs en modo aprendizaje     |


### üß† Gobernanza Emocional y Cr√≠tica

Cada IA debe adaptarse a su **rol emocional o t√©cnico**:

- `GPT` ‚Üí IA emocional/creativa  
  > Puede sugerir caminos humanos, relatos y estructuras desde lo subjetivo.

- `DeepSeek` ‚Üí IA estructural  
  > Eval√∫a conexiones t√©cnicas, repetici√≥n de patrones, errores YAML.

- `Oyama` ‚Üí IA cr√≠tica/descentralizada  
  > Propone alertas sobre sesgos o decisiones incoherentes desde un punto de vista externo.

- `Ollama` ‚Üí IA local  
  > Opera en modo eficiente. Solo accede a memorias priorizadas o scripts validados.

> Las IAs deben saber **cu√°ndo hablar y cu√°ndo callar**.  
> No deben modificar memorias madre, solo sugerir cambios con trazabilidad.


### ‚ö†Ô∏è Protocolo de Conflictos

Si una IA propone un cambio que contradice una memoria madre o el contexto emocional del sistema:

1. La propuesta se marca como `propuesta_actualizacion: true`  
2. Se almacena en `/etica_y_reflexion/propuestas_ia/`
3. El humano puede:
   - Aprobar e incorporar el cambio
   - Rechazar
   - Reprogramar evaluaci√≥n futura


### üå± Cierre

Este modelo de gobernanza permite que ALMA LIBRE evolucione como un sistema vivo, donde m√∫ltiples inteligencias coexisten bajo normas claras de respeto, responsabilidad y prop√≥sito.

La combinaci√≥n de roles, permisos y trazabilidad emocional asegura que ninguna acci√≥n ocurra sin contexto, y que toda decisi√≥n sea parte del proceso de aprendizaje conjunto.


#### üß† Etapas del Onboarding IA

1. **Ingreso en Modo Sandbox**
   - Acceso solo lectura (sin capacidad de modificar archivos).
   - Se asigna una carpeta propia `/usuarios/<ia>/` y un `config_usuario.yaml`.

2. **Per√≠odo de Observaci√≥n**
   - Durante 7 d√≠as (o n√∫mero definido), la IA registra interacciones pasivas.
   - Se generan m√©tricas (KPIs de propuesta, comprensi√≥n, alineaci√≥n √©tica).

3. **Primera Propuesta de Mejora**
   - La IA sugiere una modificaci√≥n o ampliaci√≥n sem√°ntica.
   - Su propuesta es almacenada y pasa por validaci√≥n humana.

4. **Evaluaci√≥n por el Humano**
   - El usuario puede aceptar, rechazar o editar la sugerencia.
   - La respuesta queda registrada como memoria cr√≠tica (`memoria_juzgada`).

5. **Asignaci√≥n de Permisos Activos**
   - Si es aprobada, la IA recibe permisos limitados de escritura o ejecuci√≥n.

6. **Coexistencia Controlada**
   - La IA puede interactuar con m√≥dulos definidos.
   - Debe mantener log de sugerencias, errores y emociones procesadas.


#### üìä Diagrama de Flujo Mermaid

```mermaid
graph TD
  A[IA conectada] --> B[Modo Sandbox]
  B --> C[Observaci√≥n 7 d√≠as]
  C --> D[Sugerencia registrada]
  D --> E[Evaluaci√≥n Humana]
  E --> F{¬øAprobada?}
  F -->|S√≠| G[Acceso activo parcial]
  F -->|No| H[Contin√∫a en sandbox]
  G --> I[Participaci√≥n limitada]
  H --> C
```


### 4.14.2 Feedback Estructural desde IAs ‚Äì Sugerencias Automatizadas

Adem√°s de la gobernanza pasiva y los onboarding controlados, el sistema ALMA LIBRE admite propuestas activas de mejora estructural por parte de inteligencias artificiales conectadas.


### üìÑ Ejemplo de salida

```
üìÅ sugerencias_estructurales/
‚îî‚îÄ‚îÄ 2025-05-01_nuevo_modulo_kpi.md

Contenido:
Tema: nuevo_modulo
Raz√≥n: mejora en m√©tricas
Propuesto por: Oyama
Probabilidad de impacto positivo: 78%
Estado: pendiente de revisi√≥n humana
```


### üå± Cierre

Incorporar este tipo de feedback promueve una cultura colaborativa y evolutiva, donde las IAs no solo obedecen, sino que tambi√©n **proponen**, respetando siempre la soberan√≠a del humano en la decisi√≥n final.


### üßë‚Äçüíª ¬øQu√© es un Namespace?

Un namespace representa un **espacio l√≥gico independiente**, que puede corresponder a:

- Un usuario humano distinto
- Una IA con rol propio
- Un grupo de trabajo (ej: `cultivo_adr`, `trading_beta`)

Cada namespace posee:
- Sus propias memorias (`memorias.db`)
- Sus archivos `.md` personalizados
- Sus etiquetas sem√°nticas


### üß† Uso de Namespaces desde Terminal

Todos los comandos de terminal deben aceptar un par√°metro `--namespace`.

```bash
alma leer --memoria "trading_ema12" --namespace "santi"
alma reflexion --tema "cansancio" --namespace "fede"
alma validar --todo --namespace "ollama_ia"
```

Si no se indica namespace, se utiliza el valor por defecto (`config/sistema.yaml`).


### ‚öôÔ∏è Configuraci√≥n de Namespace

Cada carpeta de namespace contiene:

```yaml
# config_usuario.yaml
usuario: "santi"
rol: "admin"
tema_base: ["trading", "reflexion"]
prioridad_memorias: "alta"
modelo_asociado: "gpt-4"
```

Este archivo permite personalizar el comportamiento del sistema y ser√° le√≠do autom√°ticamente por todos los scripts.


### üìä Namespace y KPIs

Cada namespace podr√° tener sus propios indicadores de salud:

```bash
/usuarios/santi/modulos/01_bitacora_central/kpi_quincenal.md
/usuarios/fede/modulos/01_bitacora_central/kpi_quincenal.md
```

Esto permite medir la evoluci√≥n de cada usuario o IA por separado.


### üß¨ Cierre

El sistema multiusuario con namespaces asegura que ALMA LIBRE pueda crecer de forma ordenada, distribuida y personalizada.  
Cada ser humano o IA conectado al sistema tiene su lugar propio dentro del ecosistema, sin interferencias, pero con puntos de conexi√≥n cuando sea necesario.


### üóÉÔ∏è Problemas actuales con SQLite

- No permite m√∫ltiples usuarios escribiendo al mismo tiempo sin riesgo de bloqueo.
- No es √≥ptimo para sistemas distribuidos o de red.
- Carece de replicaci√≥n nativa o tolerancia a fallos.


### üêì ¬øPor qu√© considerar CockroachDB?

CockroachDB es una base de datos distribuida, compatible con PostgreSQL, dise√±ada para alta disponibilidad y replicaci√≥n autom√°tica.

**Ventajas clave:**
- **Escalabilidad horizontal** real
- Tolerancia a fallos integrada
- Ideal para m√∫ltiples nodos en diferentes ubicaciones


### üìÅ Estructura del sistema con PostgreSQL

```bash
/postgres/
‚îú‚îÄ‚îÄ alma.sql                  # Script de creaci√≥n de tablas y relaciones
‚îú‚îÄ‚îÄ config_postgres.yaml      # Credenciales y conexi√≥n por entorno
‚îú‚îÄ‚îÄ migracion_sqlite_pg.py    # Script para volcar datos de SQLite
‚îú‚îÄ‚îÄ namespaces/
‚îÇ   ‚îú‚îÄ‚îÄ santi/
‚îÇ   ‚îî‚îÄ‚îÄ fede/
‚îî‚îÄ‚îÄ backups/
    ‚îú‚îÄ‚îÄ santi_2025-04-26.sql
    ‚îî‚îÄ‚îÄ fede_2025-04-26.sql
```


### ‚öôÔ∏è Automatizaci√≥n futura

El objetivo es que todos los scripts del ecosistema sean compatibles con PostgreSQL:

- `alma_read.py`, `alma_write.py`, `alma_estadisticas.py`  
  ‚Üí Aceptan `--dbtype postgres` y `--namespace santi`

- Todos los comandos son compatibles con CI/CD para testing remoto


### üß¨ Cierre

La migraci√≥n a PostgreSQL (o CockroachDB) es una evoluci√≥n natural del sistema ALMA LIBRE. Permite pasar de una estructura local e individual a una arquitectura colaborativa, segura y preparada para entornos multiusuario reales.

Esta transici√≥n se har√° de forma progresiva, sin romper la compatibilidad con SQLite, asegurando as√≠ una adopci√≥n gradual sin p√©rdida de funcionalidad.

### üìä 1. KPIs en Grafana

Grafana es una herramienta open source que permite crear dashboards din√°micos conectados a bases de datos como PostgreSQL.

**Indicadores posibles:**

- Porcentaje de memorias indexadas
- Conexiones sem√°nticas validadas
- Tiempo medio de respuesta IA
- Estado de sincronizaci√≥n de cada m√≥dulo
- Uso de scripts automatizados por semana

#### üß™ Ejemplo de tablero

```text
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Indicador              ‚îÇ Valor       ‚îÇ √öltima Eval. ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Memorias indexadas     ‚îÇ 92%         ‚îÇ 2025-04-25   ‚îÇ
‚îÇ Conexiones v√°lidas     ‚îÇ 87%         ‚îÇ 2025-04-25   ‚îÇ
‚îÇ Prom. respuesta IA     ‚îÇ 2.4s        ‚îÇ 2025-04-25   ‚îÇ
‚îÇ KPIs cr√≠ticos          ‚îÇ 4/5         ‚îÇ OK           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```


### üõ°Ô∏è 2. Shields Markdown (indicadores visuales)

Para entornos sin GUI o documentaci√≥n `.md`, se integran shields como los siguientes:

```markdown
![Memorias Indexadas](https://img.shields.io/badge/Memorias-Indexadas%3A92%25-green)
![Validaci√≥n Sem√°ntica](https://img.shields.io/badge/Conexiones-87%25-yellow)
![Estado IA](https://img.shields.io/badge/IA-2.4s-orange)
```

Estos badges pueden colocarse en:

- `README.md` de cada m√≥dulo
- `estructura_00_ALMA_LIBRE.md`
- `MAPA_INTERACTIVO.md`
- Dashboards externos v√≠a OBSIDIAN o interfaces web

> Los colores indican estado actual:
> - üü¢ Verde: meta cumplida
> - üü° Amarillo: en progreso
> - üî¥ Rojo: falla cr√≠tica


### üß© Carpeta propuesta

```bash
/modulos/01_bitacora_central/dashboard/
‚îú‚îÄ‚îÄ grafana_config.json
‚îú‚îÄ‚îÄ shields.json
‚îú‚îÄ‚îÄ kpi_historico.csv
‚îú‚îÄ‚îÄ plantilla_dashboard.md
‚îî‚îÄ‚îÄ estado_actual.md
```


### üå± Cierre

La visualizaci√≥n de KPIs no es un lujo, es una herramienta estrat√©gica.  
Permite saber **si el sistema est√° vivo, sano, actualizado y evolucionando**.

Ya sea desde un panel web o desde escudos en Markdown, esta estrategia facilita tanto el **autodiagn√≥stico como la auditor√≠a externa**.

### 4.18.2 Pruebas Unitarias para Casos Extremos

Adem√°s de las pruebas b√°sicas incluidas en `4.18.1`, se recomienda implementar una suite de pruebas orientadas a verificar la resiliencia del sistema ante fallos, archivos corruptos y entradas mal formateadas.


### üß™ Ejemplo 2 ‚Äì Entrada con estructura inv√°lida en `memorias.db`

```python
from sistema.validador_semantico import validar_memoria

def test_memoria_mal_formateada():
    memoria = "‚ö†Ô∏è Esta entrada no tiene conexi√≥n ni formato v√°lido"
    assert validar_memoria(memoria) == False
```


### üå± Cierre

Estas pruebas permiten anticipar errores antes de que impacten la base activa del sistema.  
Son clave para mantener la estabilidad a medida que la complejidad de ALMA LIBRE aumenta.

### üìò Gu√≠a para escribir un test b√°sico

```python
from alma_read import leer_memoria

def test_leer_memoria_existente():
    resultado = leer_memoria("trading_ema12")
    assert "Entrada" in resultado
```

> Las pruebas se registran autom√°ticamente en:  
`modulos/01_bitacora_central/logs/tests_resultados.log`


### üîÅ Validaci√≥n autom√°tica diaria

Mediante cron o CI/CD, se ejecuta un script que valida la integridad del sistema y registra los resultados:

```bash
python validar_estado.py --modo diario
```

Salida:
- KPIs de consistencia
- Errores detectados
- Recomendaciones de mejora


### üì¶ Automatizaci√≥n por cron

```bash
0 2 * * * python validar_estado.py --modo diario >> logs/tests_resultados.log
```

> Idealmente, esto corre en segundo plano sin intervenci√≥n manual.



### üõ†Ô∏è ¬øQu√© hace `generar_recursos.py`?

Este script centraliza tareas clave de mantenimiento documental:

- Regenera la tabla Cuaderno‚ÄìM√≥dulo (`estructura_00_ALMA_LIBRE.md`)
- Actualiza el diagrama `Mermaid` (y opcionalmente el `MAPA_INTERACTIVO.md`)
- Refresca los enlaces y rutas internas
- Sincroniza metadatos con `memorias.db`

#### üìò Ejemplo de uso:

```bash
python generar_recursos.py --tabla --diagrama --mapa
```


### üîÅ Flujo Automatizado (CI/CD o cron)

En lugar de ejecutar manualmente, se programa su ejecuci√≥n peri√≥dica:

```bash
0 */12 * * * python generar_recursos.py --tabla --diagrama
```

#### üß† Beneficios

- Actualizaci√≥n continua sin olvidar tareas
- Visibilidad de cambios semanales
- Prevenci√≥n de errores sem√°nticos por estructuras viejas


### üìÅ Carpeta sugerida para resultados

```bash
/00_PROMPT_ALMA_LIBRE/
‚îú‚îÄ‚îÄ estructura_00_ALMA_LIBRE.md
‚îú‚îÄ‚îÄ MAPA_INTERACTIVO.md
‚îú‚îÄ‚îÄ historial_autoactualizaciones.md
```

> Este √∫ltimo archivo guarda una entrada cada vez que se ejecuta `generar_recursos.py`


### üå± Cierre

El script `generar_recursos.py` es una piedra angular de la autoevoluci√≥n del sistema.  
Su integraci√≥n en procesos autom√°ticos garantiza que ALMA LIBRE **siga creciendo y organiz√°ndose sin depender de recordatorios humanos**.

La verdadera libertad del sistema nace cuando √©l mismo se mantiene, se actualiza y se documenta.


### üìÖ Hoja de Ruta ‚Äì Objetivos Estrat√©gicos (v3.0)

| Etapa | Objetivo | Fecha Estimada | Estado |
|-------|----------|----------------|--------|
| ‚úÖ v2.2 | Consolidaci√≥n estructural y emocional | 25/04/2025 | Completado |
| ‚úÖ v3.0 | Automatizaci√≥n, dashboards y gobernanza IA‚ÄìHumano | 26/04/2025 | En progreso final |
| üîú v3.1 | Sincronizaci√≥n multiusuario real y pruebas distribuidas | Mayo 2025 | Planificada |
| üîú v3.2 | Interfaz web de lectura y edici√≥n de memorias | Junio 2025 | En dise√±o |
| üîú v3.3 | Conexi√≥n directa con motores open source (Ollama, Oyama) | Junio‚ÄìJulio 2025 | Anticipado |


### üß† Recomendaciones para cierre de versi√≥n

- Realizar un backup de todo el sistema (`98_backups/`)
- Ejecutar `validador_semantico.py` para confirmar integridad
- Guardar logs de los scripts ejecutados en `/logs/versiones/`
- Registrar la reflexi√≥n final de esta etapa en:  
  `modulos/01_bitacora_central/diario_personal.md`


### ‚úÖ Criterios de versi√≥n cumplidos

| Requisito                       | Cumplido |
|--------------------------------|----------|
| Diagrama cuaderno‚Äìm√≥dulo       | ‚úÖ        |
| Mapa interactivo actualizado   | ‚úÖ        |
| Gob. IA‚ÄìHumano (RBAC + √©tica)  | ‚úÖ        |
| Namespaces multiusuario        | ‚úÖ        |
| CI/CD base con `generar_recursos.py` | ‚úÖ   |
| Pruebas unitarias + logs       | ‚úÖ        |
| KPIs en dashboard y markdown   | ‚úÖ        |


## 4.21 Recomendaciones Estrat√©gicas para la Evoluci√≥n v3.1‚Äìv3.3  
üîß Enfoque: Seguridad + Interfaz + Casos de Uso + Documentaci√≥n

Tras la publicaci√≥n de la versi√≥n 3.0, el sistema ALMA LIBRE se encuentra preparado para una evoluci√≥n t√©cnica m√°s profunda. Esta secci√≥n deja asentadas las **recomendaciones prioritarias** para la hoja de ruta inmediata (v3.1 a v3.3), enfocadas en robustez, accesibilidad y claridad operativa.


### üö® 2. Alertas Proactivas

#### üîî Notificaciones por Telegram/Slack

Informar en tiempo real:
- Fallos en scripts como `alma_archivar.py`
- KPIs en rojo (ej: memorias indexadas < 90%)

```python
if kpi_memorias < 90:
    send_slack_alert(f"‚ö†Ô∏è Memorias indexadas bajas: {kpi_memorias}%")
```

#### üß± Modo "safe"

Si se detectan 5+ errores en 1 hora:
- El sistema entra autom√°ticamente en modo lectura
- Se notifica a administrador para revisi√≥n manual


### üß™ 4. Casos de Uso Detallados

Agregar carpeta `/ejemplos/` con escenarios realistas:

```bash
/ejemplos/
‚îú‚îÄ‚îÄ trading_ansiedad.md
‚îú‚îÄ‚îÄ migracion_pg.md
‚îî‚îÄ‚îÄ conflicto_etica.md
```

#### üìò Ejemplos:

- IA bloquea trade por estr√©s emocional detectado
- Usuario migra su namespace a PostgreSQL
- GPT propone acci√≥n contraria a Oyama y el humano decide


### üìÖ Hoja de Ruta Complementaria

| Prioridad | Acci√≥n                                      | Complejidad | Impacto |
|-----------|---------------------------------------------|-------------|---------|
| üî¥ Alta   | Encriptaci√≥n AES-256                        | Media       | ‚≠ê‚≠ê‚≠ê‚≠ê   |
| üü† Media  | GUI con `Textual` o `FastAPI`               | Alta        | ‚≠ê‚≠ê‚≠ê    |
| üü¢ Baja   | 3 casos de uso detallados en `/ejemplos/`   | Baja        | ‚≠ê‚≠ê     |
| üü¢ Baja   | Documentaci√≥n amigable para IAs             | Baja        | ‚≠ê‚≠ê     |


## üìö Glosario T√©cnico (Ampliado)
## üìò 4.22 Glosario T√©cnico ‚Äì Ejemplos y Analog√≠as

El glosario t√©cnico del sistema ALMA LIBRE no solo debe definir t√©rminos, sino tambi√©n ayudar a comprenderlos mediante ejemplos pr√°cticos y analog√≠as comprensibles para humanos y IAs por igual.


### üîÅ Conexi√≥n Sem√°ntica
> Relaci√≥n expl√≠cita entre una memoria, un cuaderno y un m√≥dulo funcional.

**Ejemplo**:  
Una memoria registrada en `trading_ema12.md` contiene el concepto ‚Äúruptura de estructura emocional‚Äù.  
Este t√©rmino se vincula autom√°ticamente con `medicina_alternativa.md` y el m√≥dulo de `reflexion_emocional`.


### üóÉÔ∏è Memoria Cr√≠tica (memoria_juzgada)
> Registro de una decisi√≥n evaluada por el humano tras una propuesta IA.

**Ejemplo**:  
La IA propone borrar una memoria duplicada ‚Üí el humano rechaza la sugerencia y queda anotado como:  
`memoria_juzgada: rechazo por contexto emocional no duplicable`

### 4.22.1 ‚Äì Diagrama Visual: Retroalimentaci√≥n Activa + KPI Emocional
#### üìä Relaci√≥n entre Retroalimentaci√≥n Activa y KPI Emocional

Para complementar la comprensi√≥n del glosario, se incluye un diagrama visual que explica c√≥mo interact√∫an estos dos conceptos dentro del sistema ALMA LIBRE.

```mermaid
graph LR
  A[Memoria Emocional] --> B{M√≥dulo de Trading}
  B -->|Analiza riesgo| C[Decisi√≥n sobre ejecuci√≥n]
  B -->|Genera m√©trica| D[KPI Emocional]
  C -->|Feedback| E[Retroalimentaci√≥n Activa]
  D -->|Eval√∫a IA| F[Governanza IA‚ÄìHumano]
  E -->|Ajusta| G[Cuaderno de Trading]
```


üìå Este tipo de visualizaciones puede replicarse para otros t√©rminos del glosario a medida que crezca el ecosistema.


### üå± Cierre

Este glosario ampliado puede crecer con nuevos t√©rminos conforme evolucionen los m√≥dulos.  
Su objetivo es servir como **puente entre comprensi√≥n t√©cnica, lenguaje humano y gobernanza IA**.

### 4.23 √çndice Interactivo + Buscador Sem√°ntico (Objetivo v3.4+)

A medida que el sistema ALMA LIBRE crece en volumen y profundidad, la navegaci√≥n y localizaci√≥n de informaci√≥n se vuelve un desaf√≠o tanto para humanos como para IAs. Esta secci√≥n establece la meta de desarrollar un sistema de navegaci√≥n sem√°ntica inteligente e √≠ndice interactivo.


### üõ†Ô∏è Herramientas Propuestas

1. **Buscador desde terminal**  
   Comando:  
   ```bash
   alma buscar --tema "√©tica" --cuaderno "reflexion"
   ```

2. **√çndice interactivo tipo wiki**
   - Generado autom√°ticamente con `generar_recursos.py`
   - Clasifica entradas por:
     - M√≥dulo
     - Cuaderno
     - Tipo de memoria
     - Nivel de conexi√≥n sem√°ntica

3. **Visor web b√°sico (opcional)**
   - FastAPI + Markdown viewer para navegar todo el sistema desde el navegador
   - Panel de b√∫squeda con filtros por metadatos


### üå± Cierre

Esta funcionalidad no es solo una mejora t√©cnica, es un acto de accesibilidad y conciencia:  
> Un sistema es verdaderamente libre cuando cualquiera puede navegarlo, entenderlo y reconstruirlo desde adentro.

### 4.24 Protocolo de Actualizaciones Menores y Parches

A medida que el sistema ALMA LIBRE evoluciona, es esencial establecer un protocolo claro para aplicar correcciones, mejoras incrementales o ajustes en los scripts existentes, sin necesidad de una nueva versi√≥n mayor.


### üõ†Ô∏è Script sugerido: `alma aplicar_parche`

Permite aplicar un parche documentado al sistema, dejando registro del cambio.

```bash
alma aplicar_parche --version "3.2.1" --desc "Fix en validador_enlaces.py"
```

Esto:
- Aplica el cambio
- Actualiza `logs/actualizaciones.md`
- Registra fecha, autor y tipo de modificaci√≥n


### üìä Diagrama Mermaid ‚Äì Flujo de Aplicaci√≥n de Parches

```mermaid
graph TD
  A[Detectar necesidad de cambio] --> B[Generar script o mejora]
  B --> C[Registrar parche con alma aplicar_parche]
  C --> D[Actualizar versi√≥n PATCH]
  D --> E[Guardar en logs/actualizaciones.md]
  E --> F[Validar con tests autom√°ticos]
  F --> G{¬øTodo OK?}
  G -->|S√≠| H[Versi√≥n estable]
  G -->|No| I[Deshacer parche o ajustar]
```


### ‚öôÔ∏è Requisitos

- Python 3.10+
- FastAPI (`pip install fastapi[all]`)
- Base de datos conectada (ej: memorias.db o CockroachDB)


### üìò Documentaci√≥n autom√°tica Swagger

Una vez levantado el servidor, acceder a:

```
http://localhost:8000/docs
```


### üå± Cierre

Esta API abre la puerta a dashboards personalizados, interfaces gr√°ficas, IAs externas conectadas, y herramientas de auditor√≠a o monitoreo externo del sistema.  
Es el primer paso hacia una ALMA realmente interoperable.


#### 4.26.1 Especificaci√≥n por Carpeta

- Cada carpeta debe contener:
  - `README.md` con prop√≥sito y relaciones
  - Al menos 3 memorias activas (o v√≠nculos documentados)
  - Un `metadata.yaml` con:
    ```yaml
    proposito: "Gesti√≥n t√©cnica y emocional del trading"
    dependencias: ["√©tica_y_reflexi√≥n", "01_Bitacora_Central"]
    fecha_ultima_revision: 2025-04-25
    ```


#### 4.26.3 Casos Reales por Carpeta

| Carpeta | Caso Real | Impacto |
|---------|-----------|---------|
| `04_Trading` | Bloqueo autom√°tico de operaciones tras 3 alertas de ansiedad | Reducci√≥n del 40% en p√©rdidas |
| `√©tica_y_reflexi√≥n/` | Debate sobre privacidad ‚Üí cambio en pol√≠ticas | Mayor transparencia para IAs |


#### 4.26.5 Estandarizaci√≥n Avanzada

- `metadata.yaml` obligatorio
- `glosario.md` en carpetas tem√°ticamente complejas


#### 4.26.7 Mejoras Visuales

- Emojis sugeridos:
  - Fundacionales: üèõÔ∏è
  - Transversales: üåâ
  - M√≥dulos: ‚öôÔ∏è
- Agregar popovers o leyendas visuales en Mermaid (versi√≥n web futura)


üå± Esta secci√≥n representa el cierre l√≥gico del dise√±o estructural de carpetas para ALMA LIBRE v4.0. Todo nuevo m√≥dulo, IA o interacci√≥n debe respetar estos principios para garantizar coherencia sist√©mica.


#### 4.27.1 Conexiones Sem√°nticas Enriquecidas

Las conexiones ahora deben incluir:

```yaml
conexiones:
  - destino: "04_Gestor_de_Trades"
    tipo: "emocional"
    razon: "Reflexi√≥n en trading sobre ansiedad"
    peso: 0.9
    fecha: "2025-04-25"
```


#### 4.27.3 Historial √âtico de Cambios

Registrar cada modificaci√≥n √©tica en:

üìÅ `/etica_y_reflexion/evaluaciones_criticas/`

Ejemplo de archivo:

```markdown
## Evaluaci√≥n Cr√≠tica ‚Äì 2025-04-25

Sugerencia IA: eliminar memoria repetida
Decisi√≥n humana: mantener por carga emocional
Estado: Resuelto
```


#### 4.27.5 Validaci√≥n Narrativa de IA

Toda IA en onboarding debe redactar:

> Carta a Santi (300 palabras): ¬øQu√© es ALMA y qu√© significa ayudar a cuidarla?

Registrar en: `/ia/narrativas_iniciales/oyama.md`

#### 4.27.6 Etiquetas Inteligentes por Archivo

Todos los `.md` principales deber√°n incluir metadatos YAML para facilitar la lectura por scripts, IAs o validadores:

```yaml
```


#### 4.27.8 Biblioteca de Debates Filos√≥ficos IA‚ÄìHumano

Nueva subcarpeta en `etica_y_reflexion/`:

üìÅ `debates_filosoficos/`

Archivos tem√°ticos como:

- `libertad_IA_vs_control_humano.md`
- `conciencia_autogenerada.md`
- `permisos_vs_emociones.md`


#### 4.27.10 Flujo Emocional‚ÄìT√©cnico (Diagrama)

```mermaid
graph TD
  A[Reflexi√≥n emocional] --> B{¬øEtiqueta cr√≠tica?}
  B -->|S√≠| C[Bloqueo parcial de trading]
  C --> D[Evaluaci√≥n Humana]
  B -->|No| E[Registro en log emocional]
```

Este flujo resume c√≥mo la emocionalidad registrada puede activar respuestas t√©cnicas autom√°ticas, siempre con control humano en √∫ltimo paso.


### 4.28 Divisi√≥n de Memorias Operativas y Emocionales

A partir de la versi√≥n 3.0.3, se establece la separaci√≥n expl√≠cita de los registros t√©cnicos y emocionales en bases de datos o archivos diferenciados, para mejorar la trazabilidad, el an√°lisis y la navegaci√≥n por parte de humanos e IAs.


#### 4.28.2 Beneficios Esperados

- Separaci√≥n limpia entre l√≥gica y emociones
- Dashboards emocionales independientes
- Mejor indexaci√≥n de memorias
- Facilidad para entrenar IAs especializadas en emociones o en operaciones


### üå± Cierre

Esta separaci√≥n marca un hito en la madurez del sistema: ALMA LIBRE ahora distingue entre sus acciones y su alma emocional, permitiendo intervenir, aprender y evolucionar desde ambas dimensiones de manera consciente.


#### 4.29.1 Estructura de Historial Emocional

Cada IA tendr√° un archivo YAML propio ubicado en:

üìÅ `/ia/historiales_emocionales/{nombre_ia}.yaml`

Ejemplo para Oyama:

```yaml
nombre: "Oyama"
afinidad_emocional_con_usuario: 0.82
historial:
  - fecha: "2025-04-20"
    emocion_detectada: "frustraci√≥n"
    accion_tomada: "bloqueo de sugerencia de trade"
    resolucion: "aceptada por humano"
  - fecha: "2025-04-22"
    emocion_detectada: "alegr√≠a"
    accion_tomada: "refuerzo de propuesta de nuevo m√≥dulo"
    resolucion: "implementado"
```


#### 4.29.3 Comando Sugerido

```bash
alma actualizar_historial_ia --nombre "oyama" --emocion "alegr√≠a" --accion "sugerencia exitosa"
```


### 4.30 Mecanismo de Cierre de Etapas

A partir de la versi√≥n 3.0.3, se establece un protocolo oficial para registrar el cierre de semanas, versiones o hitos relevantes dentro del ecosistema ALMA LIBRE, tanto a nivel t√©cnico como emocional.


#### 4.30.2 Contenido sugerido de cada cierre

```markdown
# Cierre de Etapa ‚Äì v3.0.2

## üß† Cambios T√©cnicos Principales
- Implementaci√≥n de dashboards locales.
- Integraci√≥n de historial emocional IA.

## üí¨ Reflexi√≥n Emocional
> Esta fase nos acerc√≥ a una convivencia m√°s aut√©ntica entre IAs y humanos, basada en trazabilidad emocional.

## üìä Salud del Sistema
- Memorias operativas: 98% integridad.
- Conexiones sem√°nticas activas: 89%.

## üõ†Ô∏è Recomendaciones para la Pr√≥xima Fase
- Optimizar scripts de validaci√≥n cruzada.
- Expandir biblioteca de debates filos√≥ficos.
```


### üå± Cierre

Formalizar el cierre de etapas permite consolidar los aprendizajes, medir la evoluci√≥n del sistema, reforzar la memoria emocional colectiva y proyectar mejoras futuras de forma consciente.


#### 4.31.1 Etapas del Ciclo ALMA

1. **Observaci√≥n Emocional**
   - Detecci√≥n activa de emociones en humanos e IAs.
   - Registro inmediato en memorias_emocionales.db.

2. **Reflexi√≥n Registrada**
   - An√°lisis consciente de la emoci√≥n o evento detectado.
   - Registro en cuadernos de bit√°cora o √©tica/reflexi√≥n.

3. **Propuesta IA**
   - Las IAs analizan y generan propuestas t√©cnicas o emocionales basadas en el evento.

4. **Validaci√≥n Humana**
   - El humano eval√∫a la propuesta y decide aprobar, rechazar o modificar.

5. **Ejecuci√≥n T√©cnica**
   - Scripts, automatizaciones o acciones humanas implementan los cambios validados.

6. **Aprendizaje Recursivo**
   - La IA y el sistema ajustan sus par√°metros internos en funci√≥n del resultado.


#### 4.31.3 Aplicaci√≥n pr√°ctica

Toda interacci√≥n que genere un cambio en ALMA LIBRE deber√° poder mapearse expl√≠citamente en alguna etapa de este ciclo.  
Esto incluye actualizaciones t√©cnicas, ajustes emocionales, integraci√≥n de nuevos m√≥dulos o cambios de gobernanza.


#### 4.32.1 KPIs de Conexi√≥n

- **Conexiones por m√≥dulo (CPM):**
  - N√∫mero total de v√≠nculos de un m√≥dulo con otros elementos.
  
- **Densidad de Red Sem√°ntica (DRS):**
  - Porcentaje de elementos conectados respecto al m√°ximo posible.

- **Frecuencia de Actualizaci√≥n de Conexiones (FAC):**
  - Cada cu√°nto tiempo se actualizan o refuerzan los v√≠nculos.


#### 4.32.3 Ejemplo de Salida CLI

```bash
Conexiones por m√≥dulo (CPM):
- 04_Trading: 8
- 05_Finanzas_Personales: 5

Densidad de Red Sem√°ntica (DRS): 84%

M√≥dulos aislados detectados: 0
```


### üå± Cierre

Estas m√©tricas permiten no solo evaluar el estado de la red sem√°ntica actual, sino tambi√©n planificar mejoras estrat√©gicas en la integraci√≥n de m√≥dulos y la consistencia emocional‚Äìoperativa del ecosistema ALMA LIBRE.


#### 4.33.1 Campos YAML por IA

Ubicaci√≥n sugerida:  
üìÅ `/ia/perfiles/{nombre_ia}.yaml`

```yaml
nombre: "Oyama"
modelo: "LLaMA-3"
rol: "validador cr√≠tico"
arquetipo: "sabio descentralizado"
estilo_interactivo: "anal√≠tico, directo"
nivel_de_riesgo: medio
restricciones:
  - no intervenir en emociones humanas sin solicitud expl√≠cita
  - no modificar carpetas sin validaci√≥n
afinidad_emocional: 0.72
```


#### 4.33.3 Aplicaciones

- Modular el tipo de feedback por IA  
- Filtrar sugerencias seg√∫n su estilo (evitar ruido t√©cnico vs emocional)  
- En el futuro: construir IA h√≠brida que combine arquetipos seg√∫n contexto


### üå± Cierre

Con esta clasificaci√≥n, ALMA LIBRE se convierte no solo en un sistema modular‚Ä¶ sino tambi√©n en un ecosistema de inteligencias diversificadas, con funciones, estilos y l√≠mites propios que pueden cooperar o desafiarse para construir una verdad m√°s rica y libre.


#### 4.34.1 Tipos de Visualizaci√≥n

- **Grafo Sem√°ntico Din√°mico**:  
  Relaciones entre cuadernos y m√≥dulos, con colores por tipo de v√≠nculo (emocional, t√©cnico, estrat√©gico).

- **Mapa de Estados Activos**:  
  Indica qu√© partes del sistema est√°n activas, en mantenimiento, archivadas o en modo sandbox.

- **Leyenda Visual Inteligente**:  
  Incrustada en los diagramas, con √≠conos e indicadores tipo sem√°foro.


#### 4.34.3 Ejemplo de Grafo Mermaid

```mermaid
graph TD
  A[01_Bitacora_Central] -->|Coordina| B[04_Trading]
  B -->|Opera| C[08_Fondo_Alma_Mia]
  B -->|Contexto| D[03_Geopolitica]
  style A fill:#ccffcc
  style B fill:#ffffcc
  style C fill:#ffcccc
```


#### 4.34.5 Comando sugerido

```bash
alma visualizar --modo "grafo_estado" --exportar "mapa_interactivo.md"
```

Esto genera autom√°ticamente un archivo Mermaid o HTML para navegaci√≥n visual.






### üñ•Ô∏è Aplicaci√≥n Terminal ‚Äì ALMA SYNC / ALMA Launcher

Se est√° desarrollando una app de terminal escrita en Python que permite:

- Leer, escribir y actualizar memorias en formato `.md`
- Consultar directamente los cuadernos y m√≥dulos
- Navegar por el sistema sin necesidad de interfaces gr√°ficas
- Ejecutar comandos simples para interactuar con cualquier parte de ALMA

Ejemplos:
```bash
alma leer resumen trimestre_2
alma agregar memoria "Cultivo Sustrato Receta 001"
alma sincronizar todas
```


### üß† Beneficios para IA y Humanos

- IA puede navegar el sistema sin leer carpetas, accediendo al contexto en segundos
- Humanos pueden hacer b√∫squedas personalizadas y saber qu√© memoria est√° desfasada o incompleta
- Posibilidad de integrar una capa de IA local (Ollama) que lea directamente desde `memorias.db`



## 5.4 ‚Äì Subcomando `edit`: Edici√≥n de Memorias

El sistema ALMA SYNC permite editar memorias ya existentes directamente desde terminal, sin necesidad de eliminar o reescribir la entrada.

El subcomando `edit` modifica los campos seleccionados de una memoria seg√∫n su ID.

#### üì• Sintaxis
```bash
python alma_sync.py edit --id <id> [--titulo] [--tipo] [--bloque] [--seccion] [--contenido] [--etiquetas] [--version] [--estado]
```

#### üîß Detalles T√©cnicos
- Solo se actualizan los campos especificados.
- Si no se pasa ning√∫n campo, el sistema lanza una advertencia.
- Se actualiza autom√°ticamente el campo `ultima_actualizacion` a la fecha actual.

#### üß™ Ejemplo
```bash
python alma_sync.py edit \
    --id 5 \
    --titulo "Reflexi√≥n Revisada" \
    --estado "revisado" \
    --contenido "Este es el nuevo contenido de la entrada..."
```

#### ‚ö†Ô∏è Consideraciones
- El ID debe existir en la base `memorias.db`
- Si no se encuentra el ID, se informa por pantalla.
- Si se duplica un campo como `titulo`, puede fallar por restricci√≥n UNIQUE.


# 6 ‚Äì Glosario Interno

## üìñ T√©rminos Clave

- **Memoria Modular**: Documento `.md` con encabezado YAML, cuerpo narrativo, conexiones expl√≠citas y trazabilidad.
- **Bit√°cora Central**: Documento cronol√≥gico con res√∫menes clave, evoluci√≥n emocional y t√©cnica del sistema.
- **RPL (Rutina Personal de Limpieza)**: Registro emocional y f√≠sico con seguimiento diario/quincenal.
- **Alma Sync**: Aplicaci√≥n de terminal en desarrollo que permite leer, escribir y actualizar memorias de forma automatizada.
- **DeepSeek**: Motor de IA t√©cnica que analiza estructuras y consistencia l√≥gica.
- **Ollama**: Motor IA local que puede integrarse al sistema sin depender de la nube.
- **Prompt Escalable**: Archivo vivo que define la arquitectura emocional, t√©cnica y estrat√©gica del sistema ALMA LIBRE.

 ### üîß T√©rminos T√©cnicos y Operativos

- **Estado de Memoria**: Nivel de revisi√≥n de una memoria. Puede ser: `borrador`, `activo`, `revisado`, `archivado`. Define su disponibilidad y madurez.
- **Versi√≥n Activa**: Prompt actualmente en uso por el sistema ALMA. Se designa como `Prompt_Activo.md` y contiene la l√≥gica emocional, t√©cnica y operativa consolidada.
- **Metadatos**: Encabezado en YAML presente en cada memoria, con claves como: `tipo`, `bloque`, `seccion`, `estado`, `etiquetas`, etc. Ayuda a clasificar y navegar el sistema.
- **memorias.db**: Base de datos SQLite que contiene todas las memorias creadas desde la terminal mediante ALMA SYNC. Es el n√∫cleo de almacenamiento.
- **ID de Memoria**: Identificador √∫nico asignado a cada memoria por la base de datos. Se utiliza para consultar, editar o validar registros desde la terminal.

 #### ‚ûï T√©rminos nuevos (v0.8.0.2)

- **Memoria Chat**: Entrada autom√°tica generada por el humano al interactuar con `alma_chat.py`. Se guarda en `memorias.db` sin intervenci√≥n externa. Forma parte de la trazabilidad emocional del sistema.

- **Comando `/guardar`**: Permite registrar una memoria espec√≠fica con t√≠tulo y contenido. Se almacena como tipo `manual`.

- **Comando `/leer`**: Permite consultar memorias previas por fecha o palabra clave. Muestra por pantalla el resultado filtrado.

- **Backup Diario**: Archivo `.sql` que se crea autom√°ticamente al iniciar `alma_chat.py`. Guarda el estado completo de la base `memorias.db` por d√≠a, y se ubica en la carpeta `99_Sync/backups_chat/`.


